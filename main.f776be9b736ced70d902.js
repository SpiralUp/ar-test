var $localize=Object.assign(void 0===$localize?{}:$localize,{locale:"hr"});
"use strict";(function(global){global.ng=global.ng||{};global.ng.common=global.ng.common||{};global.ng.common.locales=global.ng.common.locales||{};var u=undefined;function plural(n){var i=Math.floor(Math.abs(n)),v=n.toString().replace(/^[^.]*\.?/,"").length,f=parseInt(n.toString().replace(/^[^.]*\.?/,""),10)||0;if(v===0&&i%10===1&&!(i%100===11)||f%10===1&&!(f%100===11))return 1;if(v===0&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)||f%10===Math.floor(f%10)&&f%10>=2&&f%10<=4&&!(f%100>=12&&f%100<=14))return 3;return 5}global.ng.common.locales["hr"]=["hr",[["AM","PM"],u,u],u,[["N","P","U","S","\u010C","P","S"],["ned","pon","uto","sri","\u010Det","pet","sub"],["nedjelja","ponedjeljak","utorak","srijeda","\u010Detvrtak","petak","subota"],["ned","pon","uto","sri","\u010Det","pet","sub"]],[["n","p","u","s","\u010D","p","s"],["ned","pon","uto","sri","\u010Det","pet","sub"],["nedjelja","ponedjeljak","utorak","srijeda","\u010Detvrtak","petak","subota"],["ned","pon","uto","sri","\u010Det","pet","sub"]],[["1.","2.","3.","4.","5.","6.","7.","8.","9.","10.","11.","12."],["sij","velj","o\u017Eu","tra","svi","lip","srp","kol","ruj","lis","stu","pro"],["sije\u010Dnja","velja\u010De","o\u017Eujka","travnja","svibnja","lipnja","srpnja","kolovoza","rujna","listopada","studenoga","prosinca"]],[["1.","2.","3.","4.","5.","6.","7.","8.","9.","10.","11.","12."],["sij","velj","o\u017Eu","tra","svi","lip","srp","kol","ruj","lis","stu","pro"],["sije\u010Danj","velja\u010Da","o\u017Eujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac"]],[["pr.n.e.","AD"],["pr. Kr.","po. Kr."],["prije Krista","poslije Krista"]],1,[6,0],["dd. MM. y.","d. MMM y.","d. MMMM y.","EEEE, d. MMMM y."],["HH:mm","HH:mm:ss","HH:mm:ss z","HH:mm:ss (zzzz)"],["{1} {0}",u,"{1} 'u' {0}",u],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"HRK","HRK","hrvatska kuna",{"AUD":[u,"$"],"BRL":[u,"R$"],"CAD":[u,"$"],"CNY":[u,"\xA5"],"EUR":[u,"\u20AC"],"GBP":[u,"\xA3"],"HKD":[u,"$"],"ILS":[u,"\u20AA"],"INR":[u,"\u20B9"],"JPY":[u,"\xA5"],"KRW":[u,"\u20A9"],"MXN":[u,"$"],"NZD":[u,"$"],"TWD":[u,"NT$"],"USD":[u,"$"],"VND":[u,"\u20AB"],"XCD":[u,"$"],"XPF":[],"XXX":[]},"ltr",plural,[[["pono\u0107","podne","ujutro","popodne","nave\u010Der","no\u0107u"],u,["pono\u0107","podne","ujutro","poslije podne","nave\u010Der","no\u0107u"]],[["pono\u0107","podne","ujutro","popodne","nave\u010Der","no\u0107u"],u,u],["00:00","12:00",["04:00","12:00"],["12:00","18:00"],["18:00","21:00"],["21:00","04:00"]]]]})(typeof globalThis!=="undefined"&&globalThis||typeof global!=="undefined"&&global||typeof window!=="undefined"&&window);;
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},"1OyB":function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},"25BE":function(e,t,n){"use strict";function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.d(t,"a",function(){return r})},"2QA8":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}()},"2WcH":function(e,t,n){"use strict";function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}n.d(t,"a",function(){return r})},"2fFW":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},"5+tZ":function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("ZUHj"),u=n("l7GE"),l=n("51Dv"),c=n("lJxs"),h=n("Cfvw");function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(r){return r.pipe(f(function(n,r){return Object(h.a)(e(n,r)).pipe(Object(c.a)(function(e,i){return t(n,e,r,i)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new d(e,n))})}var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;Object(a.a)(this,e),this.project=t,this.concurrent=n}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new p(e,this.project,this.concurrent))}}]),e}(),p=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return Object(a.a)(this,n),(i=t.call(this,e)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return Object(o.a)(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=new l.a(this,void 0,void 0);this.destination.add(r),Object(s.a)(this,e,t,n,r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyComplete",value:function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(u.a)},"51Dv":function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("LK+K"),s=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(e,i,a){var o;return Object(r.a)(this,n),(o=t.call(this)).parent=e,o.outerValue=i,o.outerIndex=a,o.index=0,o}return Object(i.a)(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(n("7o/Q").a)},"7o/Q":function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n("1OyB"),i=n("vuIU"),a=n("JX7q"),o=n("ReuC"),s=n("foSv"),u=n("Ji7U"),l=n("LK+K"),c=n("n6bG"),h=n("gRHU"),f=n("quSY"),d=n("2QA8"),p=n("2fFW"),v=n("NJ4a"),m=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,i,o){var s;switch(Object(r.a)(this,n),(s=t.call(this)).syncErrorValue=null,s.syncErrorThrown=!1,s.syncErrorThrowable=!1,s.isStopped=!1,arguments.length){case 0:s.destination=h.a;break;case 1:if(!e){s.destination=h.a;break}if("object"==typeof e){e instanceof n?(s.syncErrorThrowable=e.syncErrorThrowable,s.destination=e,e.add(Object(a.a)(s))):(s.syncErrorThrowable=!0,s.destination=new g(Object(a.a)(s),e));break}default:s.syncErrorThrowable=!0,s.destination=new g(Object(a.a)(s),e,i,o)}return s}return Object(i.a)(n,[{key:d.a,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,Object(o.a)(Object(s.a)(n.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,r){var i=new n(e,t,r);return i.syncErrorThrowable=!1,i}}]),n}(f.a),g=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,i,o,s){var u,l;Object(r.a)(this,n),(u=t.call(this))._parentSubscriber=e;var f=Object(a.a)(u);return Object(c.a)(i)?l=i:i&&(l=i.next,o=i.error,s=i.complete,i!==h.a&&(f=Object.create(i),Object(c.a)(f.unsubscribe)&&u.add(f.unsubscribe.bind(f)),f.unsubscribe=u.unsubscribe.bind(Object(a.a)(u)))),u._context=f,u._next=l,u._error=o,u._complete=s,u}return Object(i.a)(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;p.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=p.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(v.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(v.a)(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};p.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),p.a.useDeprecatedSynchronousErrorHandling)throw n;Object(v.a)(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!p.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return p.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Object(v.a)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(m)},"9ppp":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},AytR:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r={production:!0}},BsWD:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("a3WO");function i(e,t){if(e){if("string"==typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},Cfvw:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),a=n("quSY"),o=n("kJWO"),s=n("jZKg"),u=n("Lhse"),l=n("c2HN"),c=n("I55L");function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.a]}(e))return function(e,t){return new r.a(function(n){var r=new a.a;return r.add(t.schedule(function(){var i=e[o.a]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if(Object(l.a)(e))return function(e,t){return new r.a(function(n){var r=new a.a;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if(Object(c.a)(e))return Object(s.a)(e,t);if(function(e){return e&&"function"==typeof e[u.a]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.a(function(n){var r,i=new a.a;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[u.a](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(a){return void n.error(a)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.a?e:new r.a(Object(i.a)(e))}},DH7j:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},DSFK:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,"a",function(){return r})},EQ5u:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return p});var r=n("ReuC"),i=n("foSv"),a=n("1OyB"),o=n("vuIU"),s=n("Ji7U"),u=n("LK+K"),l=n("XNiG"),c=n("HDdC"),h=(n("7o/Q"),n("quSY")),f=n("x+ZX"),d=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return Object(o.a)(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new h.a).add(this.source.subscribe(new v(this.getSubject(),this))),e.closed&&(this._connection=null,e=h.a.EMPTY)),e}},{key:"refCount",value:function(){return Object(f.a)()(this)}}]),n}(c.a),p=function(){var e=d.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),v=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,e)).connectable=r,i}return Object(o.a)(n,[{key:"_error",value:function(e){this._unsubscribe(),Object(r.a)(Object(i.a)(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),Object(r.a)(Object(i.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(l.b)},EY2u:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a});var r=n("HDdC"),i=new r.a(function(e){return e.complete()});function a(e){return e?function(e){return new r.a(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},FBxB:function(e,t){(function(){"use strict";var e="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},t=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this),n="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};!function(n,r){if(r)e:{var i=t;n=n.split(".");for(var a=0;a<n.length-1;a++){var o=n[a];if(!(o in i))break e;i=i[o]}(r=r(a=i[n=n[n.length-1]]))!=a&&null!=r&&e(i,n,{configurable:!0,writable:!0,value:r})}}("Object.assign",function(e){return e||n});var r=this||self,i={facingMode:"user",width:640,height:480};function a(e,t){this.video=e,this.h=0,this.g=Object.assign(Object.assign({},i),t)}function o(e){window.requestAnimationFrame(function(){!function(e){var t=null;e.video.paused||e.video.currentTime===e.h||(e.h=e.video.currentTime,t=e.g.onFrame()),t?t.then(function(){o(e)}):o(e)}(e)})}a.prototype.start=function(){var e=this;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||alert("No navigator.mediaDevices.getUserMedia exists.");var t=this.g;return navigator.mediaDevices.getUserMedia({video:{facingMode:t.facingMode,width:t.width,height:t.height}}).then(function(t){!function(e,t){e.video.srcObject=t,e.video.onloadedmetadata=function(){e.video.play(),o(e)}}(e,t)}).catch(function(e){throw console.error("Failed to acquire camera feed: "+e),alert("Failed to acquire camera feed: "+e),e})};var s,u=["Camera"],l=r;u[0]in l||void 0===l.execScript||l.execScript("var "+u[0]);for(;u.length&&(s=u.shift());)u.length||void 0===a?l=l[s]&&l[s]!==Object.prototype[s]?l[s]:l[s]={}:l[s]=a}).call(this)},FnrL:function(e){e.exports=JSON.parse('[{"nameUrl":"watch4-44mm","name":"Galaxy Watch4<br/>44mm","description":"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.","buyUrl":"https://google.com","infoUrl":"https://google.com","shareUrl":"https://google.com","imageUrl":"/images/Galaxy_Watch4_44mm.png","defaults":[{"body":"tijelo_fresh_black","strap":"remen_black","watchface":"watchface_fresh_large_black"},{"body":"tijelo_fresh_silver","strap":"remen_silver","watchface":"watchface_fresh_large_silver"},{"body":"tijelo_fresh_green","strap":"remen_green","watchface":"watchface_fresh_large_green"}],"setup":{"object":{"addonX":-9,"addonY":-20,"rotateXOffset":-60,"rotateYOffset":45,"rotateZOffset":40,"scale":{"x":0.0795,"y":0.0795,"z":0.0795}}}},{"nameUrl":"watch4-40mm","name":"Galaxy Watch4<br/>40mm","description":"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.","buyUrl":"https://google.com","infoUrl":"https://google.com","shareUrl":"https://google.com","imageUrl":"/images/Galaxy_Watch4_40mm.png","defaults":[{"body":"tijelo_fresh_black","strap":"remen_black","watchface":"watchface_fresh_small_black"},{"body":"tijelo_fresh_silver","strap":"remen_white","watchface":"watchface_fresh_small_silver"},{"body":"tijelo_fresh_gold","strap":"remen_pink","watchface":"watchface_fresh_small_gold"}],"setup":{"object":{"addonX":-9,"addonY":-20,"rotateXOffset":-60,"rotateYOffset":45,"rotateZOffset":40,"scale":{"x":0.0795,"y":0.0795,"z":0.0795}}}},{"nameUrl":"watch4-classic-46mm","name":"Galaxy Watch4<br/> Classic 46mm","description":"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.","buyUrl":"https://google.com","infoUrl":"https://google.com","shareUrl":"https://google.com","imageUrl":"/images/Galaxy_Watch4_Classic_46mm.png","defaults":[{"body":"tijelo_wise_black","strap":"remen_black","watchface":"watchface_wise_small_black"},{"body":"tijelo_wise_silver","strap":"remen_silver","watchface":"watchface_wise_small_silver"}],"setup":{"object":{"addonX":-9,"addonY":-20,"rotateXOffset":-60,"rotateYOffset":45,"rotateZOffset":40,"scale":{"x":0.0795,"y":0.0795,"z":0.0795}}}},{"nameUrl":"watch4-classic-42mm","name":"Galaxy Watch4<br/>Classic 42mm","description":"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.","buyUrl":"https://google.com","infoUrl":"https://google.com","shareUrl":"https://google.com","imageUrl":"/images/Galaxy_Watch4_Classic_42mm.png","defaults":[{"body":"tijelo_wise_black","strap":"remen_black","watchface":"watchface_wise_large_black"},{"body":"tijelo_wise_silver","strap":"remen_white","watchface":"watchface_wise_large_silver"}],"setup":{"object":{"addonX":-9,"addonY":-20,"rotateXOffset":-60,"rotateYOffset":45,"rotateZOffset":40,"scale":{"x":0.0795,"y":0.0795,"z":0.0795}}}}]')},HDdC:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("1OyB"),i=n("vuIU"),a=n("7o/Q"),o=n("2QA8"),s=n("gRHU"),u=n("kJWO"),l=n("KqfI");function c(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:l.a}var h=n("2fFW"),f=function(){var e=function(){function e(t){Object(r.a)(this,e),this._isScalar=!1,t&&(this._subscribe=t)}return Object(i.a)(e,[{key:"lift",value:function(t){var n=new e;return n.source=this,n.operator=t,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof a.a)return e;if(e[o.a])return e[o.a]()}return e||t||n?new a.a(e,t,n):new a.a(s.a)}(e,t,n);if(i.add(r?r.call(i,this.source):this.source||h.a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),h.a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){h.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof a.a?t:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=d(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}},r,t)})}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:u.a,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:c(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=d(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})}}]),e}();return e.create=function(t){return new e(t)},e}();function d(e){if(e||(e=h.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},I0vh:function(e,t){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},r=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var i=r;e=e.split(".");for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break e;i=i[o]}(t=t(a=i[e=e[e.length-1]]))!=a&&null!=t&&n(i,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function o(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function s(e){if(!(e instanceof Array)){e=o(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}i("Symbol",function(e){function t(e,t){this.g=e,n(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(r+(n||"")+"_"+i++,n)}}),i("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<i.length;o++){var s=r[i[o]];"function"==typeof s&&"function"!=typeof s.prototype[e]&&n(s.prototype,e,{configurable:!0,writable:!0,value:function(){return a(t(this))}})}return e});var u,l="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var c;e:{var h={};try{h.__proto__={a:!0},c=h.a;break e}catch(ut){}c=!1}u=c?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var f=u;function d(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,f)f(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.ea=t.prototype}function p(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function v(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function m(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function g(e,t,n){return e.g=n,{value:t}}function y(e){this.g=new p,this.h=e}function b(e,t,n,r){try{var i=t.call(e.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.g.l=!1,i;var a=i.value}catch(o){return e.g.i=null,m(e.g,o),_(e)}return e.g.i=null,r.call(e.g,a),_(e)}function _(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,m(e.g,n)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function x(e){this.next=function(t){return v(e.g),e.g.i?t=b(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=_(e)),t},this.throw=function(t){return v(e.g),e.g.i?t=b(e,e.g.i.throw,t,e.g.o):(m(e.g,t),t=_(e)),t},this.return=function(t){return function(e,t){v(e.g);var n=e.g.i;return n?b(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),_(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function w(e,t){return t=new x(new y(t)),f&&e.prototype&&f(t,e.prototype),t}p.prototype.o=function(e){this.h=e},p.prototype.return=function(e){this.j={return:e},this.g=this.s},i("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var a=r.setTimeout;n.prototype.i=function(e){a(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.j(r)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.m(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(n){return void this.l(n)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;a(function(){if(e.B()){var t=r.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.B=function(){if(this.o)return!1;var e=r.CustomEvent,t=r.Event,n=r.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)s.h(this.g[e]);this.g=null}};var s=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){a(n)}}:t}var i,a,o=new t(function(e,t){i=e,a=t});return this.J(r(e,i),r(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(r.h){case 1:e(r.i);break;case 2:t(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?s.h(n):this.g.push(n),this.o=!0},t.resolve=i,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=o(e),a=r.next();!a.done;a=r.next())i(a.value).J(t,n)})},t.all=function(e){var n=o(e),r=n.next();return r.done?i([]):new t(function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).J(a(o.length-1),t),r=n.next()}while(!r.done)})},t});var T="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};i("Object.assign",function(e){return e||T}),i("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),i("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}}),i("String.prototype.includes",function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}),i("Array.prototype.keys",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){return!r&&n<e.length?{value:n++,done:!1}:(r=!0,{done:!0,value:void 0})}};return i[Symbol.iterator]=function(){return i},i}(this)}});var S=this||self;function M(e,t){e=e.split(".");var n,r=S;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function O(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var E,k,A="undefined"!=typeof TextDecoder,C="undefined"!=typeof TextEncoder;function P(e){if(C)e=(k||(k=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,r=new Uint8Array(3*e.length),i=0;i<e.length;i++){var a=e.charCodeAt(i);if(128>a)r[n++]=a;else{if(2048>a)r[n++]=a>>6|192;else{if(55296<=a&&57343>=a){if(56319>=a&&i<e.length){var o=e.charCodeAt(++i);if(56320<=o&&57343>=o){r[n++]=(a=1024*(a-55296)+o-56320+65536)>>18|240,r[n++]=a>>12&63|128,r[n++]=a>>6&63|128,r[n++]=63&a|128;continue}i--}if(t)throw Error("Found an unpaired surrogate");a=65533}r[n++]=a>>12|224,r[n++]=a>>6&63|128}r[n++]=63&a|128}}e=r.subarray(0,n)}return e}var j={},L=null;function R(){if(!L){L={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));j[n]=r;for(var i=0;i<r.length;i++){var a=r[i];void 0===L[a]&&(L[a]=i)}}}}var I="function"==typeof Uint8Array;function D(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function N(e,t){if(null!=e)return Array.isArray(e)||D(e)?H(e,t):t(e)}function H(e,t){if(Array.isArray(e)){for(var n=Array(e.length),r=0;r<e.length;r++)n[r]=N(e[r],t);return Array.isArray(e)&&e.W&&F(n),n}for(r in n={},e)n[r]=N(e[r],t);return n}function G(e){switch(typeof e){case"number":return isFinite(e)?e:String(e);case"object":if(I&&null!=e&&e instanceof Uint8Array){var t;void 0===t&&(t=0),R(),t=j[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",i=0,a=0;i<e.length-2;i+=3){var o=e[i],s=e[i+1],u=e[i+2],l=t[o>>2];n[a++]=l+(o=t[(3&o)<<4|s>>4])+(s=t[(15&s)<<2|u>>6])+(u=t[63&u])}switch(l=0,u=r,e.length-i){case 2:u=t[(15&(l=e[i+1]))<<2]||r;case 1:n[a]=t[(e=e[i])>>2]+t[(3&e)<<4|l>>4]+u+r}e=n.join("")}return e;default:return e}}var B,U={W:{value:!0,configurable:!0}};function F(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,U),e}var z="function"==typeof Uint8Array.prototype.slice;function V(e,t,n){return t===n?B||(B=new Uint8Array(0)):z?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var W=0;function X(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.v=t,e&&q(this,e)}function q(e,t){e.h=function(e){if(e.constructor===Uint8Array)return e;if(e.constructor===ArrayBuffer)return new Uint8Array(e);if(e.constructor===Array)return new Uint8Array(e);if(e.constructor===String)return function(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=L[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}R();for(var r=0;;){var i=n(-1),a=n(0),o=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|a>>4),64!=o&&(t(a<<4&240|o>>2),64!=s&&t(o<<6&192|s))}}(e,function(e){r[i++]=e}),r.subarray(0,i)}(e);if(e instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(t),e.l=0,e.i=e.h.length,e.g=e.l}function K(e){e.g>e.i&&(e.j=!0)}function Y(e){var t=e.h,n=t[e.g],r=127&n;return 128>n?(e.g+=1,K(e),r):(r|=(127&(n=t[e.g+1]))<<7,128>n?(e.g+=2,K(e),r):(r|=(127&(n=t[e.g+2]))<<14,128>n?(e.g+=3,K(e),r):(r|=(127&(n=t[e.g+3]))<<21,128>n?(e.g+=4,K(e),r):(r|=(15&(n=t[e.g+4]))<<28,128>n?(e.g+=5,K(e),r>>>0):(e.g+=5,128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]?(e.j=!0,r):(K(e),r))))))}X.prototype.reset=function(){this.g=this.l};var J,Z=[];function Q(){this.g=new Uint8Array(64),this.h=0}function $(e,t){if(!(e.h+1<e.g.length)){var n=e.g;e.g=new Uint8Array(Math.ceil(1+2*e.g.length)),e.g.set(n)}e.g[e.h++]=t}function ee(e,t){for(;127<t;)$(e,127&t|128),t>>>=7;$(e,t)}function te(e){var t={},n=void 0!==t.N&&t.N;this.m={v:void 0!==t.v&&t.v},this.N=n,t=this.m,Z.length?(n=Z.pop(),t&&(n.v=t.v),e&&q(n,e),e=n):e=new X(e,t),this.g=e,this.l=this.g.g,this.h=this.j=-1,this.i=!1}function ne(e){var t=e.g;if((t=t.g==t.i)||(t=e.i)||(t=(t=e.g).j||0>t.g||t.g>t.i),t)return!1;e.l=e.g.g;var n=Y(e.g);return t=n>>>3,0<=(n&=7)&&5>=n?(e.j=t,e.h=n,!0):(e.i=!0,!1)}function re(e){switch(e.h){case 0:if(0!=e.h)re(e);else e:{for(var t=(e=e.g).g,n=0;10>n;n++){if(0==(128&e.h[t])){e.g=t+1,K(e);break e}t++}e.j=!0}break;case 1:(e=e.g).g+=8,K(e);break;case 2:2!=e.h?re(e):(t=Y(e.g),(e=e.g).g+=t,K(e));break;case 5:(e=e.g).g+=4,K(e);break;case 3:for(t=e.j;;){if(!ne(e)){e.i=!0;break}if(4==e.h){e.j!=t&&(e.i=!0);break}re(e)}break;default:e.i=!0}}function ie(e,t,n){e.N||(e=V(e.g.h,n,e.g.g),(n=t.m)?n.push(e):t.m=[e])}function ae(){this.h=[],this.i=0,this.g=new Q}function oe(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function se(e){var t=e.i+e.g.length();if(0===t)return new Uint8Array(0);t=new Uint8Array(t);for(var n=e.h,r=n.length,i=0,a=0;a<r;a++){var o=n[a];0!==o.length&&(t.set(o,i),i+=o.length)}return 0!==(r=(n=e.g).h)&&(t.set(n.g.subarray(0,r),i),n.h=0),e.h=[t],t}function ue(e,t,n){ee(e.g,8*t+2),ee(e.g,n.length),oe(e,e.g.end()),oe(e,n)}function le(e,t,n){var r=J;if(J=null,e||(e=r),r=this.constructor.ca,e||(e=r?[r]:[]),this.j=(r?0:-1)-(this.constructor.aa||0),this.i=null,this.g=e,e=(r=this.g.length)-1,r&&D(r=this.g[e])?(this.l=e-this.j,this.h=r):void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.h=null):this.l=Number.MAX_VALUE,n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(r=this.g[e+=this.j])?F(r):this.g[e]=fe:(de(this),(r=this.h[e])?F(r):this.h[e]=fe)}Q.prototype.length=function(){return this.h},Q.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,V(e,0,t)},te.prototype.reset=function(){this.g.reset(),this.h=this.j=-1};var ce,he,fe=Object.freeze(F([]));function de(e){var t=e.l+e.j;e.g[t]||(e.h=e.g[t]={})}function pe(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.h?e.h[t]:void 0:e.g[t+e.j]}function ve(e,t){var n=void 0!==n&&n,r=pe(e,t,n);return null==r&&(r=fe),r===fe&&ge(e,t,r=F([]),n),r}function me(e,t,n){return null==(e=null==(e=pe(e,t))?e:+e)?void 0===n?0:n:e}function ge(e,t,n,r){void 0!==r&&r||t>=e.l?(de(e),e.h[t]=n):e.g[t+e.j]=n}function ye(e,t,n){e.i||(e.i={});var r=e.i[n];if(!r){var i=ve(e,n);r=[];for(var a=0;a<i.length;a++)r[a]=new t(i[a]);e.i[n]=r}return r}function be(e,t,n,r,i){var a=ye(e,r,t);n=n||new r,e=ve(e,t),null!=i?(a.splice(i,0,n),e.splice(i,0,_e(n))):(a.push(n),e.push(_e(n)))}function _e(e){if(e.i)for(var t in e.i){var n=e.i[t];if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&_e(n[r]);else n&&_e(n)}return e.g}function xe(e,t){return null==(e=pe(e,t))?0:e}function we(e,t){return null==(e=pe(e,t))?"":e}function Te(e,t){if(e=e.m){oe(t,t.g.end());for(var n=0;n<e.length;n++)oe(t,e[n])}}function Se(e){var t=e[0];switch(e.length){case 2:var n=e[1];return function(e,r,i){return t(e,r,i,n)};case 3:var r=e[1],i=e[2];return function(e,n,a){return t(e,n,a,r,i)};case 4:var a=e[1],o=e[2],s=e[3];return function(e,n,r){return t(e,n,r,a,o,s)};default:throw Error("unsupported number of parameters, expected [2-4], got "+e.length)}}function Me(e,t,n){for(;ne(t)&&4!=t.h;){var r=t.j,i=n[r];if(i){if(Array.isArray(i)&&(i=n[r]=Se(i)),!i(t,e,r)){i=e;var a=(r=t).l;re(r),ie(r,i,a)}}else i=e,a=(r=t).l,re(r),ie(r,i,a)}return e}function Oe(e,t,n){if(null!=(t=pe(t,n))){ee(e.g,8*n+5),e=e.g;var r=t;0===(r=(n=0>r?1:0)?-r:r)?W=0<1/r?0:2147483648:isNaN(r)?W=2147483647:34028234663852886e22<r?W=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),W=(n<<31|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,W=(n<<31|t+127<<23|8388607&r)>>>0),$(e,(n=W)>>>0&255),$(e,n>>>8&255),$(e,n>>>16&255),$(e,n>>>24&255)}}function Ee(e,t,n){if(5!==e.h)return!1;var r=(e=e.g).h[e.g],i=e.h[e.g+1],a=e.h[e.g+2],o=e.h[e.g+3];return e.g+=4,K(e),e=2*((i=(r<<0|i<<8|a<<16|o<<24)>>>0)>>31)+1,r=i>>>23&255,i&=8388607,ge(t,n,255==r?i?NaN:1/0*e:0==r?e*Math.pow(2,-149)*i:e*Math.pow(2,r-150)*(i+Math.pow(2,23))),!0}function ke(e,t,n){if(0!==e.h)return!1;for(var r=e.g,i=128,a=0,o=e=0;4>o&&128<=i;o++)a|=(127&(i=r.h[r.g++]))<<7*o;if(128<=i&&(a|=(127&(i=r.h[r.g++]))<<28,e|=(127&i)>>4),128<=i)for(o=0;5>o&&128<=i;o++)e|=(127&(i=r.h[r.g++]))<<7*o+3;return 128>i?(r=a>>>0,(e=2147483648&(i=e>>>0))&&(i=~i>>>0,0==(r=1+~r>>>0)&&(i=i+1>>>0)),r=4294967296*i+(r>>>0),e=e?-r:r):(r.j=!0,e=void 0),ge(t,n,e),!0}function Ae(e,t,n){return 0===e.h&&(ge(t,n,Y(e.g)),!0)}function Ce(e,t,n){if(2!==e.h)return!1;var r,i=Y(e.g),a=(e=e.g).g;if(e.g+=i,K(e),e=e.h,A)(r=E)||(r=E=new TextDecoder("utf-8",{fatal:!1})),r=r.decode(e.subarray(a,a+i));else{i=a+i;for(var o,s,u,l=[],c=null;a<i;)128>(o=e[a++])?l.push(o):224>o?a>=i?l.push(65533):(s=e[a++],194>o||128!=(192&s)?(a--,l.push(65533)):l.push((31&o)<<6|63&s)):240>o?a>=i-1?l.push(65533):128!=(192&(s=e[a++]))||224===o&&160>s||237===o&&160<=s||128!=(192&(r=e[a++]))?(a--,l.push(65533)):l.push((15&o)<<12|(63&s)<<6|63&r):244>=o?a>=i-2?l.push(65533):128!=(192&(s=e[a++]))||0!=s-144+(o<<28)>>30||128!=(192&(r=e[a++]))||128!=(192&(u=e[a++]))?(a--,l.push(65533)):(o=(7&o)<<18|(63&s)<<12|(63&r)<<6|63&u,l.push(55296+((o-=65536)>>10&1023),56320+(1023&o))):l.push(65533),8192<=l.length&&(c=O(c,l),l.length=0);r=O(c,l)}return ge(t,n,r),!0}function Pe(e,t,n,r,i){if(2!==e.h)return!1;var a=new r,o=e.g.i,s=Y(e.g),u=e.g.g+s;if(e.g.i=u,i(a,e),0!=(i=u-e.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+s+" bytes, instead read "+(s-i)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.g.g=u,e.g.i=o,be(t,n,a,r,void 0),!0}function je(e,t){var n=void 0;return new(n||(n=Promise))(function(r,i){function a(e){try{s(t.next(e))}catch(n){i(n)}}function o(e){try{s(t.throw(e))}catch(n){i(n)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(a,o)}s((t=t.apply(e,void 0)).next())})}function Le(e){le.call(this,e)}function Re(e,t){return Me(e,t,ce||(ce={1:Ae,2:Ee,3:Ce,4:Ce}))}function Ie(e){le.call(this,e,-1,Ge)}function De(e){return Me(new Ie,e=new te(e),he||(he={1:[Pe,Le,Re]}))}le.prototype.toJSON=function(){return H(_e(this),G)},le.prototype.toString=function(){return _e(this).toString()},d(Le,le),d(Ie,le),Ie.prototype.addClassification=function(e,t){return be(this,1,e,Le,t),this};var Ne,He,Ge=[1];function Be(e){le.call(this,e)}function Ue(e,t){return Me(e,t,Ne||(Ne={1:Ee,2:Ee,3:Ee,4:Ee,5:Ee}))}function Fe(e){le.call(this,e,-1,We)}function ze(e){return Me(new Fe,e=new te(e),He||(He={1:[Pe,Be,Ue]}))}d(Be,le),d(Fe,le);var Ve,We=[1];function Xe(e){le.call(this,e)}function qe(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function Ke(e){return ye(e,Le,1).map(function(e){return{index:xe(e,1),score:me(e,2),label:null!=pe(e,3)?we(e,3):void 0,displayName:null!=pe(e,4)?we(e,4):void 0}})}function Ye(e){return{x:me(e,1),y:me(e,2),z:me(e,3),visibility:null!=pe(e,4)?me(e,4):void 0}}function Je(e){return e.map(function(e){return ye(ze(e),Be,1).map(Ye)})}function Ze(e,t){this.h=e,this.g=t,this.l=0}function Qe(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var r=qe(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=qe(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),a=n.createProgram();if(n.attachShader(a,r),n.attachShader(a,i),n.linkProgram(a),!n.getProgramParameter(a,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(a));r=e.m=a,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),e.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),da:i},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise(function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)}))}function $e(e){this.g=e}d(Xe,le);var et=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function tt(e,t){return t+e}function nt(e,t){window[e]=t}function rt(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||tt,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=o(Object.keys(e.options))).next();!n.done;n=t.next()){var r=e.options[n=n.value].default;void 0!==r&&(this.j[n]="function"==typeof r?r():r)}}function it(e,t){return je(e,function e(){var n,r,i=this;return w(e,function(e){return t in i.F?e.return(i.F[t]):(n=i.locateFile(t,""),r=fetch(n).then(function(e){return e.arrayBuffer()}),i.F[t]=r,e.return(r))})})}function at(e,t){for(var n=t.name||"$",r=[].concat(s(t.wants)),i=new e.h.StringList,a=o(t.wants),u=a.next();!u.done;u=a.next())i.push_back(u.value);a=e.h.PacketListener.implement({onResults:function(i){for(var a={},s=0;s<t.wants.length;++s)a[r[s]]=i.get(s);var u=e.listeners[n];u&&(e.C=function(e,t,n){return je(e,function e(){var r,i,a,s,u,l,c,h,f,d,p,v,m=this;return w(e,function(e){switch(e.g){case 1:if(!n)return e.return(t);for(r={},i=0,a=o(Object.keys(n)),s=a.next();!s.done;s=a.next())"string"!=typeof(u=n[s.value])&&"texture"===u.type&&void 0!==t[u.stream]&&++i;1<i&&(m.G=!1),l=o(Object.keys(n)),s=l.next();case 2:if(s.done){e.g=4;break}if("string"==typeof(h=n[c=s.value]))return p=r,v=c,g(e,function(e,t,n){return je(e,function e(){var r,i=this;return w(e,function(e){return"number"==typeof n||n instanceof Uint8Array||n instanceof i.h.Uint8BlobList?e.return(n):n instanceof i.h.Texture2dDataOut?((r=i.s[t])||(r=new Ze(i.h,i.D),i.s[t]=r),e.return(Qe(r,n,i.G))):e.return(void 0)})})}(m,c,t[h]),14);if(f=t[h.stream],"detection_list"===h.type){if(f){for(var y=f.getRectList(),b=f.getLandmarksList(),_=f.getClassificationsList(),x=[],T=0;T<y.size();++T){var S=y.get(T),M=new Xe;M={T:{Y:me(M=Me(M,S=new te(S),Ve||(Ve={1:Ee,2:Ee,3:Ee,4:Ee,5:Ee,6:ke})),1),Z:me(M,2),height:me(M,3),width:me(M,4),rotation:me(M,5,0),X:xe(M,6)},O:ye(ze(b.get(T)),Be,1).map(Ye),M:Ke(De(_.get(T)))},x.push(M)}y=x}else y=[];r[c]=y,e.g=7;break}if("proto_list"===h.type){if(f){for(y=Array(f.size()),b=0;b<f.size();b++)y[b]=f.get(b);f.delete()}else y=[];r[c]=y,e.g=7;break}if(void 0===f){e.g=3;break}if("float_list"===h.type){r[c]=f,e.g=7;break}if("proto"===h.type){r[c]=f,e.g=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(d=m.s[c])||(d=new Ze(m.h,m.D),m.s[c]=d),g(e,Qe(d,f,m.G),13);case 13:r[c]=e.h;case 7:h.transform&&r[c]&&(r[c]=h.transform(r[c])),e.g=3;break;case 14:p[v]=e.h;case 3:s=l.next(),e.g=2;break;case 4:return e.return(r)}})})}(e,a,t.outs).then(function(n){n=u(n);for(var i=0;i<t.wants.length;++i){var o=a[r[i]];"object"==typeof o&&o.hasOwnProperty&&o.hasOwnProperty("delete")&&o.delete()}n&&(e.C=n)}))}}),e.i.attachMultiListener(i,a),i.delete()}function ot(e){return void 0===e&&(e=0),1===e?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function st(e){var t=this;this.g=new rt({locateFile:(e=e||{}).locateFile,files:function(e){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:ot(e.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Je},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(e){return e.map(function(e){return Ke(De(e))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(e){return je(t,function t(){var n,r,i=this;return w(t,function(t){return 1==t.g?(n=ot(e),r="third_party/mediapipe/modules/hand_landmark/"+n,g(t,it(i.g,n),2)):(i.g.overrideFile(r,t.h),t.return(!0))})})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}(e=rt.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){return je(this,function e(){var t=this;return w(e,function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0})})},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var r=[],i=[],a={},s=o(Object.keys(e)),u=s.next();!u.done;a={K:a.K,L:a.L},u=s.next()){var l=u.value;l in this.j&&this.j[l]===e[l]||(this.j[l]=e[l],void 0!==(u=t[l])&&(u.onChange&&(a.K=u.onChange,a.L=e[l],r.push(function(e){return function(){return je(n,function t(){var n=this;return w(t,function(t){if(1==t.g)return g(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0})})}}(a))),u.graphOptionXref&&(l={valueNumber:1===u.type?e[l]:0,valueBoolean:0===u.type&&e[l],valueString:2===u.type?e[l]:""},u=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),u.graphOptionXref),l),i.push(u))))}0===r.length&&0===i.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(i),this.u=(void 0===this.u?[]:this.u).concat(r))}},e.initialize=function(){return je(this,function e(){var t=this;return w(e,function(e){return 1==e.g?g(e,je(t,function e(){var t,n,r,i,a,o,u,l,c,h,f,d=this;return w(e,function(e){switch(e.g){case 1:return t=d,d.R?(n=function(e,t){return void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(t):e.g.files}(d,d.j),g(e,function(){return je(this,function e(){return w(e,function(e){switch(e.g){case 1:return e.m=2,g(e,WebAssembly.instantiate(et),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}})})}(),2)):e.return();case 2:if(r=e.h,"object"==typeof window)return nt("createMediapipeSolutionsWasm",{locateFile:d.locateFile}),nt("createMediapipeSolutionsPackedAssets",{locateFile:d.locateFile}),o=n.filter(function(e){return void 0!==e.data}),u=n.filter(function(e){return void 0===e.data}),l=Promise.all(o.map(function(e){var n=it(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then(function(e){return t.overrideFile(r,e),Promise.resolve(e)})}return n})),c=Promise.all(u.map(function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise(function(e){t.addEventListener("load",function(){e()},!1),t.addEventListener("error",function(){e()},!1),document.body.appendChild(t)})}(t.locateFile(e.url,t.S)):Promise.resolve()})).then(function(){return je(t,function e(){var t,n,r=this;return w(e,function(e){if(1==e.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,g(e,t(n),2);r.h=e.h,e.g=0})})}),h=je(t,function e(){var t=this;return w(e,function(e){return t.g.graph&&t.g.graph.url?e=g(e,it(t,t.g.graph.url),0):(e.g=0,e=void 0),e})}),g(e,Promise.all([c,l,h]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return i=n.filter(function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r}).map(function(e){return t.locateFile(e.url,t.S)}),importScripts.apply(null,s(i)),g(e,createMediapipeSolutionsWasm(Module),6);case 6:d.h=e.h,d.l=new OffscreenCanvas(1,1),d.h.canvas=d.l,a=d.h.GL.createContext(d.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),d.h.GL.makeContextCurrent(a),e.g=4;break;case 7:if(d.l=document.createElement("canvas"),!(f=d.l.getContext("webgl2",{}))&&!(f=d.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),e.return();d.D=f,d.h.canvas=d.l,d.h.createContext(d.l,!0,!0,{});case 4:d.i=new d.h.SolutionWasm,d.R=!1,e.g=0}})}),2):3!=e.g?g(e,je(t,function e(){var t,n,r,i,a,s,u=this;return w(e,function(e){if(1==e.g)return u.g.graph&&u.g.graph.url&&u.P===u.g.graph.url?e.return():(u.o=!0,u.g.graph&&u.g.graph.url?(u.P=u.g.graph.url,g(e,it(u,u.g.graph.url),3)):void(e.g=2));for(2!=e.g&&u.i.loadGraph(e.h),t=o(Object.keys(u.B)),n=t.next();!n.done;n=t.next())u.i.overrideFile(r=n.value,u.B[r]);if(u.B={},u.g.listeners)for(i=o(u.g.listeners),a=i.next();!a.done;a=i.next())at(u,a.value);s=u.j,u.j={},u.setOptions(s),e.g=0})}),3):g(e,je(t,function e(){var t,n,r,i,a,s=this;return w(e,function(e){switch(e.g){case 1:if(!s.o)return e.return();if(!s.u){e.g=2;break}t=o(s.u),n=t.next();case 3:if(n.done){e.g=5;break}return g(e,(0,n.value)(),4);case 4:n=t.next(),e.g=3;break;case 5:s.u=void 0;case 2:if(s.A){for(r=new s.h.GraphOptionChangeRequestList,i=o(s.A),a=i.next();!a.done;a=i.next())r.push_back(a.value);s.i.changeOptions(r),r.delete(),s.A=void 0}s.o=!1,e.g=0}})}),0)})})},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){return je(this,function n(){var r,i,a,s,u,l,c,h,f,d=this;return w(n,function(n){switch(n.g){case 1:return d.g.inputs?(r=1e3*(null==t?performance.now():t),g(n,d.C,2)):n.return();case 2:return g(n,d.initialize(),3);case 3:for(i=new d.h.PacketDataList,a=o(Object.keys(e)),s=a.next();!s.done;s=a.next())if(l=d.g.inputs[u=s.value]){e:{var p=d,v=e[u];switch(l.type){case"video":var m=p.m[l.stream];if(m||(m=new Ze(p.h,p.D),p.m[l.stream]=m),0===(p=m).l&&(p.l=p.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&v instanceof HTMLVideoElement){var y=v.videoWidth;m=v.videoHeight}else"undefined"!=typeof HTMLImageElement&&v instanceof HTMLImageElement?(y=v.naturalWidth,m=v.naturalHeight):(y=v.width,m=v.height);m={glName:p.l,width:y,height:m},(y=p.g).canvas.width=m.width,y.canvas.height=m.height,y.activeTexture(y.TEXTURE0),p.h.bindTexture2d(p.l),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,y.RGBA,y.UNSIGNED_BYTE,v),p.h.bindTexture2d(0),p=m;break e;case"detections":for((m=p.m[l.stream])||(m=new $e(p.h),p.m[l.stream]=m),(p=m).data||(p.data=new p.g.DetectionListData),p.data.reset(v.length),m=0;m<v.length;++m){var b=p.data,_=b.setBoundingBox,x=m,w=(y=v[m]).T,T=new Xe;ge(T,1,w.Y),ge(T,2,w.Z),ge(T,3,w.height),ge(T,4,w.width),ge(T,5,w.rotation),ge(T,6,w.X);var S=w=new ae;Oe(S,T,1),Oe(S,T,2),Oe(S,T,3),Oe(S,T,4),Oe(S,T,5);var M=pe(T,6);if(null!=M&&null!=M){ee(S.g,48);var O=S.g,E=M;M=0>E;var k=(E=Math.abs(E))>>>0;for(E=Math.floor((E-k)/4294967296),E>>>=0,M&&(E=~E>>>0,4294967295<(k=1+(~k>>>0))&&(k=0,4294967295<++E&&(E=0))),M=W=k,k=E;0<k||127<M;)$(O,127&M|128),M=(M>>>7|k<<25)>>>0,k>>>=7;$(O,M)}if(Te(T,S),w=se(w),_.call(b,x,w),y.O)for(b=0;b<y.O.length;++b)S=!!(T=y.O[b]).visibility,x=(_=p.data).addNormalizedLandmark,w=m,T=Object.assign(Object.assign({},T),{visibility:S?T.visibility:0}),ge(S=new Be,1,T.x),ge(S,2,T.y),ge(S,3,T.z),T.visibility&&ge(S,4,T.visibility),Oe(O=T=new ae,S,1),Oe(O,S,2),Oe(O,S,3),Oe(O,S,4),Oe(O,S,5),Te(S,O),T=se(T),x.call(_,w,T);if(y.M)for(b=0;b<y.M.length;++b){if(x=(_=p.data).addClassification,w=m,T=y.M[b],ge(S=new Le,2,T.score),T.index&&ge(S,1,T.index),T.label&&ge(S,3,T.label),T.displayName&&ge(S,4,T.displayName),O=T=new ae,null!=(k=pe(S,1))&&null!=k)if(ee(O.g,8),M=O.g,0<=k)ee(M,k);else{for(E=0;9>E;E++)$(M,127&k|128),k>>=7;$(M,1)}Oe(O,S,2),null!=(M=pe(S,3))&&ue(O,3,P(M)),null!=(M=pe(S,4))&&ue(O,4,P(M)),Te(S,O),T=se(T),x.call(_,w,T)}}p=p.data;break e;default:p={}}}switch(c=p,h=l.stream,l.type){case"video":i.pushTexture2d(Object.assign(Object.assign({},c),{stream:h,timestamp:r}));break;case"detections":(f=c).stream=h,f.timestamp=r,i.pushDetectionList(f);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return d.i.send(i),g(n,d.C,4);case 4:i.delete(),n.g=0}})})},e.onResults=function(e,t){this.listeners[t||"$"]=e},M("Solution",rt),M("OptionType",{BOOL:0,NUMBER:1,$:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=st.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){return je(this,function e(){var t=this;return w(e,function(e){return g(e,t.g.initialize(),0)})})},e.reset=function(){this.g.reset()},e.send=function(e){return je(this,function t(){var n=this;return w(t,function(t){return g(t,n.g.send(e),0)})})},e.setOptions=function(e){this.g.setOptions(e)},M("Hands",st),M("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),M("VERSION","0.3.1634603088")}).call(this)},I55L:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},JX7q:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,"a",function(){return r})},Ji7U:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("s4An");function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.a)(e,t)}},KQm4:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("a3WO"),i=n("25BE"),a=n("BsWD");function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(i.a)(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},KqfI:function(e,t,n){"use strict";function r(){}n.d(t,"a",function(){return r})},"LK+K":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("foSv"),i=n("2WcH"),a=n("md7G");function o(e){var t=Object(i.a)();return function(){var n,i=Object(r.a)(e);if(t){var o=Object(r.a)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return Object(a.a)(this,n)}}},LRne:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("z+Ro"),i=n("yCtX"),a=n("jZKg");function o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=t[t.length-1];return Object(r.a)(o)?(t.pop(),Object(a.a)(t,o)):Object(i.a)(t)}},Lhse:function(e,t,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",function(){return i});var i=r()},NJ4a:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e},0)}n.d(t,"a",function(){return r})},ODXe:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("DSFK"),i=n("BsWD"),a=n("PYwp");function o(e,t){return Object(r.a)(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||Object(i.a)(e,t)||Object(a.a)()}},PYwp:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",function(){return r})},RMjP:function(e,t,n){"use strict";n.r(t),n.d(t,"WatchViewerModule",function(){return Xh});var r=n("ofXK"),i=n("tyNb"),a=n("mrSG"),o=n("quSY"),s=n("KQm4"),u=n("HDdC"),l=n("DH7j"),c=n("n6bG"),h=n("lJxs");function f(e,t,n,r){return Object(c.a)(n)&&(r=n,n=void 0),r?f(e,t,n).pipe(Object(h.a)(function(e){return Object(l.a)(e)?r.apply(void 0,Object(s.a)(e)):r(e)})):new u.a(function(r){d(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function d(e,t,n,r,i){var a;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var o=e;e.addEventListener(t,n,i),a=function(){return o.removeEventListener(t,n,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var s=e;e.on(t,n),a=function(){return s.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var u=e;e.addListener(t,n),a=function(){return u.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,c=e.length;l<c;l++)d(e[l],t,n,r,i)}r.add(a)}var p=n("1OyB"),v=n("vuIU"),m=n("Ji7U"),g=n("LK+K"),y=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return Object(v.a)(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){return Object(p.a)(this,n),t.call(this)}return Object(v.a)(n,[{key:"schedule",value:function(e){return this}}]),n}(o.a)),b=n("JX7q"),_=n("ReuC"),x=n("foSv"),w=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;Object(p.a)(this,e),this.SchedulerAction=t,this.now=n}return Object(v.a)(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}();return e.now=function(){return Date.now()},e}(),T=new(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w.now;return Object(p.a)(this,n),(r=t.call(this,e,function(){return n.delegate&&n.delegate!==Object(b.a)(r)?n.delegate.now():i()})).actions=[],r.active=!1,r.scheduled=void 0,r}return Object(v.a)(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):Object(_.a)(Object(x.a)(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(w))(y);function S(e){return!Object(l.a)(e)&&e-parseFloat(e)+1>=0}var M=n("z+Ro");function O(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}var E=n("7o/Q"),k=function(){function e(t,n){Object(p.a)(this,e),this.dueTime=t,this.scheduler=n}return Object(v.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new A(e,this.dueTime,this.scheduler))}}]),e}(),A=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e)).dueTime=r,a.scheduler=i,a.debouncedSubscription=null,a.lastValue=null,a.hasValue=!1,a}return Object(v.a)(n,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(C,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),n}(E.a);function C(e){e.debouncedNext()}var P=function(){function e(t,n){Object(p.a)(this,e),this.compare=t,this.keySelector=n}return Object(v.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new j(e,this.compare,this.keySelector))}}]),e}(),j=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e)).keySelector=i,a.hasKey=!1,"function"==typeof r&&(a.compare=r),a}return Object(v.a)(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(i){return this.destination.error(i)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(i){return this.destination.error(i)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}(E.a);function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:4,styles:t,timings:e}}function R(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,i)}var I=n("uFwe"),D=n("rePB"),N=n("ODXe"),H=n("md7G");function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}for(var B,U=n("o0o1"),F=n.n(U),z=100,V=301,W=302,X=306,q=1e3,K=1001,Y=1002,J=1003,Z=1004,Q=1005,$=1006,ee=1008,te=1009,ne=1012,re=1014,ie=1015,ae=1016,oe=1020,se=1022,ue=1023,le=1026,ce=1027,he=2300,fe=2301,de=2302,pe=2400,ve=2401,me=2402,ge=2500,ye=2501,be=3e3,_e=3001,xe=3007,we=3002,Te=7680,Se=35044,Me=35048,Oe="300 es",Ee=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,[{key:"addEventListener",value:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}},{key:"hasEventListener",value:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}},{key:"removeEventListener",value:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e);e.target=null}}}}]),e}(),ke=1234567,Ae=Math.PI/180,Ce=180/Math.PI,Pe=[],je=0;je<256;je++)Pe[je]=(je<16?"0":"")+je.toString(16);var Le="undefined"!=typeof crypto&&"randomUUID"in crypto;function Re(){if(Le)return crypto.randomUUID().toUpperCase();var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Pe[255&e]+Pe[e>>8&255]+Pe[e>>16&255]+Pe[e>>24&255]+"-"+Pe[255&t]+Pe[t>>8&255]+"-"+Pe[t>>16&15|64]+Pe[t>>24&255]+"-"+Pe[63&n|128]+Pe[n>>8&255]+"-"+Pe[n>>16&255]+Pe[n>>24&255]+Pe[255&r]+Pe[r>>8&255]+Pe[r>>16&255]+Pe[r>>24&255]).toUpperCase()}function Ie(e,t,n){return Math.max(t,Math.min(n,e))}function De(e,t){return(e%t+t)%t}function Ne(e,t,n){return(1-n)*e+n*t}function He(e){return 0==(e&e-1)&&0!==e}function Ge(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Be(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}var Ue=Object.freeze({__proto__:null,DEG2RAD:Ae,RAD2DEG:Ce,generateUUID:Re,clamp:Ie,euclideanModulo:De,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Ne,damp:function(e,t,n,r){return Ne(e,t,1-Math.exp(-n*r))},pingpong:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(De(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return void 0!==e&&(ke=e%2147483647),((ke=16807*ke%2147483647)-1)/2147483646},degToRad:function(e){return e*Ae},radToDeg:function(e){return e*Ce},isPowerOfTwo:He,ceilPowerOfTwo:Ge,floorPowerOfTwo:Be,setQuaternionFromProperEuler:function(e,t,n,r,i){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),l=a((t+r)/2),c=o((t+r)/2),h=a((t-r)/2),f=o((t-r)/2),d=a((r-t)/2),p=o((r-t)/2);switch(i){case"XYX":e.set(s*c,u*h,u*f,s*l);break;case"YZY":e.set(u*f,s*c,u*h,s*l);break;case"ZXZ":e.set(u*h,u*f,s*c,s*l);break;case"XZX":e.set(s*c,u*p,u*d,s*l);break;case"YXY":e.set(u*d,s*c,u*p,s*l);break;case"ZYZ":e.set(u*p,u*d,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}}),Fe=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(p.a)(this,t),this.x=e,this.y=n}return Object(v.a)(t,[{key:"width",get:function(){return this.x},set:function(e){this.x=e}},{key:"height",get:function(){return this.y},set:function(e){this.y=e}},{key:"set",value:function(e,t){return this.x=e,this.y=t,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"cross",value:function(e){return this.x*e.y-this.y*e.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}},{key:"rotateAround",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:e,value:F.a.mark(function e(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:case"end":return e.stop()}},e,this)})}]),t}(Symbol.iterator);Fe.prototype.isVector2=!0;var ze,Ve=function(){function e(){Object(p.a)(this,e),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return Object(v.a)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}},{key:"multiply",value:function(e){return this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],d=n[8],p=r[0],v=r[3],m=r[6],g=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=a*p+o*g+s*_,i[3]=a*v+o*y+s*x,i[6]=a*m+o*b+s*w,i[1]=u*p+l*g+c*_,i[4]=u*v+l*y+c*x,i[7]=u*m+l*b+c*w,i[2]=h*p+f*g+d*_,i[5]=h*v+f*y+d*x,i[8]=h*m+f*b+d*w,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=l*a-o*u,h=o*s-l*i,f=u*i-a*s,d=t*c+n*h+r*f;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var p=1/d;return e[0]=c*p,e[1]=(r*u-l*n)*p,e[2]=(o*n-r*a)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-o*t)*p,e[6]=f*p,e[7]=(n*s-u*t)*p,e[8]=(a*t-n*i)*p,this}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}},{key:"getNormalMatrix",value:function(e){return this.setFromMatrix4(e).invert().transpose()}},{key:"transposeIntoArray",value:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}},{key:"setUvTransform",value:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);return this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1),this}},{key:"scale",value:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*u,r[6]=t*o+n*l,r[1]=-n*i+t*s,r[4]=-n*a+t*u,r[7]=-n*o+t*l,this}},{key:"translate",value:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),e}();function We(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function Xe(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}Ve.prototype.isMatrix3=!0,Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;var qe=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"getDataURL",value:function(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;var t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ze&&(ze=Xe("canvas")),ze.width=e.width,ze.height=e.height;var n=ze.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ze}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}]),e}(),Ke=0,Ye=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:K,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ee,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ue,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:te,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:be;return Object(p.a)(this,n),e=t.call(this),Object.defineProperty(Object(b.a)(e),"id",{value:Ke++}),e.uuid=Re(),e.name="",e.image=r,e.mipmaps=[],e.mapping=i,e.wrapS=a,e.wrapT=o,e.magFilter=s,e.minFilter=u,e.anisotropy=h,e.format=l,e.internalFormat=null,e.type=c,e.offset=new Fe(0,0),e.repeat=new Fe(1,1),e.center=new Fe(0,0),e.rotation=0,e.matrixAutoUpdate=!0,e.matrix=new Ve,e.generateMipmaps=!0,e.premultiplyAlpha=!1,e.flipY=!0,e.unpackAlignment=4,e.encoding=f,e.version=0,e.onUpdate=null,e.isRenderTargetTexture=!1,e}return Object(v.a)(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Re()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)i.push(Je(r[a].isDataTexture?r[a].image:r[a]))}else i=Je(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case q:e.x=e.x-Math.floor(e.x);break;case K:e.x=e.x<0?0:1;break;case Y:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case q:e.y=e.y-Math.floor(e.y);break;case K:e.y=e.y<0?0:1;break;case Y:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Ee);function Je(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?qe.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Ye.DEFAULT_IMAGE=void 0,Ye.DEFAULT_MAPPING=300,Ye.prototype.isTexture=!0;var Ze=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(p.a)(this,t),this.x=e,this.y=n,this.z=r,this.w=i}return Object(v.a)(t,[{key:"width",get:function(){return this.z},set:function(e){this.z=e}},{key:"height",get:function(){return this.w},set:function(e){this.w=e}},{key:"set",value:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setW",value:function(e){return this.w=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}},{key:"multiply",value:function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"setAxisAngleFromQuaternion",value:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}},{key:"setAxisAngleFromRotationMatrix",value:function(e){var t,n,r,i,a=.01,o=.1,s=e.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],d=s[9],p=s[2],v=s[6],m=s[10];if(Math.abs(l-h)<a&&Math.abs(c-p)<a&&Math.abs(d-v)<a){if(Math.abs(l+h)<o&&Math.abs(c+p)<o&&Math.abs(d+v)<o&&Math.abs(u+f+m-3)<o)return this.set(1,0,0,0),this;t=Math.PI;var g=(u+1)/2,y=(f+1)/2,b=(m+1)/2,_=(l+h)/4,x=(c+p)/4,w=(d+v)/4;return g>y&&g>b?g<a?(n=0,r=.707106781,i=.707106781):(r=_/(n=Math.sqrt(g)),i=x/n):y>b?y<a?(n=.707106781,r=0,i=.707106781):(n=_/(r=Math.sqrt(y)),i=w/r):b<a?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(b)),r=w/i),this.set(n,r,i,t),this}var T=Math.sqrt((v-d)*(v-d)+(c-p)*(c-p)+(h-l)*(h-l));return Math.abs(T)<.001&&(T=1),this.x=(v-d)/T,this.y=(c-p)/T,this.z=(h-l)/T,this.w=Math.acos((u+f+m-1)/2),this}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:e,value:F.a.mark(function e(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:return e.next=8,this.w;case 8:case"end":return e.stop()}},e,this)})}]),t}(Symbol.iterator);Ze.prototype.isVector4=!0;var Qe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(p.a)(this,n),(i=t.call(this)).width=e,i.height=r,i.depth=1,i.scissor=new Ze(0,0,e,r),i.scissorTest=!1,i.viewport=new Ze(0,0,e,r),i.texture=new Ye(void 0,a.mapping,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),i.texture.isRenderTargetTexture=!0,i.texture.image={width:e,height:r,depth:1},i.texture.generateMipmaps=void 0!==a.generateMipmaps&&a.generateMipmaps,i.texture.internalFormat=void 0!==a.internalFormat?a.internalFormat:null,i.texture.minFilter=void 0!==a.minFilter?a.minFilter:$,i.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,i.stencilBuffer=void 0!==a.stencilBuffer&&a.stencilBuffer,i.depthTexture=void 0!==a.depthTexture?a.depthTexture:null,i}return Object(v.a)(n,[{key:"setTexture",value:function(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}},{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach(function(t){Object(D.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},this.texture.image),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Ee);Qe.prototype.isWebGLRenderTarget=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){var a;Object(p.a)(this,n);var o=(a=t.call(this,e,r)).texture;a.texture=[];for(var s=0;s<i;s++)a.texture[s]=o.clone();return a}return Object(v.a)(n,[{key:"setSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(var r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}},{key:"copy",value:function(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(var t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}]),n}(Qe).prototype.isWebGLMultipleRenderTargets=!0;var $e=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e,r,i)).samples=4,a}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.samples=e.samples,this}}]),n}(Qe);$e.prototype.isWebGLMultisampleRenderTarget=!0;var et=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(p.a)(this,e),this._x=t,this._y=n,this._z=r,this._w=i}return Object(v.a)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e._order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),h=s(n/2),f=s(r/2),d=s(i/2);switch(a){case"XYZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"YXZ":this._x=h*l*c+u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"ZXY":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c-h*f*d;break;case"ZYX":this._x=h*l*c-u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c+h*f*d;break;case"YZX":this._x=h*l*c+u*f*d,this._y=u*f*c+h*l*d,this._z=u*l*d-h*f*c,this._w=u*l*c-h*f*d;break;case"XZY":this._x=h*l*c-u*f*d,this._y=u*f*c-h*l*d,this._z=u*l*d+h*f*c,this._w=u*l*c+h*f*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=e.elements,n=t[0],r=t[4],i=t[8],a=t[1],o=t[5],s=t[9],u=t[2],l=t[6],c=t[10],h=n+o+c;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(l-s)*f,this._y=(i-u)*f,this._z=(a-r)*f}else if(n>o&&n>c){var d=2*Math.sqrt(1+n-o-c);this._w=(l-s)/d,this._x=.25*d,this._y=(r+a)/d,this._z=(i+u)/d}else if(o>c){var p=2*Math.sqrt(1+o-n-c);this._w=(i-u)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+l)/p}else{var v=2*Math.sqrt(1+c-n-o);this._w=(a-r)/v,this._x=(i+u)/v,this._y=(s+l)/v,this._z=.25*v}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(e,t){var n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(e){return 2*Math.acos(Math.abs(Ie(this.dot(e),-1,1)))}},{key:"rotateTowards",value:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(this._x=this._x*(e=1/e),this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}},{key:"premultiply",value:function(e){return this.multiplyQuaternions(e,this)}},{key:"multiplyQuaternions",value:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this._onChangeCallback(),this}},{key:"slerp",value:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-t;return this._w=u*a+t*this._w,this._x=u*n+t*this._x,this._y=u*r+t*this._y,this._z=u*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,o),h=Math.sin((1-t)*c)/l,f=Math.sin(t*c)/l;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(e,t,n){this.copy(e).slerp(t,n)}},{key:"random",value:function(){var e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}},{key:"fromBufferAttribute",value:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(e,t,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}},{key:"slerpFlat",value:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[a+0],f=i[a+1],d=i[a+2],p=i[a+3];if(0===o)return e[t+0]=s,e[t+1]=u,e[t+2]=l,void(e[t+3]=c);if(1===o)return e[t+0]=h,e[t+1]=f,e[t+2]=d,void(e[t+3]=p);if(c!==p||s!==h||u!==f||l!==d){var v=1-o,m=s*h+u*f+l*d+c*p,g=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,m*g);v=Math.sin(v*_)/b,o=Math.sin(o*_)/b}var x=o*g;if(s=s*v+h*x,u=u*v+f*x,l=l*v+d*x,c=c*v+p*x,v===1-o){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}},{key:"multiplyQuaternionsFlat",value:function(e,t,n,r,i,a){var o=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[a],h=i[a+1],f=i[a+2],d=i[a+3];return e[t]=o*d+l*c+s*f-u*h,e[t+1]=s*d+l*h+u*c-o*f,e[t+2]=u*d+l*f+o*h-s*c,e[t+3]=l*d-o*c-s*h-u*f,e}}]),e}();et.prototype.isQuaternion=!0;var tt=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(p.a)(this,t),this.x=e,this.y=n,this.z=r}return Object(v.a)(t,[{key:"set",value:function(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}},{key:"setScalar",value:function(e){return this.x=e,this.y=e,this.z=e,this}},{key:"setX",value:function(e){return this.x=e,this}},{key:"setY",value:function(e){return this.y=e,this}},{key:"setZ",value:function(e){return this.z=e,this}},{key:"setComponent",value:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}},{key:"getComponent",value:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}},{key:"add",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}},{key:"addScalar",value:function(e){return this.x+=e,this.y+=e,this.z+=e,this}},{key:"addVectors",value:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}},{key:"addScaledVector",value:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}},{key:"sub",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}},{key:"subScalar",value:function(e){return this.x-=e,this.y-=e,this.z-=e,this}},{key:"subVectors",value:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}},{key:"multiplyScalar",value:function(e){return this.x*=e,this.y*=e,this.z*=e,this}},{key:"multiplyVectors",value:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}},{key:"applyEuler",value:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(rt.setFromEuler(e))}},{key:"applyAxisAngle",value:function(e,t){return this.applyQuaternion(rt.setFromAxisAngle(e,t))}},{key:"applyMatrix3",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}},{key:"applyNormalMatrix",value:function(e){return this.applyMatrix3(e).normalize()}},{key:"applyMatrix4",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this}},{key:"applyQuaternion",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,h=-i*t-a*n-o*r;return this.x=u*s+h*-i+l*-o-c*-a,this.y=l*s+h*-a+c*-i-u*-o,this.z=c*s+h*-o+u*-a-l*-i,this}},{key:"project",value:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}},{key:"unproject",value:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}},{key:"transformDirection",value:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}},{key:"divide",value:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}},{key:"divideScalar",value:function(e){return this.multiplyScalar(1/e)}},{key:"min",value:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}},{key:"max",value:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}},{key:"clamp",value:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}},{key:"clampScalar",value:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}},{key:"clampLength",value:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(e){return this.normalize().multiplyScalar(e)}},{key:"lerp",value:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}},{key:"lerpVectors",value:function(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}},{key:"cross",value:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}},{key:"crossVectors",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}},{key:"projectOnVector",value:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}},{key:"projectOnPlane",value:function(e){return nt.copy(this).projectOnVector(e),this.sub(nt)}},{key:"reflect",value:function(e){return this.sub(nt.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(Ie(n,-1,1))}},{key:"distanceTo",value:function(e){return Math.sqrt(this.distanceToSquared(e))}},{key:"distanceToSquared",value:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}},{key:"manhattanDistanceTo",value:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}},{key:"setFromSpherical",value:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}},{key:"setFromSphericalCoords",value:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}},{key:"setFromCylindricalCoords",value:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}},{key:"setFromMatrixPosition",value:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}},{key:"setFromMatrixScale",value:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(e,t){return this.fromArray(e.elements,4*t)}},{key:"setFromMatrix3Column",value:function(e,t){return this.fromArray(e.elements,3*t)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}},{key:"fromBufferAttribute",value:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(e,2));return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}},{key:e,value:F.a.mark(function e(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.x;case 2:return e.next=4,this.y;case 4:return e.next=6,this.z;case 6:case"end":return e.stop()}},e,this)})}]),t}(Symbol.iterator);tt.prototype.isVector3=!0;var nt=new tt,rt=new et,it=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt(-1/0,-1/0,-1/0);Object(p.a)(this,e),this.min=t,this.max=n}return Object(v.a)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromArray",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],h=e[s+2];l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromBufferAttribute",value:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),h=e.getZ(s);l<t&&(t=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>a&&(a=c),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=ot.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"setFromObject",value:function(e){return this.makeEmpty(),this.expandByObject(e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"expandByObject",value:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),st.copy(t.boundingBox),st.applyMatrix4(e.matrixWorld),this.union(st));for(var n=e.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}},{key:"intersectsSphere",value:function(e){return this.clampPoint(e.center,ot),ot.distanceToSquared(e.center)<=e.radius*e.radius}},{key:"intersectsPlane",value:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}},{key:"intersectsTriangle",value:function(e){if(this.isEmpty())return!1;this.getCenter(pt),vt.subVectors(this.max,pt),ut.subVectors(e.a,pt),lt.subVectors(e.b,pt),ct.subVectors(e.c,pt),ht.subVectors(lt,ut),ft.subVectors(ct,lt),dt.subVectors(ut,ct);var t=[0,-ht.z,ht.y,0,-ft.z,ft.y,0,-dt.z,dt.y,ht.z,0,-ht.x,ft.z,0,-ft.x,dt.z,0,-dt.x,-ht.y,ht.x,0,-ft.y,ft.x,0,-dt.y,dt.x,0];return!!yt(t,ut,lt,ct,vt)&&!!yt(t=[1,0,0,0,1,0,0,0,1],ut,lt,ct,vt)&&(mt.crossVectors(ht,ft),yt(t=[mt.x,mt.y,mt.z],ut,lt,ct,vt))}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return ot.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"getBoundingSphere",value:function(e){return this.getCenter(e.center),e.radius=.5*this.getSize(ot).length(),e}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"applyMatrix4",value:function(e){return this.isEmpty()||(at[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),at[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),at[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),at[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),at[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),at[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),at[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),at[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(at)),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();it.prototype.isBox3=!0;var at=[new tt,new tt,new tt,new tt,new tt,new tt,new tt,new tt],ot=new tt,st=new it,ut=new tt,lt=new tt,ct=new tt,ht=new tt,ft=new tt,dt=new tt,pt=new tt,vt=new tt,mt=new tt,gt=new tt;function yt(e,t,n,r,i){for(var a=0,o=e.length-3;a<=o;a+=3){gt.fromArray(e,a);var s=i.x*Math.abs(gt.x)+i.y*Math.abs(gt.y)+i.z*Math.abs(gt.z),u=t.dot(gt),l=n.dot(gt),c=r.dot(gt);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}var bt=new it,_t=new tt,xt=new tt,wt=new tt,Tt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Object(p.a)(this,e),this.center=t,this.radius=n}return Object(v.a)(e,[{key:"set",value:function(e,t){return this.center.copy(e),this.radius=t,this}},{key:"setFromPoints",value:function(e,t){var n=this.center;void 0!==t?n.copy(t):bt.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(e){return this.center.copy(e.center),this.radius=e.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(e){return e.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}},{key:"intersectsBox",value:function(e){return e.intersectsSphere(this)}},{key:"intersectsPlane",value:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(e,t){var n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}},{key:"getBoundingBox",value:function(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}},{key:"applyMatrix4",value:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}},{key:"translate",value:function(e){return this.center.add(e),this}},{key:"expandByPoint",value:function(e){wt.subVectors(e,this.center);var t=wt.lengthSq();if(t>this.radius*this.radius){var n=Math.sqrt(t),r=.5*(n-this.radius);this.center.add(wt.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(e){return xt.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(_t.copy(e.center).add(xt)),this.expandByPoint(_t.copy(e.center).sub(xt)),this}},{key:"equals",value:function(e){return e.center.equals(this.center)&&e.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),St=new tt,Mt=new tt,Ot=new tt,Et=new tt,kt=new tt,At=new tt,Ct=new tt,Pt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt(0,0,-1);Object(p.a)(this,e),this.origin=t,this.direction=n}return Object(v.a)(e,[{key:"set",value:function(e,t){return this.origin.copy(e),this.direction.copy(t),this}},{key:"copy",value:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}},{key:"at",value:function(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}},{key:"lookAt",value:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this}},{key:"recast",value:function(e){return this.origin.copy(this.at(e,St)),this}},{key:"closestPointToPoint",value:function(e,t){t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(e){return Math.sqrt(this.distanceSqToPoint(e))}},{key:"distanceSqToPoint",value:function(e){var t=St.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(St.copy(this.direction).multiplyScalar(t).add(this.origin),St.distanceToSquared(e))}},{key:"distanceSqToSegment",value:function(e,t,n,r){Mt.copy(e).add(t).multiplyScalar(.5),Ot.copy(t).sub(e).normalize(),Et.copy(this.origin).sub(Mt);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot(Ot),c=Et.dot(this.direction),h=-Et.dot(Ot),f=Et.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*c-h,s=u*d,(i=l*h-c)>=0)if(a>=-s)if(a<=s){var p=1/d;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*h)+f}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+f):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(Ot).multiplyScalar(a).add(Mt),o}},{key:"intersectSphere",value:function(e,t){St.subVectors(e.center,this.origin);var n=St.dot(this.direction),r=St.dot(St)-n*n,i=e.radius*e.radius;if(r>i)return null;var a=Math.sqrt(i-r),o=n-a,s=n+a;return o<0&&s<0?null:this.at(o<0?s:o,t)}},{key:"intersectsSphere",value:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}},{key:"distanceToPlane",value:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}},{key:"intersectPlane",value:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}},{key:"intersectsPlane",value:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}},{key:"intersectBox",value:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(n=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),l>=0?(i=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),c>=0?(o=(e.min.z-h.z)*c,s=(e.max.z-h.z)*c):(o=(e.max.z-h.z)*c,s=(e.min.z-h.z)*c),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}},{key:"intersectsBox",value:function(e){return null!==this.intersectBox(e,St)}},{key:"intersectTriangle",value:function(e,t,n,r,i){kt.subVectors(t,e),At.subVectors(n,e),Ct.crossVectors(kt,At);var a,o=this.direction.dot(Ct);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Et.subVectors(this.origin,e);var s=a*this.direction.dot(At.crossVectors(Et,At));if(s<0)return null;var u=a*this.direction.dot(kt.cross(Et));if(u<0)return null;if(s+u>o)return null;var l=-a*Et.dot(Ct);return l<0?null:this.at(l/o,i)}},{key:"applyMatrix4",value:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}},{key:"equals",value:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),jt=function(){function e(){Object(p.a)(this,e),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return Object(v.a)(e,[{key:"set",value:function(e,t,n,r,i,a,o,s,u,l,c,h,f,d,p,v){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=h,m[3]=f,m[7]=d,m[11]=p,m[15]=v,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new e).fromArray(this.elements)}},{key:"copy",value:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}},{key:"copyPosition",value:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}},{key:"setFromMatrix3",value:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(e){var t=this.elements,n=e.elements,r=1/Lt.setFromMatrixColumn(e,0).length(),i=1/Lt.setFromMatrixColumn(e,1).length(),a=1/Lt.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromEuler",value:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var h=a*l,f=a*c,d=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=f+d*u,t[5]=h-p*u,t[9]=-o*s,t[2]=p-h*u,t[6]=d+f*u,t[10]=a*s}else if("YXZ"===e.order){var v=s*l,m=s*c,g=u*l,y=u*c;t[0]=v+y*o,t[4]=g*o-m,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=m*o-g,t[6]=y+v*o,t[10]=a*s}else if("ZXY"===e.order){var b=s*l,_=s*c,x=u*l,w=u*c;t[0]=b-w*o,t[4]=-a*c,t[8]=x+_*o,t[1]=_+x*o,t[5]=a*l,t[9]=w-b*o,t[2]=-a*u,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){var T=a*l,S=a*c,M=o*l,O=o*c;t[0]=s*l,t[4]=M*u-S,t[8]=T*u+O,t[1]=s*c,t[5]=O*u+T,t[9]=S*u-M,t[2]=-u,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var E=a*s,k=a*u,A=o*s,C=o*u;t[0]=s*l,t[4]=C-E*c,t[8]=A*c+k,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=k*c+A,t[10]=E-C*c}else if("XZY"===e.order){var P=a*s,j=a*u,L=o*s,R=o*u;t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=P*c+R,t[5]=a*l,t[9]=j*c-L,t[2]=L*c-j,t[6]=o*l,t[10]=R*c+P}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(e){return this.compose(It,e,Dt)}},{key:"lookAt",value:function(e,t,n){var r=this.elements;return Gt.subVectors(e,t),0===Gt.lengthSq()&&(Gt.z=1),Gt.normalize(),Nt.crossVectors(n,Gt),0===Nt.lengthSq()&&(1===Math.abs(n.z)?Gt.x+=1e-4:Gt.z+=1e-4,Gt.normalize(),Nt.crossVectors(n,Gt)),Nt.normalize(),Ht.crossVectors(Gt,Nt),r[0]=Nt.x,r[4]=Ht.x,r[8]=Gt.x,r[1]=Nt.y,r[5]=Ht.y,r[9]=Gt.y,r[2]=Nt.z,r[6]=Ht.z,r[10]=Gt.z,this}},{key:"multiply",value:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}},{key:"premultiply",value:function(e){return this.multiplyMatrices(e,this)}},{key:"multiplyMatrices",value:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],d=n[2],p=n[6],v=n[10],m=n[14],g=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],T=r[8],S=r[12],M=r[1],O=r[5],E=r[9],k=r[13],A=r[2],C=r[6],P=r[10],j=r[14],L=r[3],R=r[7],I=r[11],D=r[15];return i[0]=a*x+o*M+s*A+u*L,i[4]=a*w+o*O+s*C+u*R,i[8]=a*T+o*E+s*P+u*I,i[12]=a*S+o*k+s*j+u*D,i[1]=l*x+c*M+h*A+f*L,i[5]=l*w+c*O+h*C+f*R,i[9]=l*T+c*E+h*P+f*I,i[13]=l*S+c*k+h*j+f*D,i[2]=d*x+p*M+v*A+m*L,i[6]=d*w+p*O+v*C+m*R,i[10]=d*T+p*E+v*P+m*I,i[14]=d*S+p*k+v*j+m*D,i[3]=g*x+y*M+b*A+_*L,i[7]=g*w+y*O+b*C+_*R,i[11]=g*T+y*E+b*P+_*I,i[15]=g*S+y*k+b*j+_*D,this}},{key:"multiplyScalar",value:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}},{key:"determinant",value:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],h=e[10],f=e[14];return e[3]*(+i*s*c-r*u*c-i*o*h+n*u*h+r*o*f-n*s*f)+e[7]*(+t*s*f-t*u*h+i*a*h-r*a*f+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*f-i*a*c+n*a*f+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*h+r*a*c-n*a*h+n*s*l)}},{key:"transpose",value:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}},{key:"setPosition",value:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}},{key:"invert",value:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],h=e[10],f=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=c*v*u-p*h*u+p*s*f-o*v*f-c*s*m+o*h*m,y=d*h*u-l*v*u-d*s*f+a*v*f+l*s*m-a*h*m,b=l*p*u-d*c*u+d*o*f-a*p*f-l*o*m+a*c*m,_=d*c*s-l*p*s-d*o*h+a*p*h+l*o*v-a*c*v,x=t*g+n*y+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var w=1/x;return e[0]=g*w,e[1]=(p*h*i-c*v*i-p*r*f+n*v*f+c*r*m-n*h*m)*w,e[2]=(o*v*i-p*s*i+p*r*u-n*v*u-o*r*m+n*s*m)*w,e[3]=(c*s*i-o*h*i-c*r*u+n*h*u+o*r*f-n*s*f)*w,e[4]=y*w,e[5]=(l*v*i-d*h*i+d*r*f-t*v*f-l*r*m+t*h*m)*w,e[6]=(d*s*i-a*v*i-d*r*u+t*v*u+a*r*m-t*s*m)*w,e[7]=(a*h*i-l*s*i+l*r*u-t*h*u-a*r*f+t*s*f)*w,e[8]=b*w,e[9]=(d*c*i-l*p*i-d*n*f+t*p*f+l*n*m-t*c*m)*w,e[10]=(a*p*i-d*o*i+d*n*u-t*p*u-a*n*m+t*o*m)*w,e[11]=(l*o*i-a*c*i-l*n*u+t*c*u+a*n*f-t*o*f)*w,e[12]=_*w,e[13]=(l*p*r-d*c*r+d*n*h-t*p*h-l*n*v+t*c*v)*w,e[14]=(d*o*r-a*p*r-d*n*s+t*p*s+a*n*v-t*o*v)*w,e[15]=(a*c*r-l*o*r+l*n*s-t*c*s-a*n*h+t*o*h)*w,this}},{key:"scale",value:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}},{key:"getMaxScaleOnAxis",value:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}},{key:"makeTranslation",value:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}},{key:"makeRotationY",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(e,t,n,r,i,a){return this.set(1,n,i,0,e,1,a,0,t,r,1,0,0,0,0,1),this}},{key:"compose",value:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,h=i*u,f=i*l,d=i*c,p=a*l,v=a*c,m=o*c,g=s*u,y=s*l,b=s*c,_=n.x,x=n.y,w=n.z;return r[0]=(1-(p+m))*_,r[1]=(f+b)*_,r[2]=(d-y)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+m))*x,r[6]=(v+g)*x,r[7]=0,r[8]=(d+y)*w,r[9]=(v-g)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}},{key:"decompose",value:function(e,t,n){var r=this.elements,i=Lt.set(r[0],r[1],r[2]).length(),a=Lt.set(r[4],r[5],r[6]).length(),o=Lt.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Rt.copy(this);var s=1/i,u=1/a,l=1/o;return Rt.elements[0]*=s,Rt.elements[1]*=s,Rt.elements[2]*=s,Rt.elements[4]*=u,Rt.elements[5]*=u,Rt.elements[6]*=u,Rt.elements[8]*=l,Rt.elements[9]*=l,Rt.elements[10]*=l,t.setFromRotationMatrix(Rt),n.x=i,n.y=a,n.z=o,this}},{key:"makePerspective",value:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(n-r),u=(t+e)/(t-e),l=(n+r)/(n-r),c=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=2*i/(t-e),o[4]=0,o[8]=u,o[12]=0,o[1]=0,o[5]=s,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=c,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}},{key:"makeOrthographic",value:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),l=1/(a-i),c=(t+e)*s,h=(n+r)*u,f=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}},{key:"equals",value:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=e[n+t];return this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}]),e}();jt.prototype.isMatrix4=!0;var Lt=new tt,Rt=new jt,It=new tt(0,0,0),Dt=new tt(1,1,1),Nt=new tt,Ht=new tt,Gt=new tt,Bt=new jt,Ut=new et,Ft=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;Object(p.a)(this,e),this._x=t,this._y=n,this._z=r,this._order=i}return Object(v.a)(e,[{key:"x",get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},{key:"set",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.elements,i=r[0],a=r[4],o=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin(Ie(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,f),this._z=Math.atan2(-a,i)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ie(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(s,u)):(this._y=Math.atan2(-c,i),this._z=0);break;case"ZXY":this._x=Math.asin(Ie(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Ie(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(h,f),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Ie(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,u),this._y=Math.atan2(-c,i)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-Ie(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(e,t,n){return Bt.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Bt,t,n)}},{key:"setFromVector3",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}},{key:"reorder",value:function(e){return Ut.setFromEuler(this),this.setFromQuaternion(Ut,e)}},{key:"equals",value:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}},{key:"fromArray",value:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}},{key:"toVector3",value:function(e){return e?e.set(this._x,this._y,this._z):new tt(this._x,this._y,this._z)}},{key:"_onChange",value:function(e){return this._onChangeCallback=e,this}},{key:"_onChangeCallback",value:function(){}}]),e}();Ft.prototype.isEuler=!0,Ft.DefaultOrder="XYZ",Ft.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var zt=function(){function e(){Object(p.a)(this,e),this.mask=1}return Object(v.a)(e,[{key:"set",value:function(e){this.mask=1<<e|0}},{key:"enable",value:function(e){this.mask|=1<<e|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(e){this.mask^=1<<e|0}},{key:"disable",value:function(e){this.mask&=~(1<<e|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(e){return 0!=(this.mask&e.mask)}}]),e}(),Vt=0,Wt=new tt,Xt=new et,qt=new jt,Kt=new tt,Yt=new tt,Jt=new tt,Zt=new et,Qt=new tt(1,0,0),$t=new tt(0,1,0),en=new tt(0,0,1),tn={type:"added"},nn={type:"removed"},rn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(p.a)(this,n),e=t.call(this),Object.defineProperty(Object(b.a)(e),"id",{value:Vt++}),e.uuid=Re(),e.name="",e.type="Object3D",e.parent=null,e.children=[],e.up=n.DefaultUp.clone();var r=new tt,i=new Ft,a=new et,o=new tt(1,1,1);return i._onChange(function(){a.setFromEuler(i,!1)}),a._onChange(function(){i.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(Object(b.a)(e),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:a},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new jt},normalMatrix:{value:new Ve}}),e.matrix=new jt,e.matrixWorld=new jt,e.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,e.matrixWorldNeedsUpdate=!1,e.layers=new zt,e.visible=!0,e.castShadow=!1,e.receiveShadow=!1,e.frustumCulled=!0,e.renderOrder=0,e.animations=[],e.userData={},e}return Object(v.a)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(e){return this.quaternion.premultiply(e),this}},{key:"setRotationFromAxisAngle",value:function(e,t){this.quaternion.setFromAxisAngle(e,t)}},{key:"setRotationFromEuler",value:function(e){this.quaternion.setFromEuler(e,!0)}},{key:"setRotationFromMatrix",value:function(e){this.quaternion.setFromRotationMatrix(e)}},{key:"setRotationFromQuaternion",value:function(e){this.quaternion.copy(e)}},{key:"rotateOnAxis",value:function(e,t){return Xt.setFromAxisAngle(e,t),this.quaternion.multiply(Xt),this}},{key:"rotateOnWorldAxis",value:function(e,t){return Xt.setFromAxisAngle(e,t),this.quaternion.premultiply(Xt),this}},{key:"rotateX",value:function(e){return this.rotateOnAxis(Qt,e)}},{key:"rotateY",value:function(e){return this.rotateOnAxis($t,e)}},{key:"rotateZ",value:function(e){return this.rotateOnAxis(en,e)}},{key:"translateOnAxis",value:function(e,t){return Wt.copy(e).applyQuaternion(this.quaternion),this.position.add(Wt.multiplyScalar(t)),this}},{key:"translateX",value:function(e){return this.translateOnAxis(Qt,e)}},{key:"translateY",value:function(e){return this.translateOnAxis($t,e)}},{key:"translateZ",value:function(e){return this.translateOnAxis(en,e)}},{key:"localToWorld",value:function(e){return e.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(e){return e.applyMatrix4(qt.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(e,t,n){e.isVector3?Kt.copy(e):Kt.set(e,t,n);var r=this.parent;this.updateWorldMatrix(!0,!1),Yt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?qt.lookAt(Yt,Kt,this.up):qt.lookAt(Kt,Yt,this.up),this.quaternion.setFromRotationMatrix(qt),r&&(qt.extractRotation(r.matrixWorld),Xt.setFromRotationMatrix(qt),this.quaternion.premultiply(Xt.invert()))}},{key:"add",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(tn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}},{key:"remove",value:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(nn)),this}},{key:"removeFromParent",value:function(){var e=this.parent;return null!==e&&e.remove(this),this}},{key:"clear",value:function(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.parent=null,t.dispatchEvent(nn)}return this.children.length=0,this}},{key:"attach",value:function(e){return this.updateWorldMatrix(!0,!1),qt.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),qt.multiply(e.parent.matrixWorld)),e.applyMatrix4(qt),this.add(e),e.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(e){return this.getObjectByProperty("id",e)}},{key:"getObjectByName",value:function(e){return this.getObjectByProperty("name",e)}},{key:"getObjectByProperty",value:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}},{key:"getWorldPosition",value:function(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yt,e,Jt),e}},{key:"getWorldScale",value:function(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yt,Zt,e),e}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)}},{key:"traverseVisible",value:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}}},{key:"traverseAncestors",value:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}},{key:"updateWorldMatrix",value:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++)i(e.shapes,o[s]);else i(e.shapes,o)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var l=[],c=0,h=this.material.length;c<h;c++)l.push(i(e.materials,this.material[c]));r.material=l}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(var f=0;f<this.children.length;f++)r.children.push(this.children[f].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(var d=0;d<this.animations.length;d++)r.animations.push(i(e.animations,this.animations[d]))}if(t){var p=x(e.geometries),v=x(e.materials),m=x(e.textures),g=x(e.images),y=x(e.shapes),b=x(e.skeletons),_=x(e.animations);p.length>0&&(n.geometries=p),v.length>0&&(n.materials=v),m.length>0&&(n.textures=m),g.length>0&&(n.images=g),y.length>0&&(n.shapes=y),b.length>0&&(n.skeletons=b),_.length>0&&(n.animations=_)}return n.object=r,n;function x(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}}},{key:"clone",value:function(e){return(new this.constructor).copy(this,e)}},{key:"copy",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}]),n}(Ee);rn.DefaultUp=new tt(0,1,0),rn.DefaultMatrixAutoUpdate=!0,rn.prototype.isObject3D=!0;var an=new tt,on=new tt,sn=new tt,un=new tt,ln=new tt,cn=new tt,hn=new tt,fn=new tt,dn=new tt,pn=new tt,vn=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new tt;Object(p.a)(this,e),this.a=t,this.b=n,this.c=r}return Object(v.a)(e,[{key:"set",value:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}},{key:"setFromAttributeAndIndices",value:function(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}},{key:"getArea",value:function(){return an.subVectors(this.c,this.b),on.subVectors(this.a,this.b),.5*an.cross(on).length()}},{key:"getMidpoint",value:function(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(t){return e.getNormal(this.a,this.b,this.c,t)}},{key:"getPlane",value:function(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(t,n){return e.getBarycoord(t,this.a,this.b,this.c,n)}},{key:"getUV",value:function(t,n,r,i,a){return e.getUV(t,this.a,this.b,this.c,n,r,i,a)}},{key:"containsPoint",value:function(t){return e.containsPoint(t,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(t){return e.isFrontFacing(this.a,this.b,this.c,t)}},{key:"intersectsBox",value:function(e){return e.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(e,t){var n,r,i=this.a,a=this.b,o=this.c;ln.subVectors(a,i),cn.subVectors(o,i),fn.subVectors(e,i);var s=ln.dot(fn),u=cn.dot(fn);if(s<=0&&u<=0)return t.copy(i);dn.subVectors(e,a);var l=ln.dot(dn),c=cn.dot(dn);if(l>=0&&c<=l)return t.copy(a);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(ln,n);pn.subVectors(e,o);var f=ln.dot(pn),d=cn.dot(pn);if(d>=0&&f<=d)return t.copy(o);var p=f*u-s*d;if(p<=0&&u>=0&&d<=0)return r=u/(u-d),t.copy(i).addScaledVector(cn,r);var v=l*d-f*c;if(v<=0&&c-l>=0&&f-d>=0)return hn.subVectors(o,a),r=(c-l)/(c-l+(f-d)),t.copy(a).addScaledVector(hn,r);var m=1/(v+p+h);return n=p*m,r=h*m,t.copy(i).addScaledVector(ln,n).addScaledVector(cn,r)}},{key:"equals",value:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}],[{key:"getNormal",value:function(e,t,n,r){r.subVectors(n,t),an.subVectors(e,t),r.cross(an);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}},{key:"getBarycoord",value:function(e,t,n,r,i){an.subVectors(r,t),on.subVectors(n,t),sn.subVectors(e,t);var a=an.dot(an),o=an.dot(on),s=an.dot(sn),u=on.dot(on),l=on.dot(sn),c=a*u-o*o;if(0===c)return i.set(-2,-1,-1);var h=1/c,f=(u*s-o*l)*h,d=(a*l-o*s)*h;return i.set(1-f-d,d,f)}},{key:"containsPoint",value:function(e,t,n,r){return this.getBarycoord(e,t,n,r,un),un.x>=0&&un.y>=0&&un.x+un.y<=1}},{key:"getUV",value:function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,un),s.set(0,0),s.addScaledVector(i,un.x),s.addScaledVector(a,un.y),s.addScaledVector(o,un.z),s}},{key:"isFrontFacing",value:function(e,t,n,r){return an.subVectors(n,t),on.subVectors(e,t),an.cross(on).dot(r)<0}}]),e}(),mn=0,gn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),e=t.call(this),Object.defineProperty(Object(b.a)(e),"id",{value:mn++}),e.uuid=Re(),e.name="",e.type="Material",e.fog=!0,e.blending=1,e.side=0,e.vertexColors=!1,e.opacity=1,e.format=ue,e.transparent=!1,e.blendSrc=204,e.blendDst=205,e.blendEquation=z,e.blendSrcAlpha=null,e.blendDstAlpha=null,e.blendEquationAlpha=null,e.depthFunc=3,e.depthTest=!0,e.depthWrite=!0,e.stencilWriteMask=255,e.stencilFunc=519,e.stencilRef=0,e.stencilFuncMask=255,e.stencilFail=Te,e.stencilZFail=Te,e.stencilZPass=Te,e.stencilWrite=!1,e.clippingPlanes=null,e.clipIntersection=!1,e.clipShadows=!1,e.shadowSide=null,e.colorWrite=!0,e.precision=null,e.polygonOffset=!1,e.polygonOffsetFactor=0,e.polygonOffsetUnits=0,e.dithering=!1,e.alphaToCoverage=!1,e.premultipliedAlpha=!1,e.visible=!0,e.toneMapped=!0,e.userData={},e.version=0,e._alphaTest=0,e}return Object(v.a)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}}},{key:"toJSON",value:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(n.sheenTint=this.sheenTint.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(n.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(n.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(n.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==ue&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}}]),n}(Ee);gn.prototype.isMaterial=!0;var yn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bn={h:0,s:0,l:0},_n={h:0,s:0,l:0};function xn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function wn(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function Tn(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}var Sn=function(){function e(t,n,r){return Object(p.a)(this,e),void 0===n&&void 0===r?this.set(t):this.setRGB(t,n,r)}return Object(v.a)(e,[{key:"set",value:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}},{key:"setScalar",value:function(e){return this.r=e,this.g=e,this.b=e,this}},{key:"setHex",value:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}},{key:"setRGB",value:function(e,t,n){return this.r=e,this.g=t,this.b=n,this}},{key:"setHSL",value:function(e,t,n){if(e=De(e,1),t=Ie(t,0,1),n=Ie(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=xn(i,r,e+1/3),this.g=xn(i,r,e),this.b=xn(i,r,e-1/3)}return this}},{key:"setStyle",value:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){var r,i=n[2];switch(n[1]){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){var a=parseFloat(r[1])/360,o=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(a,o,s)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){var u=n[1],l=u.length;if(3===l)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}},{key:"setColorName",value:function(e){var t=yn[e.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}},{key:"copyGammaToLinear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}},{key:"copyLinearToGamma",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}},{key:"convertGammaToLinear",value:function(e){return this.copyGammaToLinear(this,e),this}},{key:"convertLinearToGamma",value:function(e){return this.copyLinearToGamma(this,e),this}},{key:"copySRGBToLinear",value:function(e){return this.r=wn(e.r),this.g=wn(e.g),this.b=wn(e.b),this}},{key:"copyLinearToSRGB",value:function(e){return this.r=Tn(e.r),this.g=Tn(e.g),this.b=Tn(e.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(e){var t,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),u=(s+o)/2;if(s===o)t=0,n=0;else{var l=o-s;switch(n=u<=.5?l/(o+s):l/(2-o-s),o){case r:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-r)/l+2;break;case a:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(e,t,n){return this.getHSL(bn),bn.h+=e,bn.s+=t,bn.l+=n,this.setHSL(bn.h,bn.s,bn.l),this}},{key:"add",value:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}},{key:"addColors",value:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}},{key:"addScalar",value:function(e){return this.r+=e,this.g+=e,this.b+=e,this}},{key:"sub",value:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}},{key:"multiply",value:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}},{key:"multiplyScalar",value:function(e){return this.r*=e,this.g*=e,this.b*=e,this}},{key:"lerp",value:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}},{key:"lerpColors",value:function(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}},{key:"lerpHSL",value:function(e,t){this.getHSL(bn),e.getHSL(_n);var n=Ne(bn.h,_n.h,t),r=Ne(bn.s,_n.s,t),i=Ne(bn.l,_n.l,t);return this.setHSL(n,r,i),this}},{key:"equals",value:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}},{key:"fromArray",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}},{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}},{key:"fromBufferAttribute",value:function(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),e}();Sn.NAMES=yn,Sn.prototype.isColor=!0,Sn.prototype.r=1,Sn.prototype.g=1,Sn.prototype.b=1;var Mn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="MeshBasicMaterial",r.color=new Sn(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(gn);Mn.prototype.isMeshBasicMaterial=!0;var On=new tt,En=new Fe,kn=function(){function e(t,n,r){if(Object(p.a)(this,e),Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=n,this.count=void 0!==t?t.length/n:0,this.normalized=!0===r,this.usage=Se,this.updateRange={offset:0,count:-1},this.version=0}return Object(v.a)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"copyArray",value:function(e){return this.array.set(e),this}},{key:"copyColorsArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Sn),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this}},{key:"copyVector2sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Fe),t[n++]=a.x,t[n++]=a.y}return this}},{key:"copyVector3sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new tt),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this}},{key:"copyVector4sArray",value:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Ze),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this}},{key:"applyMatrix3",value:function(e){if(2===this.itemSize)for(var t=0,n=this.count;t<n;t++)En.fromBufferAttribute(this,t),En.applyMatrix3(e),this.setXY(t,En.x,En.y);else if(3===this.itemSize)for(var r=0,i=this.count;r<i;r++)On.fromBufferAttribute(this,r),On.applyMatrix3(e),this.setXYZ(r,On.x,On.y,On.z);return this}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.count;t<n;t++)On.x=this.getX(t),On.y=this.getY(t),On.z=this.getZ(t),On.applyMatrix4(e),this.setXYZ(t,On.x,On.y,On.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)On.x=this.getX(t),On.y=this.getY(t),On.z=this.getZ(t),On.applyNormalMatrix(e),this.setXYZ(t,On.x,On.y,On.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)On.x=this.getX(t),On.y=this.getY(t),On.z=this.getZ(t),On.transformDirection(e),this.setXYZ(t,On.x,On.y,On.z);return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"getX",value:function(e){return this.array[e*this.itemSize]}},{key:"setX",value:function(e,t){return this.array[e*this.itemSize]=t,this}},{key:"getY",value:function(e){return this.array[e*this.itemSize+1]}},{key:"setY",value:function(e,t){return this.array[e*this.itemSize+1]=t,this}},{key:"getZ",value:function(e){return this.array[e*this.itemSize+2]}},{key:"setZ",value:function(e,t){return this.array[e*this.itemSize+2]=t,this}},{key:"getW",value:function(e){return this.array[e*this.itemSize+3]}},{key:"setW",value:function(e,t){return this.array[e*this.itemSize+3]=t,this}},{key:"setXY",value:function(e,t,n){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return this.array[0+(e*=this.itemSize)]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Se&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}]),e}();kn.prototype.isBufferAttribute=!0;var An=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){return Object(p.a)(this,n),t.call(this,new Uint16Array(e),r,i)}return n}(kn),Cn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){return Object(p.a)(this,n),t.call(this,new Uint32Array(e),r,i)}return n}(kn);(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){return Object(p.a)(this,n),t.call(this,new Uint16Array(e),r,i)}return n})(kn).prototype.isFloat16BufferAttribute=!0;var Pn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){return Object(p.a)(this,n),t.call(this,new Float32Array(e),r,i)}return n}(kn),jn=0,Ln=new jt,Rn=new rn,In=new tt,Dn=new it,Nn=new it,Hn=new tt,Gn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),e=t.call(this),Object.defineProperty(Object(b.a)(e),"id",{value:jn++}),e.uuid=Re(),e.name="",e.type="BufferGeometry",e.index=null,e.attributes={},e.morphAttributes={},e.morphTargetsRelative=!1,e.groups=[],e.boundingBox=null,e.boundingSphere=null,e.drawRange={start:0,count:1/0},e.userData={},e}return Object(v.a)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(e){return this.index=Array.isArray(e)?new(We(e)>65535?Cn:An)(e,1):e,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"setAttribute",value:function(e,t){return this.attributes[e]=t,this}},{key:"deleteAttribute",value:function(e){return delete this.attributes[e],this}},{key:"hasAttribute",value:function(e){return void 0!==this.attributes[e]}},{key:"addGroup",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(e,t){this.drawRange.start=e,this.drawRange.count=t}},{key:"applyMatrix4",value:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Ve).getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(e){return Ln.makeRotationFromQuaternion(e),this.applyMatrix4(Ln),this}},{key:"rotateX",value:function(e){return Ln.makeRotationX(e),this.applyMatrix4(Ln),this}},{key:"rotateY",value:function(e){return Ln.makeRotationY(e),this.applyMatrix4(Ln),this}},{key:"rotateZ",value:function(e){return Ln.makeRotationZ(e),this.applyMatrix4(Ln),this}},{key:"translate",value:function(e,t,n){return Ln.makeTranslation(e,t,n),this.applyMatrix4(Ln),this}},{key:"scale",value:function(e,t,n){return Ln.makeScale(e,t,n),this.applyMatrix4(Ln),this}},{key:"lookAt",value:function(e){return Rn.lookAt(e),Rn.updateMatrix(),this.applyMatrix4(Rn.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(In).negate(),this.translate(In.x,In.y,In.z),this}},{key:"setFromPoints",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Pn(t,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new it);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new tt(-1/0,-1/0,-1/0),new tt(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var n=0,r=t.length;n<r;n++)Dn.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(Hn.addVectors(this.boundingBox.min,Dn.min),this.boundingBox.expandByPoint(Hn),Hn.addVectors(this.boundingBox.max,Dn.max),this.boundingBox.expandByPoint(Hn)):(this.boundingBox.expandByPoint(Dn.min),this.boundingBox.expandByPoint(Dn.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new Tt);var e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new tt,1/0);if(e){var n=this.boundingSphere.center;if(Dn.setFromBufferAttribute(e),t)for(var r=0,i=t.length;r<i;r++)Nn.setFromBufferAttribute(t[r]),this.morphTargetsRelative?(Hn.addVectors(Dn.min,Nn.min),Dn.expandByPoint(Hn),Hn.addVectors(Dn.max,Nn.max),Dn.expandByPoint(Hn)):(Dn.expandByPoint(Nn.min),Dn.expandByPoint(Nn.max));Dn.getCenter(n);for(var a=0,o=0,s=e.count;o<s;o++)Hn.fromBufferAttribute(e,o),a=Math.max(a,n.distanceToSquared(Hn));if(t)for(var u=0,l=t.length;u<l;u++)for(var c=t[u],h=this.morphTargetsRelative,f=0,d=c.count;f<d;f++)Hn.fromBufferAttribute(c,f),h&&(In.fromBufferAttribute(e,f),Hn.add(In)),a=Math.max(a,n.distanceToSquared(Hn));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var e=this.index,t=this.attributes;if(null!==e&&void 0!==t.position&&void 0!==t.normal&&void 0!==t.uv){var n=e.array,r=t.position.array,i=t.normal.array,a=t.uv.array,o=r.length/3;void 0===t.tangent&&this.setAttribute("tangent",new kn(new Float32Array(4*o),4));for(var s=t.tangent.array,u=[],l=[],c=0;c<o;c++)u[c]=new tt,l[c]=new tt;var h=new tt,f=new tt,d=new tt,p=new Fe,v=new Fe,m=new Fe,g=new tt,y=new tt,b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(var _=0,x=b.length;_<x;++_)for(var w=b[_],T=w.start,S=T,M=T+w.count;S<M;S+=3)D(n[S+0],n[S+1],n[S+2]);for(var O=new tt,E=new tt,k=new tt,A=new tt,C=0,P=b.length;C<P;++C)for(var j=b[C],L=j.start,R=L,I=L+j.count;R<I;R+=3)N(n[R+0]),N(n[R+1]),N(n[R+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function D(e,t,n){h.fromArray(r,3*e),f.fromArray(r,3*t),d.fromArray(r,3*n),p.fromArray(a,2*e),v.fromArray(a,2*t),m.fromArray(a,2*n),f.sub(h),d.sub(h),v.sub(p),m.sub(p);var i=1/(v.x*m.y-m.x*v.y);isFinite(i)&&(g.copy(f).multiplyScalar(m.y).addScaledVector(d,-v.y).multiplyScalar(i),y.copy(d).multiplyScalar(v.x).addScaledVector(f,-m.x).multiplyScalar(i),u[e].add(g),u[t].add(g),u[n].add(g),l[e].add(y),l[t].add(y),l[n].add(y))}function N(e){k.fromArray(i,3*e),A.copy(k);var t=u[e];O.copy(t),O.sub(k.multiplyScalar(k.dot(t))).normalize(),E.crossVectors(A,t);var n=E.dot(l[e])<0?-1:1;s[4*e]=O.x,s[4*e+1]=O.y,s[4*e+2]=O.z,s[4*e+3]=n}}},{key:"computeVertexNormals",value:function(){var e=this.index,t=this.getAttribute("position");if(void 0!==t){var n=this.getAttribute("normal");if(void 0===n)n=new kn(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(var r=0,i=n.count;r<i;r++)n.setXYZ(r,0,0,0);var a=new tt,o=new tt,s=new tt,u=new tt,l=new tt,c=new tt,h=new tt,f=new tt;if(e)for(var d=0,p=e.count;d<p;d+=3){var v=e.getX(d+0),m=e.getX(d+1),g=e.getX(d+2);a.fromBufferAttribute(t,v),o.fromBufferAttribute(t,m),s.fromBufferAttribute(t,g),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,m),c.fromBufferAttribute(n,g),u.add(h),l.add(h),c.add(h),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(m,l.x,l.y,l.z),n.setXYZ(g,c.x,c.y,c.z)}else for(var y=0,b=t.count;y<b;y+=3)a.fromBufferAttribute(t,y+0),o.fromBufferAttribute(t,y+1),s.fromBufferAttribute(t,y+2),h.subVectors(s,o),f.subVectors(a,o),h.cross(f),n.setXYZ(y+0,h.x,h.y,h.z),n.setXYZ(y+1,h.x,h.y,h.z),n.setXYZ(y+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=a.itemSize*t,u=Math.min(o.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=o[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)}},{key:"normalizeNormals",value:function(){for(var e=this.attributes.normal,t=0,n=e.count;t<n;t++)Hn.fromBufferAttribute(e,t),Hn.normalize(),e.setXYZ(t,Hn.x,Hn.y,Hn.z)}},{key:"toNonIndexed",value:function(){function e(e,t){for(var n=e.array,r=e.itemSize,i=e.normalized,a=new n.constructor(t.length*r),o=0,s=0,u=0,l=t.length;u<l;u++){o=e.isInterleavedBufferAttribute?t[u]*e.data.stride+e.offset:t[u]*r;for(var c=0;c<r;c++)a[s++]=n[o++]}return new kn(a,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var t=new n,r=this.index.array,i=this.attributes;for(var a in i){var o=e(i[a],r);t.setAttribute(a,o)}var s=this.morphAttributes;for(var u in s){for(var l=[],c=s[u],h=0,f=c.length;h<f;h++){var d=e(c[h],r);l.push(d)}t.morphAttributes[u]=l}t.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,v=0,m=p.length;v<m;v++){var g=p[v];t.addGroup(g.start,g.count,g.materialIndex)}return t}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;null!==r&&(e.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var a in i)e.data.attributes[a]=i[a].toJSON(e.data);var o={},s=!1;for(var u in this.morphAttributes){for(var l=this.morphAttributes[u],c=[],h=0,f=l.length;h<f;h++)c.push(l[h].toJSON(e.data));c.length>0&&(o[u]=c,s=!0)}s&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);var d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));var p=this.boundingSphere;return null!==p&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var t={};this.name=e.name;var n=e.index;null!==n&&this.setIndex(n.clone(t));var r=e.attributes;for(var i in r)this.setAttribute(i,r[i].clone(t));var a=e.morphAttributes;for(var o in a){for(var s=[],u=a[o],l=0,c=u.length;l<c;l++)s.push(u[l].clone(t));this.morphAttributes[o]=s}this.morphTargetsRelative=e.morphTargetsRelative;for(var h=e.groups,f=0,d=h.length;f<d;f++){var p=h[f];this.addGroup(p.start,p.count,p.materialIndex)}var v=e.boundingBox;null!==v&&(this.boundingBox=v.clone());var m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Ee);Gn.prototype.isBufferGeometry=!0;var Bn=new jt,Un=new Pt,Fn=new Tt,zn=new tt,Vn=new tt,Wn=new tt,Xn=new tt,qn=new tt,Kn=new tt,Yn=new tt,Jn=new tt,Zn=new tt,Qn=new Fe,$n=new Fe,er=new Fe,tr=new tt,nr=new tt,rr=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gn,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mn;return Object(p.a)(this,n),(e=t.call(this)).type="Mesh",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(e,t){var n,r=this.geometry,i=this.material,a=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Fn.copy(r.boundingSphere),Fn.applyMatrix4(a),!1!==e.ray.intersectsSphere(Fn)&&(Bn.copy(a).invert(),Un.copy(e.ray).applyMatrix4(Bn),null===r.boundingBox||!1!==Un.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var o=r.index,s=r.attributes.position,u=r.morphAttributes.position,l=r.morphTargetsRelative,c=r.attributes.uv,h=r.attributes.uv2,f=r.groups,d=r.drawRange;if(null!==o)if(Array.isArray(i))for(var p=0,v=f.length;p<v;p++)for(var m=f[p],g=i[m.materialIndex],y=Math.max(m.start,d.start),b=Math.min(o.count,Math.min(m.start+m.count,d.start+d.count));y<b;y+=3){var _=o.getX(y),x=o.getX(y+1),w=o.getX(y+2);(n=ir(this,g,e,Un,s,u,l,c,h,_,x,w))&&(n.faceIndex=Math.floor(y/3),n.face.materialIndex=m.materialIndex,t.push(n))}else for(var T=Math.max(0,d.start),S=Math.min(o.count,d.start+d.count);T<S;T+=3){var M=o.getX(T),O=o.getX(T+1),E=o.getX(T+2);(n=ir(this,i,e,Un,s,u,l,c,h,M,O,E))&&(n.faceIndex=Math.floor(T/3),t.push(n))}else if(void 0!==s)if(Array.isArray(i))for(var k=0,A=f.length;k<A;k++)for(var C=f[k],P=i[C.materialIndex],j=Math.max(C.start,d.start),L=Math.min(s.count,Math.min(C.start+C.count,d.start+d.count));j<L;j+=3)(n=ir(this,P,e,Un,s,u,l,c,h,j,j+1,j+2))&&(n.faceIndex=Math.floor(j/3),n.face.materialIndex=C.materialIndex,t.push(n));else for(var R=Math.max(0,d.start),I=Math.min(s.count,d.start+d.count);R<I;R+=3)(n=ir(this,i,e,Un,s,u,l,c,h,R,R+1,R+2))&&(n.faceIndex=Math.floor(R/3),t.push(n))}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(rn);function ir(e,t,n,r,i,a,o,s,u,l,c,h){zn.fromBufferAttribute(i,l),Vn.fromBufferAttribute(i,c),Wn.fromBufferAttribute(i,h);var f=e.morphTargetInfluences;if(a&&f){Yn.set(0,0,0),Jn.set(0,0,0),Zn.set(0,0,0);for(var d=0,p=a.length;d<p;d++){var v=f[d],m=a[d];0!==v&&(Xn.fromBufferAttribute(m,l),qn.fromBufferAttribute(m,c),Kn.fromBufferAttribute(m,h),o?(Yn.addScaledVector(Xn,v),Jn.addScaledVector(qn,v),Zn.addScaledVector(Kn,v)):(Yn.addScaledVector(Xn.sub(zn),v),Jn.addScaledVector(qn.sub(Vn),v),Zn.addScaledVector(Kn.sub(Wn),v)))}zn.add(Yn),Vn.add(Jn),Wn.add(Zn)}e.isSkinnedMesh&&(e.boneTransform(l,zn),e.boneTransform(c,Vn),e.boneTransform(h,Wn));var g=function(e,t,n,r,i,a,o,s){if(null===(1===t.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,2!==t.side,s)))return null;nr.copy(s),nr.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(nr);return u<n.near||u>n.far?null:{distance:u,point:nr.clone(),object:e}}(e,t,n,r,zn,Vn,Wn,tr);if(g){s&&(Qn.fromBufferAttribute(s,l),$n.fromBufferAttribute(s,c),er.fromBufferAttribute(s,h),g.uv=vn.getUV(tr,zn,Vn,Wn,Qn,$n,er,new Fe)),u&&(Qn.fromBufferAttribute(u,l),$n.fromBufferAttribute(u,c),er.fromBufferAttribute(u,h),g.uv2=vn.getUV(tr,zn,Vn,Wn,Qn,$n,er,new Fe));var y={a:l,b:c,c:h,normal:new tt,materialIndex:0};vn.getNormal(zn,Vn,Wn,y.normal),g.face=y}return g}rr.prototype.isMesh=!0;var ar=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Object(p.a)(this,n),(e=t.call(this)).type="BoxGeometry",e.parameters={width:r,height:i,depth:a,widthSegments:o,heightSegments:s,depthSegments:u};var l=Object(b.a)(e);o=Math.floor(o),s=Math.floor(s),u=Math.floor(u);var c=[],h=[],f=[],d=[],v=0,m=0;function g(e,t,n,r,i,a,o,s,u,p,g){for(var y=a/u,b=o/p,_=a/2,x=o/2,w=s/2,T=u+1,S=p+1,M=0,O=0,E=new tt,k=0;k<S;k++)for(var A=k*b-x,C=0;C<T;C++)E[e]=(C*y-_)*r,E[t]=A*i,E[n]=w,h.push(E.x,E.y,E.z),E[e]=0,E[t]=0,E[n]=s>0?1:-1,f.push(E.x,E.y,E.z),d.push(C/u),d.push(1-k/p),M+=1;for(var P=0;P<p;P++)for(var j=0;j<u;j++){var L=v+j+T*(P+1),R=v+(j+1)+T*(P+1),I=v+(j+1)+T*P;c.push(v+j+T*P,L,I),c.push(L,R,I),O+=6}l.addGroup(m,O,g),m+=O,v+=M}return g("z","y","x",-1,-1,a,i,r,u,s,0),g("z","y","x",1,-1,a,i,-r,u,s,1),g("x","z","y",1,1,r,a,i,o,u,2),g("x","z","y",1,-1,r,a,-i,o,u,3),g("x","y","z",1,-1,r,i,a,o,s,4),g("x","y","z",-1,-1,r,i,-a,o,s,5),e.setIndex(c),e.setAttribute("position",new Pn(h,3)),e.setAttribute("normal",new Pn(f,3)),e.setAttribute("uv",new Pn(d,2)),e}return Object(v.a)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}]),n}(Gn);function or(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];t[n][r]=i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.clone():Array.isArray(i)?i.slice():i}return t}function sr(e){for(var t={},n=0;n<e.length;n++){var r=or(e[n]);for(var i in r)t[i]=r[i]}return t}var ur={clone:or,merge:sr},lr=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(e)),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=or(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}},{key:"toJSON",value:function(e){var t=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this,e);for(var r in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){var i=this.uniforms[r].value;t.uniforms[r]=i&&i.isTexture?{type:"t",value:i.toJSON(e).uuid}:i&&i.isColor?{type:"c",value:i.getHex()}:i&&i.isVector2?{type:"v2",value:i.toArray()}:i&&i.isVector3?{type:"v3",value:i.toArray()}:i&&i.isVector4?{type:"v4",value:i.toArray()}:i&&i.isMatrix3?{type:"m3",value:i.toArray()}:i&&i.isMatrix4?{type:"m4",value:i.toArray()}:{value:i}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var a={};for(var o in this.extensions)!0===this.extensions[o]&&(a[o]=!0);return Object.keys(a).length>0&&(t.extensions=a),t}}]),n}(gn);lr.prototype.isShaderMaterial=!0;var cr=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).type="Camera",e.matrixWorldInverse=new jt,e.projectionMatrix=new jt,e.projectionMatrixInverse=new jt,e}return Object(v.a)(n,[{key:"copy",value:function(e,t){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(e){this.updateWorldMatrix(!0,!1);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}},{key:"updateMatrixWorld",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"updateMatrixWorld",this).call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(e,t){Object(_.a)(Object(x.a)(n.prototype),"updateWorldMatrix",this).call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(rn);cr.prototype.isCamera=!0;var hr=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return Object(p.a)(this,n),(e=t.call(this)).type="PerspectiveCamera",e.fov=r,e.zoom=1,e.near=a,e.far=o,e.focus=10,e.aspect=i,e.view=null,e.filmGauge=35,e.filmOffset=0,e.updateProjectionMatrix(),e}return Object(v.a)(n,[{key:"copy",value:function(e,t){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}},{key:"setFocalLength",value:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Ce*Math.atan(t),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var e=Math.tan(.5*Ae*this.fov);return.5*this.getFilmHeight()/e}},{key:"getEffectiveFOV",value:function(){return 2*Ce*Math.atan(Math.tan(.5*Ae*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=this.near,t=e*Math.tan(.5*Ae*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}]),n}(cr);hr.prototype.isPerspectiveCamera=!0;var fr=90,dr=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){var a;if(Object(p.a)(this,n),(a=t.call(this)).type="CubeCamera",!0!==i.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),Object(H.a)(a);a.renderTarget=i;var o=new hr(fr,1,e,r);o.layers=a.layers,o.up.set(0,-1,0),o.lookAt(new tt(1,0,0)),a.add(o);var s=new hr(fr,1,e,r);s.layers=a.layers,s.up.set(0,-1,0),s.lookAt(new tt(-1,0,0)),a.add(s);var u=new hr(fr,1,e,r);u.layers=a.layers,u.up.set(0,0,1),u.lookAt(new tt(0,1,0)),a.add(u);var l=new hr(fr,1,e,r);l.layers=a.layers,l.up.set(0,0,-1),l.lookAt(new tt(0,-1,0)),a.add(l);var c=new hr(fr,1,e,r);c.layers=a.layers,c.up.set(0,-1,0),c.lookAt(new tt(0,0,1)),a.add(c);var h=new hr(fr,1,e,r);return h.layers=a.layers,h.up.set(0,-1,0),h.lookAt(new tt(0,0,-1)),a.add(h),a}return Object(v.a)(n,[{key:"update",value:function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=Object(N.a)(this.children,6),i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=e.xr.enabled,h=e.getRenderTarget();e.xr.enabled=!1;var f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,a),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=f,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(h),e.xr.enabled=c}}]),n}(rn),pr=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a,o,s,u,l,c,h){var f;return Object(p.a)(this,n),(f=t.call(this,e=void 0!==e?e:[],r=void 0!==r?r:V,i,a,o,s,u,l,c,h)).flipY=!1,f}return Object(v.a)(n,[{key:"images",get:function(){return this.image},set:function(e){this.image=e}}]),n}(Ye);pr.prototype.isCubeTexture=!0;var vr=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),Number.isInteger(r)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),r=i),(a=t.call(this,e,e,r)).texture=new pr(void 0,(r=r||{}).mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),a.texture.isRenderTargetTexture=!0,a.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,a.texture.minFilter=void 0!==r.minFilter?r.minFilter:$,a.texture._needsFlipEnvMap=!1,a}return Object(v.a)(n,[{key:"fromEquirectangularTexture",value:function(e,t){this.texture.type=t.type,this.texture.format=ue,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;var n=new ar(5,5,5),r=new lr({name:"CubemapFromEquirect",uniforms:or({tEquirect:{value:null}}),vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",side:1,blending:0});r.uniforms.tEquirect.value=t;var i=new rr(n,r),a=t.minFilter;return t.minFilter===ee&&(t.minFilter=$),new dr(1,10,this).update(e,i),t.minFilter=a,i.geometry.dispose(),i.material.dispose(),this}},{key:"clear",value:function(e,t,n,r){for(var i=e.getRenderTarget(),a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(i)}}]),n}(Qe);vr.prototype.isWebGLCubeRenderTarget=!0;var mr=new tt,gr=new tt,yr=new Ve,br=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(p.a)(this,e),this.normal=t,this.constant=n}return Object(v.a)(e,[{key:"set",value:function(e,t){return this.normal.copy(e),this.constant=t,this}},{key:"setComponents",value:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(e,t,n){var r=mr.subVectors(n,t).cross(gr.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}},{key:"copy",value:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this}},{key:"normalize",value:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(e){return this.normal.dot(e)+this.constant}},{key:"distanceToSphere",value:function(e){return this.distanceToPoint(e.center)-e.radius}},{key:"projectPoint",value:function(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}},{key:"intersectLine",value:function(e,t){var n=e.delta(mr),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;var i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}},{key:"intersectsLine",value:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}},{key:"intersectsBox",value:function(e){return e.intersectsPlane(this)}},{key:"intersectsSphere",value:function(e){return e.intersectsPlane(this)}},{key:"coplanarPoint",value:function(e){return e.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(e,t){var n=t||yr.getNormalMatrix(e),r=this.coplanarPoint(mr).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}},{key:"translate",value:function(e){return this.constant-=e.dot(this.normal),this}},{key:"equals",value:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();br.prototype.isPlane=!0;var _r=new Tt,xr=new tt,wr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new br,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new br,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new br,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new br,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new br,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new br;Object(p.a)(this,e),this.planes=[t,n,r,i,a,o]}return Object(v.a)(e,[{key:"set",value:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this}},{key:"copy",value:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],d=n[10],p=n[11],v=n[12],m=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-h,y-v).normalize(),t[1].setComponents(o+r,c+s,p+h,y+v).normalize(),t[2].setComponents(o+i,c+u,p+f,y+m).normalize(),t[3].setComponents(o-i,c-u,p-f,y-m).normalize(),t[4].setComponents(o-a,c-l,p-d,y-g).normalize(),t[5].setComponents(o+a,c+l,p+d,y+g).normalize(),this}},{key:"intersectsObject",value:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),_r.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(_r)}},{key:"intersectsSprite",value:function(e){return _r.center.set(0,0,0),_r.radius=.7071067811865476,_r.applyMatrix4(e.matrixWorld),this.intersectsSphere(_r)}},{key:"intersectsSphere",value:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0}},{key:"intersectsBox",value:function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(xr.x=r.normal.x>0?e.max.x:e.min.x,xr.y=r.normal.y>0?e.max.y:e.min.y,xr.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(xr)<0)return!1}return!0}},{key:"containsPoint",value:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();function Tr(){var e=null,t=!1,n=null,r=null;function i(t,a){n(t,a),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Sr(e,t){var n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){var a=r.get(t);(!a||a.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version})}else{t.isInterleavedBufferAttribute&&(t=t.data);var o=r.get(t);void 0===o?r.set(t,function(t,r){var i=t.array,a=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,i,a),t.onUploadCallback();var s=5126;return i instanceof Float32Array?s=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:i instanceof Int16Array?s=5122:i instanceof Uint32Array?s=5125:i instanceof Int32Array?s=5124:i instanceof Int8Array?s=5120:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=5121),{buffer:o,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(function(t,r,i){var a=r.array,o=r.updateRange;e.bindBuffer(i,t),-1===o.count?e.bufferSubData(i,0,a):(n?e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):e.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}(o.buffer,t,i),o.version=t.version)}}}}var Mr=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(p.a)(this,n),(e=t.call(this)).type="PlaneGeometry",e.parameters={width:r,height:i,widthSegments:a,heightSegments:o};for(var s=r/2,u=i/2,l=Math.floor(a),c=Math.floor(o),h=l+1,f=c+1,d=r/l,v=i/c,m=[],g=[],y=[],b=[],_=0;_<f;_++)for(var x=_*v-u,w=0;w<h;w++){var T=w*d-s;g.push(T,-x,0),y.push(0,0,1),b.push(w/l),b.push(1-_/c)}for(var S=0;S<c;S++)for(var M=0;M<l;M++){var O=M+h*S,E=M+h*(S+1),k=M+1+h*(S+1),A=M+1+h*S;m.push(O,E,A),m.push(E,k,A)}return e.setIndex(m),e.setAttribute("position",new Pn(g,3)),e.setAttribute("normal",new Pn(y,3)),e.setAttribute("uv",new Pn(b,2)),e}return Object(v.a)(n,null,[{key:"fromJSON",value:function(e){return new n(e.width,e.height,e.widthSegments,e.heightSegments)}}]),n}(Gn),Or={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenTint * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARTINTMAP\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenTint = sheenTint;\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n\tuniform float sheenRoughness;\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Er={common:{diffuse:{value:new Sn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ve},uv2Transform:{value:new Ve},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Fe(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Sn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Sn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ve}},sprite:{diffuse:{value:new Sn(16777215)},opacity:{value:1},center:{value:new Fe(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ve}}},kr={basic:{uniforms:sr([Er.common,Er.specularmap,Er.envmap,Er.aomap,Er.lightmap,Er.fog]),vertexShader:Or.meshbasic_vert,fragmentShader:Or.meshbasic_frag},lambert:{uniforms:sr([Er.common,Er.specularmap,Er.envmap,Er.aomap,Er.lightmap,Er.emissivemap,Er.fog,Er.lights,{emissive:{value:new Sn(0)}}]),vertexShader:Or.meshlambert_vert,fragmentShader:Or.meshlambert_frag},phong:{uniforms:sr([Er.common,Er.specularmap,Er.envmap,Er.aomap,Er.lightmap,Er.emissivemap,Er.bumpmap,Er.normalmap,Er.displacementmap,Er.fog,Er.lights,{emissive:{value:new Sn(0)},specular:{value:new Sn(1118481)},shininess:{value:30}}]),vertexShader:Or.meshphong_vert,fragmentShader:Or.meshphong_frag},standard:{uniforms:sr([Er.common,Er.envmap,Er.aomap,Er.lightmap,Er.emissivemap,Er.bumpmap,Er.normalmap,Er.displacementmap,Er.roughnessmap,Er.metalnessmap,Er.fog,Er.lights,{emissive:{value:new Sn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Or.meshphysical_vert,fragmentShader:Or.meshphysical_frag},toon:{uniforms:sr([Er.common,Er.aomap,Er.lightmap,Er.emissivemap,Er.bumpmap,Er.normalmap,Er.displacementmap,Er.gradientmap,Er.fog,Er.lights,{emissive:{value:new Sn(0)}}]),vertexShader:Or.meshtoon_vert,fragmentShader:Or.meshtoon_frag},matcap:{uniforms:sr([Er.common,Er.bumpmap,Er.normalmap,Er.displacementmap,Er.fog,{matcap:{value:null}}]),vertexShader:Or.meshmatcap_vert,fragmentShader:Or.meshmatcap_frag},points:{uniforms:sr([Er.points,Er.fog]),vertexShader:Or.points_vert,fragmentShader:Or.points_frag},dashed:{uniforms:sr([Er.common,Er.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Or.linedashed_vert,fragmentShader:Or.linedashed_frag},depth:{uniforms:sr([Er.common,Er.displacementmap]),vertexShader:Or.depth_vert,fragmentShader:Or.depth_frag},normal:{uniforms:sr([Er.common,Er.bumpmap,Er.normalmap,Er.displacementmap,{opacity:{value:1}}]),vertexShader:Or.meshnormal_vert,fragmentShader:Or.meshnormal_frag},sprite:{uniforms:sr([Er.sprite,Er.fog]),vertexShader:Or.sprite_vert,fragmentShader:Or.sprite_frag},background:{uniforms:{uvTransform:{value:new Ve},t2D:{value:null}},vertexShader:Or.background_vert,fragmentShader:Or.background_frag},cube:{uniforms:sr([Er.envmap,{opacity:{value:1}}]),vertexShader:Or.cube_vert,fragmentShader:Or.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Or.equirect_vert,fragmentShader:Or.equirect_frag},distanceRGBA:{uniforms:sr([Er.common,Er.displacementmap,{referencePosition:{value:new tt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Or.distanceRGBA_vert,fragmentShader:Or.distanceRGBA_frag},shadow:{uniforms:sr([Er.lights,Er.fog,{color:{value:new Sn(0)},opacity:{value:1}}]),vertexShader:Or.shadow_vert,fragmentShader:Or.shadow_frag}};function Ar(e,t,n,r,i){var a,o,s=new Sn(0),u=0,l=null,c=0,h=null;function f(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,i)}return{getClearColor:function(){return s},setClearColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),f(s,u=t)},getClearAlpha:function(){return u},setClearAlpha:function(e){f(s,u=e)},render:function(n,i){var d=!1,p=!0===i.isScene?i.background:null;p&&p.isTexture&&(p=t.get(p));var v=e.xr,m=v.getSession&&v.getSession();m&&"additive"===m.environmentBlendMode&&(p=null),null===p?f(s,u):p&&p.isColor&&(f(p,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.mapping===X)?(void 0===o&&((o=new rr(new ar(1,1,1),new lr({name:"BackgroundCubeMaterial",uniforms:or(kr.cube.uniforms),vertexShader:kr.cube.vertexShader,fragmentShader:kr.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o)),o.material.uniforms.envMap.value=p,o.material.uniforms.flipEnvMap.value=p.isCubeTexture&&!1===p.isRenderTargetTexture?-1:1,l===p&&c===p.version&&h===e.toneMapping||(o.material.needsUpdate=!0,l=p,c=p.version,h=e.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null)):p&&p.isTexture&&(void 0===a&&((a=new rr(new Mr(2,2),new lr({name:"BackgroundMaterial",uniforms:or(kr.background.uniforms),vertexShader:kr.background.vertexShader,fragmentShader:kr.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),l===p&&c===p.version&&h===e.toneMapping||(a.material.needsUpdate=!0,l=p,c=p.version,h=e.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}}}function Cr(e,t,n,r){var i=e.getParameter(34921),a=r.isWebGL2?null:t.get("OES_vertex_array_object"),o=r.isWebGL2||null!==a,s={},u=f(null),l=u;function c(t){return r.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){for(var t=[],n=[],r=[],a=0;a<i;a++)t[a]=0,n[a]=0,r[a]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function d(){for(var e=l.newAttributes,t=0,n=e.length;t<n;t++)e[t]=0}function p(e){v(e,0)}function v(n,i){var a=l.enabledAttributes,o=l.attributeDivisors;l.newAttributes[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),o[n]=i)}function m(){for(var t=l.newAttributes,n=l.enabledAttributes,r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function g(t,n,i,a,o,s){!0!==r.isWebGL2||5124!==i&&5125!==i?e.vertexAttribPointer(t,n,i,a,o,s):e.vertexAttribIPointer(t,n,i,o,s)}function y(){b(),l!==u&&c((l=u).object)}function b(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function(i,u,h,y,b){var _=!1;if(o){var x=function(t,n,i){var o=!0===i.wireframe,u=s[t.id];void 0===u&&(s[t.id]=u={});var l=u[n.id];void 0===l&&(u[n.id]=l={});var c=l[o];return void 0===c&&(c=f(r.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),l[o]=c),c}(y,h,u);l!==x&&c((l=x).object),(_=function(e,t){var n=l.attributes,r=e.attributes,i=0;for(var a in r){var o=n[a],s=r[a];if(void 0===o)return!0;if(o.attribute!==s)return!0;if(o.data!==s.data)return!0;i++}return l.attributesNum!==i||l.index!==t}(y,b))&&function(e,t){var n={},r=e.attributes,i=0;for(var a in r){var o=r[a],s={};s.attribute=o,o.data&&(s.data=o.data),n[a]=s,i++}l.attributes=n,l.attributesNum=i,l.index=t}(y,b)}else{var w=!0===u.wireframe;l.geometry===y.id&&l.program===h.id&&l.wireframe===w||(l.geometry=y.id,l.program=h.id,l.wireframe=w,_=!0)}!0===i.isInstancedMesh&&(_=!0),null!==b&&n.update(b,34963),_&&(function(i,a,o,s){if(!1!==r.isWebGL2||!i.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==t.get("ANGLE_instanced_arrays")){d();var u=s.attributes,l=o.getAttributes(),c=a.defaultAttributeValues;for(var h in l){var f=l[h];if(f.location>=0){var y=u[h];if(void 0===y&&("instanceMatrix"===h&&i.instanceMatrix&&(y=i.instanceMatrix),"instanceColor"===h&&i.instanceColor&&(y=i.instanceColor)),void 0!==y){var b=y.normalized,_=y.itemSize,x=n.get(y);if(void 0===x)continue;var w=x.buffer,T=x.type,S=x.bytesPerElement;if(y.isInterleavedBufferAttribute){var M=y.data,O=M.stride,E=y.offset;if(M&&M.isInstancedInterleavedBuffer){for(var k=0;k<f.locationSize;k++)v(f.location+k,M.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=M.meshPerAttribute*M.count)}else for(var A=0;A<f.locationSize;A++)p(f.location+A);e.bindBuffer(34962,w);for(var C=0;C<f.locationSize;C++)g(f.location+C,_/f.locationSize,T,b,O*S,(E+_/f.locationSize*C)*S)}else{if(y.isInstancedBufferAttribute){for(var P=0;P<f.locationSize;P++)v(f.location+P,y.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)}else for(var j=0;j<f.locationSize;j++)p(f.location+j);e.bindBuffer(34962,w);for(var L=0;L<f.locationSize;L++)g(f.location+L,_/f.locationSize,T,b,_*S,_/f.locationSize*L*S)}}else if(void 0!==c){var R=c[h];if(void 0!==R)switch(R.length){case 2:e.vertexAttrib2fv(f.location,R);break;case 3:e.vertexAttrib3fv(f.location,R);break;case 4:e.vertexAttrib4fv(f.location,R);break;default:e.vertexAttrib1fv(f.location,R)}}}}m()}}(i,u,h,y),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:y,resetDefaultState:b,dispose:function(){for(var e in y(),s){var t=s[e];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0!==s[e.id]){var t=s[e.id];for(var n in t){var r=t[n];for(var i in r)h(r[i].object),delete r[i];delete t[n]}delete s[e.id]}},releaseStatesOfProgram:function(e){for(var t in s){var n=s[t];if(void 0!==n[e.id]){var r=n[e.id];for(var i in r)h(r[i].object),delete r[i];delete n[e.id]}}},initAttributes:d,enableAttribute:p,disableUnusedAttributes:m}}function Pr(e,t,n,r){var i,a=r.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i,1)},this.renderInstances=function(r,o,s){if(0!==s){var u,l;if(a)u=e,l="drawArraysInstanced";else if(l="drawArraysInstancedANGLE",null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[l](i,r,o,s),n.update(o,i,s)}}}function jr(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var u=a||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,c=e.getParameter(34930),h=e.getParameter(35660),f=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),v=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),y=h>0,b=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){var n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:h,maxTextureSize:f,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:v,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?e.getParameter(36183):0}}function Lr(e){var t=this,n=null,r=0,i=!1,a=!1,o=new br,s=new Ve,u={value:null,needsUpdate:!1};function l(){u.value!==n&&(u.value=n,u.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function c(e,n,r,i){var a=null!==e?e.length:0,l=null;if(0!==a){if(l=u.value,!0!==i||null===l){var c=r+4*a,h=n.matrixWorldInverse;s.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,d=r;f!==a;++f,d+=4)o.copy(e[f]).applyMatrix4(h,s),o.normal.toArray(l,d),l[d+3]=o.constant}u.value=l,u.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,l}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,a){var o=0!==e.length||t||0!==r||i;return i=t,n=c(e,a,0),r=e.length,o},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1,l()},this.setState=function(t,o,s){var h=t.clippingPlanes,f=t.clipIntersection,d=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||a&&!d)a?c(null):l();else{var v=a?0:r,m=4*v,g=p.clippingState||null;u.value=g,g=c(h,o,m,s);for(var y=0;y!==m;++y)g[y]=n[y];p.clippingState=g,this.numIntersection=f?this.numPlanes:0,this.numPlanes+=v}}}function Rr(e){var t=new WeakMap;function n(e,t){return 303===t?e.mapping=V:304===t&&(e.mapping=W),e}function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping;if(303===a||304===a){if(t.has(i))return n(t.get(i).texture,i.mapping);var o=i.image;if(o&&o.height>0){var s=e.getRenderTarget(),u=new vr(o.height/2);return u.fromEquirectangularTexture(e,i),t.set(i,u),e.setRenderTarget(s),i.addEventListener("dispose",r),n(u.texture,i.mapping)}return null}}return i},dispose:function(){t=new WeakMap}}}kr.physical={uniforms:sr([kr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Fe(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new Sn(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Fe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new Sn(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new Sn(1,1,1)},specularTintMap:{value:null}}]),vertexShader:Or.meshphysical_vert,fragmentShader:Or.meshphysical_frag};var Ir=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return Object(p.a)(this,n),(e=t.call(this)).type="OrthographicCamera",e.zoom=1,e.view=null,e.left=r,e.right=i,e.top=a,e.bottom=o,e.near=s,e.far=u,e.updateProjectionMatrix(),e}return Object(v.a)(n,[{key:"copy",value:function(e,t){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}},{key:"setViewOffset",value:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(i+=u*this.view.offsetX)+u*this.view.width,s=(o-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(e){var t=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}]),n}(cr);Ir.prototype.isOrthographicCamera=!0;var Dr=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).type="RawShaderMaterial",r}return n}(lr);Dr.prototype.isRawShaderMaterial=!0;var Nr=Math.pow(2,8),Hr=[.125,.215,.35,.446,.526,.582],Gr=5+Hr.length,Br=(B={},Object(D.a)(B,be,0),Object(D.a)(B,_e,1),Object(D.a)(B,we,2),Object(D.a)(B,3004,3),Object(D.a)(B,3005,4),Object(D.a)(B,3006,5),Object(D.a)(B,xe,6),B),Ur=new Ir,Fr=$r(),zr=Fr._lodPlanes,Vr=Fr._sizeLods,Wr=Fr._sigmas,Xr=new Sn,qr=null,Kr=(1+Math.sqrt(5))/2,Yr=1/Kr,Jr=[new tt(1,1,1),new tt(-1,1,1),new tt(1,1,-1),new tt(-1,1,-1),new tt(0,Kr,Yr),new tt(0,Kr,-Yr),new tt(Yr,0,Kr),new tt(-Yr,0,Kr),new tt(Kr,Yr,0),new tt(-Kr,Yr,0)],Zr=function(){function e(t){var n,r;Object(p.a)(this,e),this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=(n=new Float32Array(20),r=new tt(0,1,0),new Dr({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r},inputEncoding:{value:Br[3e3]},outputEncoding:{value:Br[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return Object(v.a)(e,[{key:"fromScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;qr=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}},{key:"fromEquirectangular",value:function(e){return this._fromTexture(e)}},{key:"fromCubemap",value:function(e){return this._fromTexture(e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=ri(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=ni(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var e=0;e<zr.length;e++)zr[e].dispose()}},{key:"_cleanup",value:function(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(qr),e.scissorTest=!1,ti(e,0,0,e.width,e.height)}},{key:"_fromTexture",value:function(e){qr=this._renderer.getRenderTarget();var t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}},{key:"_allocateTargets",value:function(e){var t={magFilter:J,minFilter:J,generateMipmaps:!1,type:te,format:1023,encoding:Qr(e)?e.encoding:we,depthBuffer:!1},n=ei(t);return n.depthBuffer=!e,this._pingPongRenderTarget=ei(t),n}},{key:"_compileMaterial",value:function(e){var t=new rr(zr[0],e);this._renderer.compile(t,Ur)}},{key:"_sceneToCubeUV",value:function(e,t,n,r){var i=new hr(90,1,t,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.autoClear,l=s.outputEncoding,c=s.toneMapping;s.getClearColor(Xr),s.toneMapping=0,s.outputEncoding=be,s.autoClear=!1;var h=new Mn({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),f=new rr(new ar,h),d=!1,p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,d=!0):(h.color.copy(Xr),d=!0);for(var v=0;v<6;v++){var m=v%3;0==m?(i.up.set(0,a[v],0),i.lookAt(o[v],0,0)):1==m?(i.up.set(0,0,a[v]),i.lookAt(0,o[v],0)):(i.up.set(0,a[v],0),i.lookAt(0,0,o[v])),ti(r,m*Nr,v>2?Nr:0,Nr,Nr),s.setRenderTarget(r),d&&s.render(f,i),s.render(e,i)}f.geometry.dispose(),f.material.dispose(),s.toneMapping=c,s.outputEncoding=l,s.autoClear=u,e.background=p}},{key:"_setEncoding",value:function(e,t){e.value=!0===this._renderer.capabilities.isWebGL2&&t.format===ue&&t.type===te&&t.encoding===_e?Br[3e3]:Br[t.encoding]}},{key:"_textureToCubeUV",value:function(e,t){var n=this._renderer;e.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=ri()):null==this._equirectShader&&(this._equirectShader=ni());var r=e.isCubeTexture?this._cubemapShader:this._equirectShader,i=new rr(zr[0],r),a=r.uniforms;a.envMap.value=e,e.isCubeTexture||a.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(a.inputEncoding,e),this._setEncoding(a.outputEncoding,t.texture),ti(t,0,0,3*Nr,2*Nr),n.setRenderTarget(t),n.render(i,Ur)}},{key:"_applyPMREM",value:function(e){var t=this._renderer,n=t.autoClear;t.autoClear=!1;for(var r=1;r<Gr;r++){var i=Math.sqrt(Wr[r]*Wr[r]-Wr[r-1]*Wr[r-1]);this._blur(e,r-1,r,i,Jr[(r-1)%Jr.length])}t.autoClear=n}},{key:"_blur",value:function(e,t,n,r,i){var a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",i),this._halfBlur(a,e,n,n,r,"longitudinal",i)}},{key:"_halfBlur",value:function(e,t,n,r,i,a,o){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new rr(zr[r],u),c=u.uniforms,h=Vr[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,d=i/f,p=isFinite(i)?1+Math.floor(3*d):20;p>20&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(20));for(var v=[],m=0,g=0;g<20;++g){var y=g/d,b=Math.exp(-y*y/2);v.push(b),0==g?m+=b:g<p&&(m+=2*b)}for(var _=0;_<v.length;_++)v[_]=v[_]/m;c.envMap.value=e.texture,c.samples.value=p,c.weights.value=v,c.latitudinal.value="latitudinal"===a,o&&(c.poleAxis.value=o),c.dTheta.value=f,c.mipInt.value=8-n,this._setEncoding(c.inputEncoding,e.texture),this._setEncoding(c.outputEncoding,e.texture);var x=Vr[r];ti(t,3*Math.max(0,Nr-2*x),(0===r?0:2*Nr)+2*x*(r>4?r-8+4:0),3*x,2*x),s.setRenderTarget(t),s.render(l,Ur)}}]),e}();function Qr(e){return void 0!==e&&e.type===te&&(e.encoding===be||e.encoding===_e||e.encoding===xe)}function $r(){for(var e=[],t=[],n=[],r=8,i=0;i<Gr;i++){var a=Math.pow(2,r);t.push(a);var o=1/a;i>4?o=Hr[i-8+4-1]:0==i&&(o=0),n.push(o);for(var s=1/(a-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],h=new Float32Array(108),f=new Float32Array(72),d=new Float32Array(36),p=0;p<6;p++){var v=p%3*2/3-1,m=p>2?0:-1;h.set([v,m,0,v+2/3,m,0,v+2/3,m+1,0,v,m,0,v+2/3,m+1,0,v,m+1,0],18*p),f.set(c,12*p),d.set([p,p,p,p,p,p],6*p)}var g=new Gn;g.setAttribute("position",new kn(h,3)),g.setAttribute("uv",new kn(f,2)),g.setAttribute("faceIndex",new kn(d,1)),e.push(g),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function ei(e){var t=new Qe(3*Nr,3*Nr,e);return t.texture.mapping=X,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function ti(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function ni(){var e=new Fe(1,1);return new Dr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:Br[3e3]},outputEncoding:{value:Br[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function ri(){return new Dr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Br[3e3]},outputEncoding:{value:Br[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function ii(e){var t=new WeakMap,n=null;function r(e){var n=e.target;n.removeEventListener("dispose",r);var i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){var a=i.mapping,o=303===a||304===a,s=a===V||a===W;if(o||s){if(t.has(i))return t.get(i).texture;var u=i.image;if(o&&u&&u.height>0||s&&u&&function(e){for(var t=0,n=0;n<6;n++)void 0!==e[n]&&t++;return 6===t}(u)){var l=e.getRenderTarget();null===n&&(n=new Zr(e));var c=o?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,c),e.setRenderTarget(l),i.addEventListener("dispose",r),c.texture}return null}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function ai(e){var t={};function n(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){var t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function oi(e,t,n,r){var i={},a=new WeakMap;function o(e){var s=e.target;for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);s.removeEventListener("dispose",o),delete i[s.id];var l=a.get(s);l&&(t.remove(l),a.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){var n=[],r=e.index,i=e.attributes.position,o=0;if(null!==r){var s=r.array;o=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],f=s[u+2];n.push(c,h,h,f,f,c)}}else{o=i.version;for(var d=0,p=i.array.length/3-1;d<p;d+=3){var v=d+0,m=d+1,g=d+2;n.push(v,m,m,g,g,v)}}var y=new(We(n)>65535?Cn:An)(n,1);y.version=o;var b=a.get(e);b&&t.remove(b),a.set(e,y)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(e){var n=e.attributes;for(var r in n)t.update(n[r],34962);var i=e.morphAttributes;for(var a in i)for(var o=i[a],s=0,u=o.length;s<u;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var t=a.get(e);if(t){var n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return a.get(e)}}}function si(e,t,n,r){var i,a,o,s=r.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i,1)},this.renderInstances=function(r,u,l){if(0!==l){var c,h;if(s)c=e,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[h](i,u,a,r*o,l),n.update(u,i,l)}}}function ui(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}var li=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(p.a)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=J,e.minFilter=J,e.wrapR=K,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(Ye);function ci(e,t){return e[0]-t[0]}function hi(e,t){return Math.abs(t[1])-Math.abs(e[1])}function fi(e,t){var n=1,r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function di(e,t,n){for(var r={},i=new Float32Array(8),a=new WeakMap,o=new tt,s=[],u=0;u<8;u++)s[u]=[u,0];return{update:function(u,l,c,h){var f=u.morphTargetInfluences;if(!0===t.isWebGL2){var d=l.morphAttributes.position.length,p=a.get(l);if(void 0===p||p.count!==d){void 0!==p&&p.texture.dispose();var v=void 0!==l.morphAttributes.normal,m=l.morphAttributes.position,g=l.morphAttributes.normal||[],y=!0===v?2:1,b=l.attributes.position.count*y,_=1;b>t.maxTextureSize&&(_=Math.ceil(b/t.maxTextureSize),b=t.maxTextureSize);var x=new Float32Array(b*_*4*d),w=new li(x,b,_,d);w.format=ue,w.type=ie;for(var T=4*y,S=0;S<d;S++)for(var M=m[S],O=g[S],E=b*_*4*S,k=0;k<M.count;k++){o.fromBufferAttribute(M,k),!0===M.normalized&&fi(o,M);var A=k*T;x[E+A+0]=o.x,x[E+A+1]=o.y,x[E+A+2]=o.z,x[E+A+3]=0,!0===v&&(o.fromBufferAttribute(O,k),!0===O.normalized&&fi(o,O),x[E+A+4]=o.x,x[E+A+5]=o.y,x[E+A+6]=o.z,x[E+A+7]=0)}p={count:d,texture:w,size:new Fe(b,_)},a.set(l,p)}for(var C=0,P=0;P<f.length;P++)C+=f[P];var j=l.morphTargetsRelative?1:1-C;h.getUniforms().setValue(e,"morphTargetBaseInfluence",j),h.getUniforms().setValue(e,"morphTargetInfluences",f),h.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),h.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{var L=void 0===f?0:f.length,R=r[l.id];if(void 0===R||R.length!==L){R=[];for(var I=0;I<L;I++)R[I]=[I,0];r[l.id]=R}for(var D=0;D<L;D++){var N=R[D];N[0]=D,N[1]=f[D]}R.sort(hi);for(var H=0;H<8;H++)H<L&&R[H][1]?(s[H][0]=R[H][0],s[H][1]=R[H][1]):(s[H][0]=Number.MAX_SAFE_INTEGER,s[H][1]=0);s.sort(ci);for(var G=l.morphAttributes.position,B=l.morphAttributes.normal,U=0,F=0;F<8;F++){var z=s[F],V=z[0],W=z[1];V!==Number.MAX_SAFE_INTEGER&&W?(G&&l.getAttribute("morphTarget"+F)!==G[V]&&l.setAttribute("morphTarget"+F,G[V]),B&&l.getAttribute("morphNormal"+F)!==B[V]&&l.setAttribute("morphNormal"+F,B[V]),i[F]=W,U+=W):(G&&!0===l.hasAttribute("morphTarget"+F)&&l.deleteAttribute("morphTarget"+F),B&&!0===l.hasAttribute("morphNormal"+F)&&l.deleteAttribute("morphNormal"+F),i[F]=0)}var X=l.morphTargetsRelative?1:1-U;h.getUniforms().setValue(e,"morphTargetBaseInfluence",X),h.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function pi(e,t,n,r){var i=new WeakMap;function a(e){var t=e.target;t.removeEventListener("dispose",a),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){var o=r.render.frame,s=t.get(e,e.geometry);return i.get(s)!==o&&(t.update(s),i.set(s,o)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",a)&&e.addEventListener("dispose",a),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),s},dispose:function(){i=new WeakMap}}}li.prototype.isDataTexture2DArray=!0;var vi=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(p.a)(this,n),(e=t.call(this,null)).image={data:r,width:i,height:a,depth:o},e.magFilter=J,e.minFilter=J,e.wrapR=K,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(Ye);vi.prototype.isDataTexture3D=!0;var mi=new Ye,gi=new li,yi=new vi,bi=new pr,_i=[],xi=[],wi=new Float32Array(16),Ti=new Float32Array(9),Si=new Float32Array(4);function Mi(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=_i[i];if(void 0===a&&(a=new Float32Array(i),_i[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)e[o].toArray(a,s+=n)}return a}function Oi(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Ei(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function ki(e,t){var n=xi[t];void 0===n&&(n=new Int32Array(t),xi[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ai(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Ci(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Oi(n,t))return;e.uniform2fv(this.addr,t),Ei(n,t)}}function Pi(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Oi(n,t))return;e.uniform3fv(this.addr,t),Ei(n,t)}}function ji(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Oi(n,t))return;e.uniform4fv(this.addr,t),Ei(n,t)}}function Li(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Oi(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ei(n,t)}else{if(Oi(n,r))return;Si.set(r),e.uniformMatrix2fv(this.addr,!1,Si),Ei(n,r)}}function Ri(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Oi(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ei(n,t)}else{if(Oi(n,r))return;Ti.set(r),e.uniformMatrix3fv(this.addr,!1,Ti),Ei(n,r)}}function Ii(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Oi(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ei(n,t)}else{if(Oi(n,r))return;wi.set(r),e.uniformMatrix4fv(this.addr,!1,wi),Ei(n,r)}}function Di(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ni(e,t){var n=this.cache;Oi(n,t)||(e.uniform2iv(this.addr,t),Ei(n,t))}function Hi(e,t){var n=this.cache;Oi(n,t)||(e.uniform3iv(this.addr,t),Ei(n,t))}function Gi(e,t){var n=this.cache;Oi(n,t)||(e.uniform4iv(this.addr,t),Ei(n,t))}function Bi(e,t){var n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ui(e,t){var n=this.cache;Oi(n,t)||(e.uniform2uiv(this.addr,t),Ei(n,t))}function Fi(e,t){var n=this.cache;Oi(n,t)||(e.uniform3uiv(this.addr,t),Ei(n,t))}function zi(e,t){var n=this.cache;Oi(n,t)||(e.uniform4uiv(this.addr,t),Ei(n,t))}function Vi(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||mi,i)}function Wi(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||yi,i)}function Xi(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||bi,i)}function qi(e,t,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||gi,i)}function Ki(e,t){e.uniform1fv(this.addr,t)}function Yi(e,t){var n=Mi(t,this.size,2);e.uniform2fv(this.addr,n)}function Ji(e,t){var n=Mi(t,this.size,3);e.uniform3fv(this.addr,n)}function Zi(e,t){var n=Mi(t,this.size,4);e.uniform4fv(this.addr,n)}function Qi(e,t){var n=Mi(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function $i(e,t){var n=Mi(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ea(e,t){var n=Mi(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ta(e,t){e.uniform1iv(this.addr,t)}function na(e,t){e.uniform2iv(this.addr,t)}function ra(e,t){e.uniform3iv(this.addr,t)}function ia(e,t){e.uniform4iv(this.addr,t)}function aa(e,t){e.uniform1uiv(this.addr,t)}function oa(e,t){e.uniform2uiv(this.addr,t)}function sa(e,t){e.uniform3uiv(this.addr,t)}function ua(e,t){e.uniform4uiv(this.addr,t)}function la(e,t,n){var r=t.length,i=ki(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTexture2D(t[a]||mi,i[a])}function ca(e,t,n){var r=t.length,i=ki(n,r);e.uniform1iv(this.addr,i);for(var a=0;a!==r;++a)n.safeSetTextureCube(t[a]||bi,i[a])}function ha(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Ai;case 35664:return Ci;case 35665:return Pi;case 35666:return ji;case 35674:return Li;case 35675:return Ri;case 35676:return Ii;case 5124:case 35670:return Di;case 35667:case 35671:return Ni;case 35668:case 35672:return Hi;case 35669:case 35673:return Gi;case 5125:return Bi;case 36294:return Ui;case 36295:return Fi;case 36296:return zi;case 35678:case 36198:case 36298:case 36306:case 35682:return Vi;case 35679:case 36299:case 36307:return Wi;case 35680:case 36300:case 36308:case 36293:return Xi;case 36289:case 36303:case 36311:case 36292:return qi}}(t.type)}function fa(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ki;case 35664:return Yi;case 35665:return Ji;case 35666:return Zi;case 35674:return Qi;case 35675:return $i;case 35676:return ea;case 5124:case 35670:return ta;case 35667:case 35671:return na;case 35668:case 35672:return ra;case 35669:case 35673:return ia;case 5125:return aa;case 36294:return oa;case 36295:return sa;case 36296:return ua;case 35678:case 36198:case 36298:case 36306:case 35682:return la;case 35680:case 36300:case 36308:case 36293:return ca}}(t.type)}function da(e){this.id=e,this.seq=[],this.map={}}fa.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Ei(t,e)},da.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var pa=/(\w+)(\])?(\[|\.)?/g;function va(e,t){e.seq.push(t),e.map[t.id]=t}function ma(e,t,n){var r=e.name,i=r.length;for(pa.lastIndex=0;;){var a=pa.exec(r),o=a[1],s=a[3];if("]"===a[2]&&(o|=0),void 0===s||"["===s&&pa.lastIndex+2===i){va(n,void 0===s?new ha(o,e,t):new fa(o,e,t));break}var u=n.map[o];void 0===u&&va(n,u=new da(o)),n=u}}function ga(e,t){this.seq=[],this.map={};for(var n=e.getProgramParameter(t,35718),r=0;r<n;++r){var i=e.getActiveUniform(t,r);ma(i,e.getUniformLocation(t,i.name),this)}}function ya(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}ga.prototype.setValue=function(e,t,n,r){var i=this.map[t];void 0!==i&&i.setValue(e,n,r)},ga.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},ga.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},ga.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var ba=0;function _a(e){switch(e){case be:return["Linear","( value )"];case _e:return["sRGB","( value )"];case we:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case xe:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case 3003:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function xa(e,t,n){var r=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(e.getShaderSource(t))}function wa(e,t){var n=_a(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ta(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Sa(e){return""!==e}function Ma(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Oa(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var Ea=/^[ \t]*#include +<([\w\d./]+)>/gm;function ka(e){return e.replace(Ea,Aa)}function Aa(e,t){var n=Or[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ka(n)}var Ca=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Pa=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ja(e){return e.replace(Pa,Ra).replace(Ca,La)}function La(e,t,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ra(0,t,n,r)}function Ra(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return i}function Ia(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Da(e,t,n,r){var i,a,o,s,u=e.getContext(),l=n.defines,c=n.vertexShader,h=n.fragmentShader,f=function(e){var t="SHADOWMAP_TYPE_BASIC";return 1===e.shadowMapType?t="SHADOWMAP_TYPE_PCF":2===e.shadowMapType?t="SHADOWMAP_TYPE_PCF_SOFT":3===e.shadowMapType&&(t="SHADOWMAP_TYPE_VSM"),t}(n),d=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case V:case W:t="ENVMAP_TYPE_CUBE";break;case X:case 307:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),p=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case W:case 307:t="ENVMAP_MODE_REFRACTION"}return t}(n),v=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(n),m=e.gammaFactor>0?e.gammaFactor:1,g=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Sa).join("\n")}(n),y=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(l),b=u.createProgram(),_=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((i=[y].filter(Sa).join("\n")).length>0&&(i+="\n"),(a=[g,y].filter(Sa).join("\n")).length>0&&(a+="\n")):(i=[Ia(n),"#define SHADER_NAME "+n.shaderName,y,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+m,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Sa).join("\n"),a=[g,Ia(n),"#define SHADER_NAME "+n.shaderName,y,"#define GAMMA_FACTOR "+m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+p:"",n.envMap?"#define "+v:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+f:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Or.tonemapping_pars_fragment:"",0!==n.toneMapping?Ta("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===se?"#define OPAQUE":"",Or.encodings_pars_fragment,n.map?wa("mapTexelToLinear",n.mapEncoding):"",n.matcap?wa("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?wa("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?wa("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?wa("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?wa("lightMapTexelToLinear",n.lightMapEncoding):"",(o=n.outputEncoding,s=_a(o),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Sa).join("\n")),c=Oa(c=Ma(c=ka(c),n),n),h=Oa(h=Ma(h=ka(h),n),n),c=ja(c),h=ja(h),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(_="#version 300 es\n",i=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+i,a=["#define varying in",n.glslVersion===Oe?"":"out highp vec4 pc_fragColor;",n.glslVersion===Oe?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var x,w,T=_+a+h,S=ya(u,35633,_+i+c),M=ya(u,35632,T);if(u.attachShader(b,S),u.attachShader(b,M),void 0!==n.index0AttributeName?u.bindAttribLocation(b,0,n.index0AttributeName):!0===n.morphTargets&&u.bindAttribLocation(b,0,"position"),u.linkProgram(b),e.debug.checkShaderErrors){var O=u.getProgramInfoLog(b).trim(),E=u.getShaderInfoLog(S).trim(),k=u.getShaderInfoLog(M).trim(),A=!0,C=!0;if(!1===u.getProgramParameter(b,35714)){A=!1;var P=xa(u,S,"vertex"),j=xa(u,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+u.getError()+" - VALIDATE_STATUS "+u.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+O+"\n"+P+"\n"+j)}else""!==O?console.warn("THREE.WebGLProgram: Program Info Log:",O):""!==E&&""!==k||(C=!1);C&&(this.diagnostics={runnable:A,programLog:O,vertexShader:{log:E,prefix:i},fragmentShader:{log:k,prefix:a}})}return u.deleteShader(S),u.deleteShader(M),this.getUniforms=function(){return void 0===x&&(x=new ga(u,b)),x},this.getAttributes=function(){return void 0===w&&(w=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i),o=a.name,s=1;35674===a.type&&(s=2),35675===a.type&&(s=3),35676===a.type&&(s=4),n[o]={type:a.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(u,b)),w},this.destroy=function(){r.releaseStatesOfProgram(this),u.deleteProgram(b),this.program=void 0},this.name=n.shaderName,this.id=ba++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=S,this.fragmentShader=M,this}function Na(e,t,n,r,i,a,o){var s=[],u=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,h=i.maxVertexUniforms,f=i.vertexTextures,d=i.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function m(e){var t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=be,u&&e&&e.isTexture&&e.format===ue&&e.type===te&&e.encoding===_e&&(t=be),t}return{getParameters:function(a,s,v,g,y){var b,_,x=g.fog,w=(a.isMeshStandardMaterial?n:t).get(a.envMap||(a.isMeshStandardMaterial?g.environment:null)),T=p[a.type],S=y.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(c)return 1024;var n=Math.floor((h-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}(y):0;if(null!==a.precision&&(d=i.getMaxPrecision(a.precision))!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",d,"instead."),T){var M=kr[T];b=M.vertexShader,_=M.fragmentShader}else b=a.vertexShader,_=a.fragmentShader;var O=e.getRenderTarget(),E=a.alphaTest>0,k=a.clearcoat>0;return{isWebGL2:u,shaderID:T,shaderName:a.type,vertexShader:b,fragmentShader:_,defines:a.defines,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:d,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:f,outputEncoding:null!==O?m(O.texture):e.outputEncoding,map:!!a.map,mapEncoding:m(a.map),matcap:!!a.matcap,matcapEncoding:m(a.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:m(w),envMapCubeUV:!!w&&(w.mapping===X||307===w.mapping),lightMap:!!a.lightMap,lightMapEncoding:m(a.lightMap),aoMap:!!a.aoMap,emissiveMap:!!a.emissiveMap,emissiveMapEncoding:m(a.emissiveMap),bumpMap:!!a.bumpMap,normalMap:!!a.normalMap,objectSpaceNormalMap:1===a.normalMapType,tangentSpaceNormalMap:0===a.normalMapType,clearcoat:k,clearcoatMap:k&&!!a.clearcoatMap,clearcoatRoughnessMap:k&&!!a.clearcoatRoughnessMap,clearcoatNormalMap:k&&!!a.clearcoatNormalMap,displacementMap:!!a.displacementMap,roughnessMap:!!a.roughnessMap,metalnessMap:!!a.metalnessMap,specularMap:!!a.specularMap,specularIntensityMap:!!a.specularIntensityMap,specularTintMap:!!a.specularTintMap,specularTintMapEncoding:m(a.specularTintMap),alphaMap:!!a.alphaMap,alphaTest:E,gradientMap:!!a.gradientMap,sheen:a.sheen>0,transmission:a.transmission>0,transmissionMap:!!a.transmissionMap,thicknessMap:!!a.thicknessMap,combine:a.combine,vertexTangents:!!a.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatMap||a.clearcoatRoughnessMap||a.clearcoatNormalMap||a.displacementMap||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularTintMap),uvsVertexOnly:!(a.map||a.bumpMap||a.normalMap||a.specularMap||a.alphaMap||a.emissiveMap||a.roughnessMap||a.metalnessMap||a.clearcoatNormalMap||a.transmission>0||a.transmissionMap||a.thicknessMap||a.specularIntensityMap||a.specularTintMap||!a.displacementMap),fog:!!x,useFog:a.fog,fogExp2:x&&x.isFogExp2,flatShading:!!a.flatShading,sizeAttenuation:a.sizeAttenuation,logarithmicDepthBuffer:l,skinning:!0===y.isSkinnedMesh&&S>0,maxBones:S,useVertexTexture:c,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,morphTargetsCount:y.geometry&&y.geometry.morphAttributes.position?y.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,format:a.format,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&v.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:0,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,depthPacking:void 0!==a.depthPacking&&a.depthPacking,index0AttributeName:a.index0AttributeName,extensionDerivatives:a.extensions&&a.extensions.derivatives,extensionFragDepth:a.extensions&&a.extensions.fragDepth,extensionDrawBuffers:a.extensions&&a.extensions.drawBuffers,extensionShaderTextureLOD:a.extensions&&a.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||r.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);if(!1===t.isRawShaderMaterial){for(var i=0;i<v.length;i++)n.push(t[v[i]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){var t=p[e.type];return t?ur.clone(kr[t].uniforms):e.uniforms},acquireProgram:function(t,n){for(var r,i=0,o=s.length;i<o;i++){var u=s[i];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new Da(e,n,t,a),s.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){var t=s.indexOf(e);s[t]=s[s.length-1],s.pop(),e.destroy()}},programs:s}}function Ha(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&e.set(t,n={}),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Ga(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ba(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Ua(e){var t=[],n=0,r=[],i=[],a=[],o={id:-1};function s(r,i,a,s,u,l){var c=t[n],h=e.get(a);return void 0===c?t[n]=c={id:r.id,object:r,geometry:i,material:a,program:h.program||o,groupOrder:s,renderOrder:r.renderOrder,z:u,group:l}:(c.id=r.id,c.object=r,c.geometry=i,c.material=a,c.program=h.program||o,c.groupOrder=s,c.renderOrder=r.renderOrder,c.z=u,c.group=l),n++,c}return{opaque:r,transmissive:i,transparent:a,init:function(){n=0,r.length=0,i.length=0,a.length=0},push:function(e,t,n,o,u,l){var c=s(e,t,n,o,u,l);n.transmission>0?i.push(c):!0===n.transparent?a.push(c):r.push(c)},unshift:function(e,t,n,o,u,l){var c=s(e,t,n,o,u,l);n.transmission>0?i.unshift(c):!0===n.transparent?a.unshift(c):r.unshift(c)},finish:function(){for(var e=n,r=t.length;e<r;e++){var i=t[e];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(e,t){r.length>1&&r.sort(e||Ga),i.length>1&&i.sort(t||Ba),a.length>1&&a.sort(t||Ba)}}}function Fa(e){var t=new WeakMap;return{get:function(n,r){var i;return!1===t.has(n)?(i=new Ua(e),t.set(n,[i])):r>=t.get(n).length?(i=new Ua(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}function za(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new tt,color:new Sn};break;case"SpotLight":n={position:new tt,direction:new tt,color:new Sn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new tt,color:new Sn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new tt,skyColor:new Sn,groundColor:new Sn};break;case"RectAreaLight":n={color:new Sn,position:new tt,halfWidth:new tt,halfHeight:new tt}}return e[t.id]=n,n}}}var Va=0;function Wa(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function Xa(e,t){for(var n,r=new za,i=(n={},{get:function(e){if(void 0!==n[e.id])return n[e.id];var t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}),a={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)a.probe.push(new tt);var s=new tt,u=new jt,l=new jt;return{setup:function(n,o){for(var s=0,u=0,l=0,c=0;c<9;c++)a.probe[c].set(0,0,0);var h=0,f=0,d=0,p=0,v=0,m=0,g=0,y=0;n.sort(Wa);for(var b=!0!==o?Math.PI:1,_=0,x=n.length;_<x;_++){var w=n[_],T=w.color,S=w.intensity,M=w.distance,O=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)s+=T.r*S*b,u+=T.g*S*b,l+=T.b*S*b;else if(w.isLightProbe)for(var E=0;E<9;E++)a.probe[E].addScaledVector(w.sh.coefficients[E],S);else if(w.isDirectionalLight){var k=r.get(w);if(k.color.copy(w.color).multiplyScalar(w.intensity*b),w.castShadow){var A=w.shadow,C=i.get(w);C.shadowBias=A.bias,C.shadowNormalBias=A.normalBias,C.shadowRadius=A.radius,C.shadowMapSize=A.mapSize,a.directionalShadow[h]=C,a.directionalShadowMap[h]=O,a.directionalShadowMatrix[h]=w.shadow.matrix,m++}a.directional[h]=k,h++}else if(w.isSpotLight){var P=r.get(w);if(P.position.setFromMatrixPosition(w.matrixWorld),P.color.copy(T).multiplyScalar(S*b),P.distance=M,P.coneCos=Math.cos(w.angle),P.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),P.decay=w.decay,w.castShadow){var j=w.shadow,L=i.get(w);L.shadowBias=j.bias,L.shadowNormalBias=j.normalBias,L.shadowRadius=j.radius,L.shadowMapSize=j.mapSize,a.spotShadow[d]=L,a.spotShadowMap[d]=O,a.spotShadowMatrix[d]=w.shadow.matrix,y++}a.spot[d]=P,d++}else if(w.isRectAreaLight){var R=r.get(w);R.color.copy(T).multiplyScalar(S),R.halfWidth.set(.5*w.width,0,0),R.halfHeight.set(0,.5*w.height,0),a.rectArea[p]=R,p++}else if(w.isPointLight){var I=r.get(w);if(I.color.copy(w.color).multiplyScalar(w.intensity*b),I.distance=w.distance,I.decay=w.decay,w.castShadow){var D=w.shadow,N=i.get(w);N.shadowBias=D.bias,N.shadowNormalBias=D.normalBias,N.shadowRadius=D.radius,N.shadowMapSize=D.mapSize,N.shadowCameraNear=D.camera.near,N.shadowCameraFar=D.camera.far,a.pointShadow[f]=N,a.pointShadowMap[f]=O,a.pointShadowMatrix[f]=w.shadow.matrix,g++}a.point[f]=I,f++}else if(w.isHemisphereLight){var H=r.get(w);H.skyColor.copy(w.color).multiplyScalar(S*b),H.groundColor.copy(w.groundColor).multiplyScalar(S*b),a.hemi[v]=H,v++}}p>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(a.rectAreaLTC1=Er.LTC_FLOAT_1,a.rectAreaLTC2=Er.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(a.rectAreaLTC1=Er.LTC_HALF_1,a.rectAreaLTC2=Er.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),a.ambient[0]=s,a.ambient[1]=u,a.ambient[2]=l;var G=a.hash;G.directionalLength===h&&G.pointLength===f&&G.spotLength===d&&G.rectAreaLength===p&&G.hemiLength===v&&G.numDirectionalShadows===m&&G.numPointShadows===g&&G.numSpotShadows===y||(a.directional.length=h,a.spot.length=d,a.rectArea.length=p,a.point.length=f,a.hemi.length=v,a.directionalShadow.length=m,a.directionalShadowMap.length=m,a.pointShadow.length=g,a.pointShadowMap.length=g,a.spotShadow.length=y,a.spotShadowMap.length=y,a.directionalShadowMatrix.length=m,a.pointShadowMatrix.length=g,a.spotShadowMatrix.length=y,G.directionalLength=h,G.pointLength=f,G.spotLength=d,G.rectAreaLength=p,G.hemiLength=v,G.numDirectionalShadows=m,G.numPointShadows=g,G.numSpotShadows=y,a.version=Va++)},setupView:function(e,t){for(var n=0,r=0,i=0,o=0,c=0,h=t.matrixWorldInverse,f=0,d=e.length;f<d;f++){var p=e[f];if(p.isDirectionalLight){var v=a.directional[n];v.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),v.direction.sub(s),v.direction.transformDirection(h),n++}else if(p.isSpotLight){var m=a.spot[i];m.position.setFromMatrixPosition(p.matrixWorld),m.position.applyMatrix4(h),m.direction.setFromMatrixPosition(p.matrixWorld),s.setFromMatrixPosition(p.target.matrixWorld),m.direction.sub(s),m.direction.transformDirection(h),i++}else if(p.isRectAreaLight){var g=a.rectArea[o];g.position.setFromMatrixPosition(p.matrixWorld),g.position.applyMatrix4(h),l.identity(),u.copy(p.matrixWorld),u.premultiply(h),l.extractRotation(u),g.halfWidth.set(.5*p.width,0,0),g.halfHeight.set(0,.5*p.height,0),g.halfWidth.applyMatrix4(l),g.halfHeight.applyMatrix4(l),o++}else if(p.isPointLight){var y=a.point[r];y.position.setFromMatrixPosition(p.matrixWorld),y.position.applyMatrix4(h),r++}else if(p.isHemisphereLight){var b=a.hemi[c];b.direction.setFromMatrixPosition(p.matrixWorld),b.direction.transformDirection(h),b.direction.normalize(),c++}}},state:a}}function qa(e,t){var n=new Xa(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Ka(e,t){var n=new WeakMap;return{get:function(r){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(i=new qa(e,t),n.set(r,[i])):a>=n.get(r).length?(i=new qa(e,t),n.get(r).push(i)):i=n.get(r)[a],i},dispose:function(){n=new WeakMap}}}var Ya=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}]),n}(gn);Ya.prototype.isMeshDepthMaterial=!0;var Ja=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="MeshDistanceMaterial",r.referencePosition=new tt,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}]),n}(gn);function Za(e,t,n){var r=new wr,i=new Fe,a=new Fe,o=new Ze,s=new Ya({depthPacking:3201}),u=new Ja,l={},c=n.maxTextureSize,h={0:1,1:0,2:2},f=new lr({uniforms:{shadow_pass:{value:null},resolution:{value:new Fe},radius:{value:4},samples:{value:8}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\nuniform float samples;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=f.clone();d.defines.HORIZONTAL_PASS=1;var p=new Gn;p.setAttribute("position",new kn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var v=new rr(p,f),m=this;function g(n,r){var i=t.update(v);f.uniforms.shadow_pass.value=n.map.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,f.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,f,v,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,d.uniforms.samples.value=n.blurSamples,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,d,v,null)}function y(t,n,r,i,a,o,c){var f=null,d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(f=void 0!==d?d:!0===i.isPointLight?u:s,e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length||r.displacementMap&&0!==r.displacementScale||r.alphaMap&&r.alphaTest>0){var p=f.uuid,v=r.uuid,m=l[p];void 0===m&&(l[p]=m={});var g=m[v];void 0===g&&(g=f.clone(),m[v]=g),f=g}return f.visible=r.visible,f.wireframe=r.wireframe,f.side=3===c?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:h[r.side],f.alphaMap=r.alphaMap,f.alphaTest=r.alphaTest,f.clipShadows=r.clipShadows,f.clippingPlanes=r.clippingPlanes,f.clipIntersection=r.clipIntersection,f.displacementMap=r.displacementMap,f.displacementScale=r.displacementScale,f.displacementBias=r.displacementBias,f.wireframeLinewidth=r.wireframeLinewidth,f.linewidth=r.linewidth,!0===i.isPointLight&&!0===f.isMeshDistanceMaterial&&(f.referencePosition.setFromMatrixPosition(i.matrixWorld),f.nearDistance=a,f.farDistance=o),f}function b(n,i,a,o,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var u=t.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,f=c.length;h<f;h++){var d=c[h],p=l[d.materialIndex];if(p&&p.visible){var v=y(n,0,p,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,v,n,d)}}else if(l.visible){var m=y(n,0,l,o,a.near,a.far,s);e.renderBufferDirect(a,null,u,m,n,null)}}for(var g=n.children,_=0,x=g.length;_<x;_++)b(g[_],i,a,o,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==t.length){var u=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var d=0,p=t.length;d<p;d++){var v=t[d],y=v.shadow;if(void 0!==y){if(!1!==y.autoUpdate||!1!==y.needsUpdate){i.copy(y.mapSize);var _=y.getFrameExtents();if(i.multiply(_),a.copy(y.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(a.x=Math.floor(c/_.x),i.x=a.x*_.x,y.mapSize.x=a.x),i.y>c&&(a.y=Math.floor(c/_.y),i.y=a.y*_.y,y.mapSize.y=a.y)),null===y.map&&!y.isPointLightShadow&&3===this.type){var x={minFilter:$,magFilter:$,format:ue};y.map=new Qe(i.x,i.y,x),y.map.texture.name=v.name+".shadowMap",y.mapPass=new Qe(i.x,i.y,x),y.camera.updateProjectionMatrix()}null===y.map&&(y.map=new Qe(i.x,i.y,{minFilter:J,magFilter:J,format:ue}),y.map.texture.name=v.name+".shadowMap",y.camera.updateProjectionMatrix()),e.setRenderTarget(y.map),e.clear();for(var w=y.getViewportCount(),T=0;T<w;T++){var S=y.getViewport(T);o.set(a.x*S.x,a.y*S.y,a.x*S.z,a.y*S.w),f.viewport(o),y.updateMatrices(v,T),r=y.getFrustum(),b(n,s,y.camera,v,this.type)}y.isPointLightShadow||3!==this.type||g(y,s),y.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}m.needsUpdate=!1,e.setRenderTarget(u,l,h)}}}function Qa(e,t,n){var r,i,a=n.isWebGL2,o=new function(){var t=!1,n=new Ze,r=null,i=new Ze(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},s=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?B(2929):U(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(512);break;case 1:e.depthFunc(519);break;case 2:e.depthFunc(513);break;case 3:e.depthFunc(515);break;case 4:e.depthFunc(514);break;case 5:e.depthFunc(518);break;case 6:e.depthFunc(516);break;case 7:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},u=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(e){t||(e?B(2960):U(2960))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},l={},c=null,h={},f=null,d=!1,p=null,v=null,m=null,g=null,y=null,b=null,_=null,x=!1,w=null,T=null,S=null,M=null,O=null,E=e.getParameter(35661),k=!1,A=0,C=e.getParameter(7938);-1!==C.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(C)[1]),k=A>=1):-1!==C.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),k=A>=2);var P=null,j={},L=e.getParameter(3088),R=e.getParameter(2978),I=(new Ze).fromArray(L),N=(new Ze).fromArray(R);function H(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var G={};function B(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function U(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}G[3553]=H(3553,3553,1),G[34067]=H(34067,34069,6),o.setClear(0,0,0,1),s.setClear(1),u.setClear(0),B(2929),s.setFunc(3),q(!1),K(1),B(2884),X(0);var F=(r={},Object(D.a)(r,z,32774),Object(D.a)(r,101,32778),Object(D.a)(r,102,32779),r);if(a)F[103]=32775,F[104]=32776;else{var V=t.get("EXT_blend_minmax");null!==V&&(F[103]=V.MIN_EXT,F[104]=V.MAX_EXT)}var W=(i={},Object(D.a)(i,200,0),Object(D.a)(i,201,1),Object(D.a)(i,202,768),Object(D.a)(i,204,770),Object(D.a)(i,210,776),Object(D.a)(i,208,774),Object(D.a)(i,206,772),Object(D.a)(i,203,769),Object(D.a)(i,205,771),Object(D.a)(i,209,775),Object(D.a)(i,207,773),i);function X(t,n,r,i,a,o,s,u){if(0!==t){if(!1===d&&(B(3042),d=!0),5===t)a=a||n,o=o||r,s=s||i,n===v&&a===y||(e.blendEquationSeparate(F[n],F[a]),v=n,y=a),r===m&&i===g&&o===b&&s===_||(e.blendFuncSeparate(W[r],W[i],W[o],W[s]),m=r,g=i,b=o,_=s),p=t,x=null;else if(t!==p||u!==x){if(v===z&&y===z||(e.blendEquation(32774),v=z,y=z),u)switch(t){case 1:e.blendFuncSeparate(1,771,1,771);break;case 2:e.blendFunc(1,1);break;case 3:e.blendFuncSeparate(0,0,769,771);break;case 4:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(770,771,1,771);break;case 2:e.blendFunc(770,1);break;case 3:e.blendFunc(0,769);break;case 4:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,b=null,_=null,p=t,x=u}}else!0===d&&(U(3042),d=!1)}function q(t){w!==t&&(e.frontFace(t?2304:2305),w=t)}function K(t){0!==t?(B(2884),t!==T&&e.cullFace(1===t?1029:2===t?1028:1032)):U(2884),T=t}function Y(t,n,r){t?(B(32823),M===n&&O===r||(e.polygonOffset(n,r),M=n,O=r)):U(32823)}function J(t){void 0===t&&(t=33984+E-1),P!==t&&(e.activeTexture(t),P=t)}return{buffers:{color:o,depth:s,stencil:u},enable:B,disable:U,bindFramebuffer:function(t,n){return null===n&&null!==c&&(n=c),h[t]!==n&&(e.bindFramebuffer(t,n),h[t]=n,a&&(36009===t&&(h[36160]=n),36160===t&&(h[36009]=n)),!0)},bindXRFramebuffer:function(t){t!==c&&(e.bindFramebuffer(36160,t),c=t)},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:X,setMaterial:function(e,t){2===e.side?U(2884):B(2884);var n=1===e.side;t&&(n=!n),q(n),1===e.blending&&!1===e.transparent?X(0):X(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),o.setMask(e.colorWrite);var r=e.stencilWrite;u.setTest(r),r&&(u.setMask(e.stencilWriteMask),u.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),u.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Y(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?B(32926):U(32926)},setFlipSided:q,setCullFace:K,setLineWidth:function(t){t!==S&&(k&&e.lineWidth(t),S=t)},setPolygonOffset:Y,setScissorTest:function(e){e?B(3089):U(3089)},activeTexture:J,bindTexture:function(t,n){null===P&&J();var r=j[P];void 0===r&&(j[P]=r={type:void 0,texture:void 0}),r.type===t&&r.texture===n||(e.bindTexture(t,n||G[t]),r.type=t,r.texture=n)},unbindTexture:function(){var t=j[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===a&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},P=null,j={},c=null,h={},f=null,d=!1,p=null,v=null,m=null,g=null,y=null,b=null,_=null,x=!1,w=null,T=null,S=null,M=null,O=null,I.set(0,0,e.canvas.width,e.canvas.height),N.set(0,0,e.canvas.width,e.canvas.height),o.reset(),s.reset(),u.reset()}}}function $a(e,t,n,r,i,a,o){var s,u,l,c=i.isWebGL2,h=i.maxTextures,f=i.maxCubemapSize,d=i.maxTextureSize,p=i.maxSamples,v=new WeakMap,m=!1;try{m="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(B){}function g(e,t){return m?new OffscreenCanvas(e,t):Xe("canvas")}function y(e,t,n,r){var i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var a=t?Be:Math.floor,o=a(i*e.width),s=a(i*e.height);void 0===l&&(l=g(o,s));var u=n?g(o,s):l;return u.width=o,u.height=s,u.getContext("2d").drawImage(e,0,0,o,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+s+")."),u}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return He(e.width)&&He(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==J&&e.minFilter!==$}function x(t,n,i,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.generateMipmap(t);var s=r.get(n);s.__maxMipLevel=Math.log2(Math.max(i,a,o))}function w(n,r,i,a){if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=a===_e?35907:32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||t.get("EXT_color_buffer_float"),o}function T(e){return e===J||e===Z||e===Q?9728:9729}function S(t){var n=t.target;n.removeEventListener("dispose",S),function(t){var n=r.get(t);void 0!==n.__webglInit&&(e.deleteTexture(n.__webglTexture),r.remove(t))}(n),n.isVideoTexture&&v.delete(n),o.memory.textures--}function M(t){var n=t.target;n.removeEventListener("dispose",M),function(t){var n=t.texture,i=r.get(t),a=r.get(n);if(t){if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),o.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)e.deleteFramebuffer(i.__webglFramebuffer[s]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[s]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(var u=0,l=n.length;u<l;u++){var c=r.get(n[u]);c.__webglTexture&&(e.deleteTexture(c.__webglTexture),o.memory.textures--),r.remove(n[u])}r.remove(n),r.remove(t)}}(n)}var O=0;function E(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=o.render.frame;v.get(e)!==t&&(v.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void L(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function k(t,i){var o=r.get(t);t.version>0&&o.__version!==t.version?function(t,r,i){if(6===r.image.length){j(t,r),n.activeTexture(33984+i),n.bindTexture(34067,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);for(var o=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),s=r.image[0]&&r.image[0].isDataTexture,u=[],l=0;l<6;l++)u[l]=o||s?s?r.image[l].image:r.image[l]:y(r.image[l],!1,!0,f);var h,d=u[0],p=b(d)||c,v=a.convert(r.format),m=a.convert(r.type),g=w(r.internalFormat,v,m,r.encoding);if(P(34067,r,p),o){for(var T=0;T<6;T++){h=u[T].mipmaps;for(var S=0;S<h.length;S++){var M=h[S];r.format!==ue&&r.format!==se?null!==v?n.compressedTexImage2D(34069+T,S,g,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+T,S,g,M.width,M.height,0,v,m,M.data)}}t.__maxMipLevel=h.length-1}else{h=r.mipmaps;for(var O=0;O<6;O++)if(s){n.texImage2D(34069+O,0,g,u[O].width,u[O].height,0,v,m,u[O].data);for(var E=0;E<h.length;E++){var k=h[E].image[O].image;n.texImage2D(34069+O,E+1,g,k.width,k.height,0,v,m,k.data)}}else{n.texImage2D(34069+O,0,g,v,m,u[O]);for(var A=0;A<h.length;A++)n.texImage2D(34069+O,A+1,g,v,m,h[A].image[O])}t.__maxMipLevel=h.length}_(r,p)&&x(34067,r,d.width,d.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}}(o,t,i):(n.activeTexture(33984+i),n.bindTexture(34067,o.__webglTexture))}var A=(s={},Object(D.a)(s,q,10497),Object(D.a)(s,K,33071),Object(D.a)(s,Y,33648),s),C=(u={},Object(D.a)(u,J,9728),Object(D.a)(u,Z,9984),Object(D.a)(u,Q,9986),Object(D.a)(u,$,9729),Object(D.a)(u,1007,9985),Object(D.a)(u,ee,9987),u);function P(n,a,o){if(o?(e.texParameteri(n,10242,A[a.wrapS]),e.texParameteri(n,10243,A[a.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,A[a.wrapR]),e.texParameteri(n,10240,C[a.magFilter]),e.texParameteri(n,10241,C[a.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),a.wrapS===K&&a.wrapT===K||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,T(a.magFilter)),e.texParameteri(n,10241,T(a.minFilter)),a.minFilter!==J&&a.minFilter!==$&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){var s=t.get("EXT_texture_filter_anisotropic");if(a.type===ie&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&a.type===ae&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||r.get(a).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,i.getMaxAnisotropy())),r.get(a).__currentAnisotropy=a.anisotropy)}}function j(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",S),t.__webglTexture=e.createTexture(),o.memory.textures++)}function L(t,r,i){var o=3553;r.isDataTexture2DArray&&(o=35866),r.isDataTexture3D&&(o=32879),j(t,r),n.activeTexture(33984+i),n.bindTexture(o,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);var s,u=function(e){return!c&&(e.wrapS!==K||e.wrapT!==K||e.minFilter!==J&&e.minFilter!==$)}(r)&&!1===b(r.image),l=y(r.image,u,!1,d),h=b(l)||c,f=a.convert(r.format),p=a.convert(r.type),v=w(r.internalFormat,f,p,r.encoding);P(o,r,h);var m=r.mipmaps;if(r.isDepthTexture)v=6402,c?v=r.type===ie?36012:r.type===re?33190:r.type===oe?35056:33189:r.type===ie&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===le&&6402===v&&r.type!==ne&&r.type!==re&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=ne,p=a.convert(r.type)),r.format===ce&&6402===v&&(v=34041,r.type!==oe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=oe,p=a.convert(r.type))),n.texImage2D(3553,0,v,l.width,l.height,0,f,p,null);else if(r.isDataTexture)if(m.length>0&&h){for(var g=0,T=m.length;g<T;g++)n.texImage2D(3553,g,v,(s=m[g]).width,s.height,0,f,p,s.data);r.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,l.width,l.height,0,f,p,l.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(var S=0,M=m.length;S<M;S++)s=m[S],r.format!==ue&&r.format!==se?null!==f?n.compressedTexImage2D(3553,S,v,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,S,v,s.width,s.height,0,f,p,s.data);t.__maxMipLevel=m.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,v,l.width,l.height,l.depth,0,f,p,l.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,v,l.width,l.height,l.depth,0,f,p,l.data),t.__maxMipLevel=0;else if(m.length>0&&h){for(var O=0,E=m.length;O<E;O++)n.texImage2D(3553,O,v,f,p,s=m[O]);r.generateMipmaps=!1,t.__maxMipLevel=m.length-1}else n.texImage2D(3553,0,v,f,p,l),t.__maxMipLevel=0;_(r,h)&&x(o,r,l.width,l.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function R(t,i,o,s,u){var l=a.convert(o.format),c=a.convert(o.type),h=w(o.internalFormat,l,c,o.encoding);32879===u||35866===u?n.texImage3D(u,0,h,i.width,i.height,i.depth,0,l,c,null):n.texImage2D(u,0,h,i.width,i.height,0,l,c,null),n.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,s,u,r.get(o).__webglTexture,0),n.bindFramebuffer(36160,null)}function I(t,n,r){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===ie?i=36012:o.type===re&&(i=33190));var s=N(n);e.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else e.renderbufferStorage(36161,i,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){var u=N(n);e.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else e.renderbufferStorage(36161,34041,n.width,n.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var l=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,c=a.convert(l.format),h=a.convert(l.type),f=w(l.internalFormat,c,h,l.encoding);if(r){var d=N(n);e.renderbufferStorageMultisample(36161,d,f,n.width,n.height)}else e.renderbufferStorage(36161,f,n.width,n.height)}e.bindRenderbuffer(36161,null)}function N(e){return c&&e.isWebGLMultisampleRenderTarget?Math.min(p,e.samples):0}var H=!1,G=!1;this.allocateTextureUnit=function(){var e=O;return e>=h&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+h),O+=1,e},this.resetTextureUnits=function(){O=0},this.setTexture2D=E,this.setTexture2DArray=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?L(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=k,this.setupRenderTarget=function(t){var s=t.texture,u=r.get(t),l=r.get(s);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(l.__webglTexture=e.createTexture(),l.__version=s.version,o.memory.textures++);var h=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,d=!0===t.isWebGLMultisampleRenderTarget,p=s.isDataTexture3D||s.isDataTexture2DArray,v=b(t)||c;if(!c||s.format!==se||s.type!==ie&&s.type!==ae||(s.format=ue,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),h){u.__webglFramebuffer=[];for(var m=0;m<6;m++)u.__webglFramebuffer[m]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers)for(var g=t.texture,y=0,T=g.length;y<T;y++){var S=r.get(g[y]);void 0===S.__webglTexture&&(S.__webglTexture=e.createTexture(),o.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(d)if(c){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,u.__webglColorRenderbuffer);var O=a.convert(s.format),k=a.convert(s.type),A=w(s.internalFormat,O,k,s.encoding),C=N(t);e.renderbufferStorageMultisample(36161,C,A,t.width,t.height),n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,u.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),I(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(h){n.bindTexture(34067,l.__webglTexture),P(34067,s,v);for(var j=0;j<6;j++)R(u.__webglFramebuffer[j],t,s,36064,34069+j);_(s,v)&&x(34067,s,t.width,t.height),n.unbindTexture()}else if(f){for(var L=t.texture,D=0,H=L.length;D<H;D++){var G=L[D],B=r.get(G);n.bindTexture(3553,B.__webglTexture),P(3553,G,v),R(u.__webglFramebuffer,t,G,36064+D,3553),_(G,v)&&x(3553,G,t.width,t.height)}n.unbindTexture()}else{var U=3553;p&&(c?U=s.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(U,l.__webglTexture),P(U,s,v),R(u.__webglFramebuffer,t,s,36064,U),_(s,v)&&x(U,s,t.width,t.height,t.depth),n.unbindTexture()}t.depthBuffer&&function(t){var i=r.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),E(i.depthTexture,0);var a=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===le)e.framebufferTexture2D(36160,36096,3553,a,0);else{if(i.depthTexture.format!==ce)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,a,0)}}(i.__webglFramebuffer,t)}else if(a){i.__webglDepthbuffer=[];for(var o=0;o<6;o++)n.bindFramebuffer(36160,i.__webglFramebuffer[o]),i.__webglDepthbuffer[o]=e.createRenderbuffer(),I(i.__webglDepthbuffer[o],t,!1)}else n.bindFramebuffer(36160,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),I(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}(t)},this.updateRenderTargetMipmap=function(e){for(var t=b(e)||c,i=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture],a=0,o=i.length;a<o;a++){var s=i[a];if(_(s,t)){var u=e.isWebGLCubeRenderTarget?34067:3553,l=r.get(s).__webglTexture;n.bindTexture(u,l),x(u,s,e.width,e.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(c){var i=t.width,a=t.height,o=16384;t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024);var s=r.get(t);n.bindFramebuffer(36008,s.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,a,0,0,i,a,o,9728),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,s.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===H&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),H=!0),e=e.texture),E(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===G&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),G=!0),e=e.texture),k(e,t)}}function eo(e,t,n){var r=n.isWebGL2;return{convert:function(e){var n;if(e===te)return 5121;if(1017===e)return 32819;if(1018===e)return 32820;if(1019===e)return 33635;if(1010===e)return 5120;if(1011===e)return 5122;if(e===ne)return 5123;if(1013===e)return 5124;if(e===re)return 5125;if(e===ie)return 5126;if(e===ae)return r?5131:null!==(n=t.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===e)return 6406;if(e===se)return 6407;if(e===ue)return 6408;if(1024===e)return 6409;if(1025===e)return 6410;if(e===le)return 6402;if(e===ce)return 34041;if(1028===e)return 6403;if(1029===e)return 36244;if(1030===e)return 33319;if(1031===e)return 33320;if(1032===e)return 36248;if(1033===e)return 36249;if(33776===e||33777===e||33778===e||33779===e){if(null===(n=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===e)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===e)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===e)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===e)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===e||35841===e||35842===e||35843===e){if(null===(n=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===e)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===e)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===e)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===e)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===e)return null!==(n=t.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===e||37496===e)&&null!==(n=t.get("WEBGL_compressed_texture_etc"))){if(37492===e)return n.COMPRESSED_RGB8_ETC2;if(37496===e)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===e||37809===e||37810===e||37811===e||37812===e||37813===e||37814===e||37815===e||37816===e||37817===e||37818===e||37819===e||37820===e||37821===e||37840===e||37841===e||37842===e||37843===e||37844===e||37845===e||37846===e||37847===e||37848===e||37849===e||37850===e||37851===e||37852===e||37853===e?null!==(n=t.get("WEBGL_compressed_texture_astc"))?e:null:36492===e?null!==(n=t.get("EXT_texture_compression_bptc"))?e:null:e===oe?r?34042:null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}Ja.prototype.isMeshDistanceMaterial=!0;var to=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(p.a)(this,n),(e=t.call(this)).cameras=r,e}return n}(hr);to.prototype.isArrayCamera=!0;var no=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).type="Group",e}return n}(rn);no.prototype.isGroup=!0;var ro={type:"move"},io=function(){function e(){Object(p.a)(this,e),this._targetRay=null,this._grip=null,this._hand=null}return Object(v.a)(e,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new no,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new no,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new tt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new tt),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new no,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new tt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new tt),this._grip}},{key:"dispatchEvent",value:function(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}},{key:"disconnect",value:function(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(e,t,n){var r=null,i=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==o&&null!==(r=t.getPose(e.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(ro)),u&&e.hand){a=!0;var l,c=Object(I.a)(e.hand.values());try{for(c.s();!(l=c.n()).done;){var h=l.value,f=t.getJointPose(h,n);if(void 0===u.joints[h.jointName]){var d=new no;d.matrixAutoUpdate=!1,d.visible=!1,u.joints[h.jointName]=d,u.add(d)}var p=u.joints[h.jointName];null!==f&&(p.matrix.fromArray(f.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.jointRadius=f.radius),p.visible=null!==f}}catch(m){c.e(m)}finally{c.f()}var v=u.joints["index-finger-tip"].position.distanceTo(u.joints["thumb-tip"].position);u.inputState.pinching&&v>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&v<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&null!==(i=t.getPose(e.gripSpace,n))&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1);return null!==o&&(o.visible=null!==r),null!==s&&(s.visible=null!==i),null!==u&&(u.visible=null!==a),this}}]),e}(),ao=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i;Object(p.a)(this,n),i=t.call(this);var a=Object(b.a)(i),o=e.state,s=null,u=1,l=null,c="local-floor",h=null,f=null,d=null,v=null,m=null,g=!1,y=null,_=null,x=null,w=null,T=null,S=null,M=[],O=new Map,E=new hr;E.layers.enable(1),E.viewport=new Ze;var k=new hr;k.layers.enable(2),k.viewport=new Ze;var A=[E,k],C=new to;C.layers.enable(1),C.layers.enable(2);var P=null,j=null;function L(e){var t=O.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function I(){O.forEach(function(e,t){e.disconnect(t)}),O.clear(),P=null,j=null,o.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),d&&r.deleteFramebuffer(d),y&&r.deleteFramebuffer(y),_&&r.deleteRenderbuffer(_),x&&r.deleteRenderbuffer(x),d=null,y=null,_=null,x=null,m=null,v=null,f=null,s=null,U.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function D(e){for(var t=s.inputSources,n=0;n<M.length;n++)O.set(t[n],M[n]);for(var r=0;r<e.removed.length;r++){var i=e.removed[r],a=O.get(i);a&&(a.dispatchEvent({type:"disconnected",data:i}),O.delete(i))}for(var o=0;o<e.added.length;o++){var u=e.added[o],l=O.get(u);l&&l.dispatchEvent({type:"connected",data:u})}}i.cameraAutoUpdate=!0,i.enabled=!1,i.isPresenting=!1,i.getController=function(e){var t=M[e];return void 0===t&&(t=new io,M[e]=t),t.getTargetRaySpace()},i.getControllerGrip=function(e){var t=M[e];return void 0===t&&(t=new io,M[e]=t),t.getGripSpace()},i.getHand=function(e){var t=M[e];return void 0===t&&(t=new io,M[e]=t),t.getHandSpace()},i.setFramebufferScaleFactor=function(e){u=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},i.setReferenceSpaceType=function(e){c=e,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},i.getReferenceSpace=function(){return l},i.getBaseLayer=function(){return null!==v?v:m},i.getBinding=function(){return f},i.getFrame=function(){return w},i.getSession=function(){return s},i.setSession=function(){var e,t=(e=F.a.mark(function e(t){var n,i,h;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(s=t)){e.next=22;break}if(s.addEventListener("select",L),s.addEventListener("selectstart",L),s.addEventListener("selectend",L),s.addEventListener("squeeze",L),s.addEventListener("squeezestart",L),s.addEventListener("squeezeend",L),s.addEventListener("end",I),s.addEventListener("inputsourceschange",D),!0===(n=r.getContextAttributes()).xrCompatible){e.next=14;break}return e.next=14,r.makeXRCompatible();case 14:return void 0===s.renderState.layers?(m=new XRWebGLLayer(s,r,{antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:u}),s.updateRenderState({baseLayer:m})):r instanceof WebGLRenderingContext?(m=new XRWebGLLayer(s,r,{antialias:!0,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:u}),s.updateRenderState({layers:[m]})):(g=n.antialias,i=null,n.depth&&(S=256,n.stencil&&(S|=1024),T=n.stencil?33306:36096,i=n.stencil?35056:33190),h={colorFormat:n.alpha?32856:32849,depthFormat:i,scaleFactor:u},f=new XRWebGLBinding(s,r),v=f.createProjectionLayer(h),d=r.createFramebuffer(),s.updateRenderState({layers:[v]}),g&&(y=r.createFramebuffer(),_=r.createRenderbuffer(),r.bindRenderbuffer(36161,_),r.renderbufferStorageMultisample(36161,4,32856,v.textureWidth,v.textureHeight),o.bindFramebuffer(36160,y),r.framebufferRenderbuffer(36160,36064,36161,_),r.bindRenderbuffer(36161,null),null!==i&&(x=r.createRenderbuffer(),r.bindRenderbuffer(36161,x),r.renderbufferStorageMultisample(36161,4,i,v.textureWidth,v.textureHeight),r.framebufferRenderbuffer(36160,T,36161,x),r.bindRenderbuffer(36161,null)),o.bindFramebuffer(36160,null))),e.next=17,s.requestReferenceSpace(c);case 17:l=e.sent,U.setContext(s),U.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 22:case"end":return e.stop()}},e)}),function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){R(a,r,i,o,s,"next",e)}function s(e){R(a,r,i,o,s,"throw",e)}o(void 0)})});return function(e){return t.apply(this,arguments)}}();var N=new tt,H=new tt;function G(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}i.updateCamera=function(e){if(null!==s){C.near=k.near=E.near=e.near,C.far=k.far=E.far=e.far,P===C.near&&j===C.far||(s.updateRenderState({depthNear:C.near,depthFar:C.far}),P=C.near,j=C.far);var t=e.parent,n=C.cameras;G(C,t);for(var r=0;r<n.length;r++)G(n[r],t);C.matrixWorld.decompose(C.position,C.quaternion,C.scale),e.position.copy(C.position),e.quaternion.copy(C.quaternion),e.scale.copy(C.scale),e.matrix.copy(C.matrix),e.matrixWorld.copy(C.matrixWorld);for(var i=e.children,a=0,o=i.length;a<o;a++)i[a].updateMatrixWorld(!0);2===n.length?function(e,t,n){N.setFromMatrixPosition(t.matrixWorld),H.setFromMatrixPosition(n.matrixWorld);var r=N.distanceTo(H),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(a[8]+1)/a[0],f=o*c,d=o*h,p=r/(-c+h),v=p*-c;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(v),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();var m=o+p,g=s+p;e.projectionMatrix.makePerspective(f-v,d+(r-v),u*s/g*m,l*s/g*m,m,g)}(C,E,k):C.projectionMatrix.copy(E.projectionMatrix)}},i.getCamera=function(){return C},i.getFoveation=function(){return null!==v?v.fixedFoveation:null!==m?m.fixedFoveation:void 0},i.setFoveation=function(e){null!==v&&(v.fixedFoveation=e),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=e)};var B=null,U=new Tr;return U.setAnimationLoop(function(e,t){if(h=t.getViewerPose(l),w=t,null!==h){var n=h.views;null!==m&&o.bindXRFramebuffer(m.framebuffer);var i=!1;n.length!==C.cameras.length&&(C.cameras.length=0,i=!0);for(var a=0;a<n.length;a++){var u=n[a],c=null;if(null!==m)c=m.getViewport(u);else{var p=f.getViewSubImage(v,u);o.bindXRFramebuffer(d),void 0!==p.depthStencilTexture&&r.framebufferTexture2D(36160,T,3553,p.depthStencilTexture,0),r.framebufferTexture2D(36160,36064,3553,p.colorTexture,0),c=p.viewport}var b=A[a];b.matrix.fromArray(u.transform.matrix),b.projectionMatrix.fromArray(u.projectionMatrix),b.viewport.set(c.x,c.y,c.width,c.height),0===a&&C.matrix.copy(b.matrix),!0===i&&C.cameras.push(b)}g&&(o.bindXRFramebuffer(y),null!==S&&r.clear(S))}for(var _=s.inputSources,x=0;x<M.length;x++)M[x].update(_[x],t,l);if(B&&B(e,t),g){var O=v.textureWidth,E=v.textureHeight;o.bindFramebuffer(36008,y),o.bindFramebuffer(36009,d),r.invalidateFramebuffer(36008,[T]),r.invalidateFramebuffer(36009,[T]),r.blitFramebuffer(0,0,O,E,0,0,O,E,16384,9728),r.invalidateFramebuffer(36008,[36064]),o.bindFramebuffer(36008,null),o.bindFramebuffer(36009,null),o.bindFramebuffer(36160,y)}w=null}),i.setAnimationLoop=function(e){B=e},i.dispose=function(){},i}return n}(Ee);function oo(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);var r,i,a=e.get(n).envMap;if(a){t.envMap.value=a,t.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio;var o=e.get(a).__maxMipLevel;void 0!==o&&(t.maxMipLevel.value=o)}n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularTintMap?r=n.specularTintMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap&&(r=n.thicknessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),n.aoMap?i=n.aoMap:n.lightMap&&(i=n.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,1===n.side&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),1===n.side&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,a,o){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenTint.value.copy(t.sheenTint).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,1===t.side&&e.clearcoatNormalScale.value.negate())),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationTint.value.copy(t.attenuationTint)),e.specularIntensity.value=t.specularIntensity,e.specularTint.value.copy(t.specularTint),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap),t.specularTintMap&&(e.specularTintMap.value=t.specularTintMap)}(e,r,o):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){var i;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?i=t.map:t.alphaMap&&(i=t.alphaMap),void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,a):r.isSpriteMaterial?function(e,t){var n;e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest),t.map?n=t.map:t.alphaMap&&(n=t.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function so(){var e=Xe("canvas");return e.style.display="block",e}function uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=void 0!==e.canvas?e.canvas:so(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,f=null,d=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=be,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var v=this,m=!1,g=0,y=0,b=null,_=-1,x=null,w=new Ze,T=new Ze,S=null,M=t.width,O=t.height,E=1,k=null,A=null,C=new Ze(0,0,M,O),P=new Ze(0,0,M,O),j=!1,L=[],R=new wr,I=!1,D=!1,N=null,H=new jt,G=new tt,B={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function U(){return null===b?E:1}var F,z,V,W,X,q,Y,Z,Q,$,ne,re,oe,se,le,ce,he,fe,de,pe,ve,me,ge,ye=n;function _e(e,n){for(var r=0;r<e.length;r++){var i=t.getContext(e[r],n);if(null!==i)return i}return null}try{var xe={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",Me,!1),t.addEventListener("webglcontextrestored",Oe,!1),null===ye){var we=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&we.shift(),null===(ye=_e(we,xe)))throw _e(we)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ye.getShaderPrecisionFormat&&(ye.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Xe){throw console.error("THREE.WebGLRenderer: "+Xe.message),Xe}function Te(){F=new ai(ye),z=new jr(ye,F,e),F.init(z),me=new eo(ye,F,z),V=new Qa(ye,F,z),L[0]=1029,W=new ui(ye),X=new Ha,q=new $a(ye,F,V,X,z,me,W),Y=new Rr(v),Z=new ii(v),Q=new Sr(ye,z),ge=new Cr(ye,F,Q,z),$=new oi(ye,Q,W,ge),ne=new pi(ye,$,Q,W),de=new di(ye,z,q),ce=new Lr(X),re=new Na(v,Y,Z,F,z,ge,ce),oe=new oo(X),se=new Fa(X),le=new Ka(F,z),fe=new Ar(v,Y,V,ne,s),he=new Za(v,ne,z),pe=new Pr(ye,F,W,z),ve=new si(ye,F,W,z),W.programs=re.programs,v.capabilities=z,v.extensions=F,v.properties=X,v.renderLists=se,v.shadowMap=he,v.state=V,v.info=W}Te();var Se=new ao(v,ye);function Me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Oe(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var e=W.autoReset,t=he.enabled,n=he.autoUpdate,r=he.needsUpdate,i=he.type;Te(),W.autoReset=e,he.enabled=t,he.autoUpdate=n,he.needsUpdate=r,he.type=i}function Ee(e){var t=e.target;t.removeEventListener("dispose",Ee),ke(t)}function ke(e){Ae(e),X.remove(e)}function Ae(e){var t=X.get(e).programs;void 0!==t&&t.forEach(function(e){re.releaseProgram(e)})}function Ce(e,t){e.render(function(e){v.renderBufferImmediate(e,t)})}this.xr=Se,this.getContext=function(){return ye},this.getContextAttributes=function(){return ye.getContextAttributes()},this.forceContextLoss=function(){var e=F.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=F.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return E},this.setPixelRatio=function(e){void 0!==e&&(E=e,this.setSize(M,O,!1))},this.getSize=function(e){return e.set(M,O)},this.setSize=function(e,n,r){Se.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(M=e,O=n,t.width=Math.floor(e*E),t.height=Math.floor(n*E),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(M*E,O*E).floor()},this.setDrawingBufferSize=function(e,n,r){M=e,O=n,E=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(C)},this.setViewport=function(e,t,n,r){e.isVector4?C.set(e.x,e.y,e.z,e.w):C.set(e,t,n,r),V.viewport(w.copy(C).multiplyScalar(E).floor())},this.getScissor=function(e){return e.copy(P)},this.setScissor=function(e,t,n,r){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,r),V.scissor(T.copy(P).multiplyScalar(E).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(e){V.setScissorTest(j=e)},this.setOpaqueSort=function(e){k=e},this.setTransparentSort=function(e){A=e},this.getClearColor=function(e){return e.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),ye.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Me,!1),t.removeEventListener("webglcontextrestored",Oe,!1),se.dispose(),le.dispose(),X.dispose(),Y.dispose(),Z.dispose(),ne.dispose(),ge.dispose(),Se.dispose(),Se.removeEventListener("sessionstart",Le),Se.removeEventListener("sessionend",Re),N&&(N.dispose(),N=null),Ie.stop()},this.renderBufferImmediate=function(e,t){ge.initAttributes();var n=X.get(e);e.hasPositions&&!n.position&&(n.position=ye.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=ye.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=ye.createBuffer()),e.hasColors&&!n.color&&(n.color=ye.createBuffer());var r=t.getAttributes();e.hasPositions&&(ye.bindBuffer(34962,n.position),ye.bufferData(34962,e.positionArray,35048),ge.enableAttribute(r.position.location),ye.vertexAttribPointer(r.position.location,3,5126,!1,0,0)),e.hasNormals&&(ye.bindBuffer(34962,n.normal),ye.bufferData(34962,e.normalArray,35048),ge.enableAttribute(r.normal.location),ye.vertexAttribPointer(r.normal.location,3,5126,!1,0,0)),e.hasUvs&&(ye.bindBuffer(34962,n.uv),ye.bufferData(34962,e.uvArray,35048),ge.enableAttribute(r.uv.location),ye.vertexAttribPointer(r.uv.location,2,5126,!1,0,0)),e.hasColors&&(ye.bindBuffer(34962,n.color),ye.bufferData(34962,e.colorArray,35048),ge.enableAttribute(r.color.location),ye.vertexAttribPointer(r.color.location,3,5126,!1,0,0)),ge.disableUnusedAttributes(),ye.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,a){null===t&&(t=B);var o=i.isMesh&&i.matrixWorld.determinant()<0,s=ze(e,t,n,r,i);V.setMaterial(r,o);var u=n.index,l=n.attributes.position;if(null===u){if(void 0===l||0===l.count)return}else if(0===u.count)return;var c,h=1;!0===r.wireframe&&(u=$.getWireframeAttribute(n),h=2),ge.setup(i,r,s,n,u);var f=pe;null!==u&&(c=Q.get(u),(f=ve).setIndex(c));var d=null!==u?u.count:l.count,p=n.drawRange.start*h,v=n.drawRange.count*h,m=null!==a?a.start*h:0,g=null!==a?a.count*h:1/0,y=Math.max(p,m),b=Math.min(d,p+v,m+g)-1,_=Math.max(0,b-y+1);if(0!==_){if(i.isMesh)!0===r.wireframe?(V.setLineWidth(r.wireframeLinewidth*U()),f.setMode(1)):f.setMode(4);else if(i.isLine){var x=r.linewidth;void 0===x&&(x=1),V.setLineWidth(x*U()),f.setMode(i.isLineSegments?1:i.isLineLoop?2:3)}else i.isPoints?f.setMode(0):i.isSprite&&f.setMode(4);if(i.isInstancedMesh)f.renderInstances(y,_,i.count);else if(n.isInstancedBufferGeometry){var w=Math.min(n.instanceCount,n._maxInstanceCount);f.renderInstances(y,_,w)}else f.render(y,_)}},this.compile=function(e,t){(f=le.get(e)).init(),p.push(f),e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(f.pushLight(e),e.castShadow&&f.pushShadow(e))}),f.setupLights(v.physicallyCorrectLights),e.traverse(function(t){var n=t.material;if(n)if(Array.isArray(n))for(var r=0;r<n.length;r++)Ue(n[r],e,t);else Ue(n,e,t)}),p.pop(),f=null};var Pe=null;function je(e){Pe&&Pe(e)}function Le(){Ie.stop()}function Re(){Ie.start()}var Ie=new Tr;function De(e,t,n,r){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)f.pushLight(e),e.castShadow&&f.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||R.intersectsSprite(e)){r&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);var i=ne.update(e),a=e.material;a.visible&&h.push(e,i,a,n,G.z,null)}}else if(e.isImmediateRenderObject)r&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H),h.push(e,null,e.material,n,G.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||R.intersectsObject(e))){r&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);var o=ne.update(e),s=e.material;if(Array.isArray(s))for(var u=o.groups,l=0,c=u.length;l<c;l++){var d=u[l],p=s[d.materialIndex];p&&p.visible&&h.push(e,o,p,n,G.z,d)}else s.visible&&h.push(e,o,s,n,G.z,null)}for(var v=e.children,m=0,g=v.length;m<g;m++)De(v[m],t,n,r)}}function Ne(e,t,n,r){var i=e.opaque,a=e.transmissive,o=e.transparent;f.setupLightsView(n),a.length>0&&He(i,t,n),r&&V.viewport(w.copy(r)),i.length>0&&Ge(i,t,n),a.length>0&&Ge(a,t,n),o.length>0&&Ge(o,t,n)}function He(e,t,n){null===N&&(N=new(!0===o&&!0===z.isWebGL2?$e:Qe)(1024,1024,{generateMipmaps:!0,type:null!==me.convert(ae)?ae:te,minFilter:ee,magFilter:J,wrapS:K,wrapT:K}));var r=v.getRenderTarget();v.setRenderTarget(N),v.clear();var i=v.toneMapping;v.toneMapping=0,Ge(e,t,n),v.toneMapping=i,q.updateMultisampleRenderTarget(N),q.updateRenderTargetMipmap(N),v.setRenderTarget(r)}function Ge(e,t,n){for(var r=!0===t.isScene?t.overrideMaterial:null,i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&Be(s,t,n,u,l,c)}}function Be(e,t,n,r,i,a){if(e.onBeforeRender(v,t,n,r,i,a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(v,t,n,r,e,a),e.isImmediateRenderObject){var o=ze(n,t,r,i,e);V.setMaterial(i),ge.reset(),Ce(e,o)}else!0===i.transparent&&2===i.side?(i.side=1,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=0,i.needsUpdate=!0,v.renderBufferDirect(n,t,r,i,e,a),i.side=2):v.renderBufferDirect(n,t,r,i,e,a);e.onAfterRender(v,t,n,r,i,a)}function Ue(e,t,n){!0!==t.isScene&&(t=B);var r=X.get(e),i=f.state.lights,a=i.state.version,o=re.getParameters(e,i.state,f.state.shadowsArray,t,n),s=re.getProgramCacheKey(o),u=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?Z:Y).get(e.envMap||r.environment),void 0===u&&(e.addEventListener("dispose",Ee),u=new Map,r.programs=u);var l=u.get(s);if(void 0!==l){if(r.currentProgram===l&&r.lightsStateVersion===a)return Fe(e,o),l}else o.uniforms=re.getUniforms(e),e.onBuild(o,v),e.onBeforeCompile(o,v),l=re.acquireProgram(o,s),u.set(s,l),r.uniforms=o.uniforms;var c=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(c.clippingPlanes=ce.uniform),Fe(e,o),r.needsLights=We(e),r.lightsStateVersion=a,r.needsLights&&(c.ambientLightColor.value=i.state.ambient,c.lightProbe.value=i.state.probe,c.directionalLights.value=i.state.directional,c.directionalLightShadows.value=i.state.directionalShadow,c.spotLights.value=i.state.spot,c.spotLightShadows.value=i.state.spotShadow,c.rectAreaLights.value=i.state.rectArea,c.ltc_1.value=i.state.rectAreaLTC1,c.ltc_2.value=i.state.rectAreaLTC2,c.pointLights.value=i.state.point,c.pointLightShadows.value=i.state.pointShadow,c.hemisphereLights.value=i.state.hemi,c.directionalShadowMap.value=i.state.directionalShadowMap,c.directionalShadowMatrix.value=i.state.directionalShadowMatrix,c.spotShadowMap.value=i.state.spotShadowMap,c.spotShadowMatrix.value=i.state.spotShadowMatrix,c.pointShadowMap.value=i.state.pointShadowMap,c.pointShadowMatrix.value=i.state.pointShadowMatrix);var h=l.getUniforms(),d=ga.seqWithValue(h.seq,c);return r.currentProgram=l,r.uniformsList=d,l}function Fe(e,t){var n=X.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}function ze(e,t,n,r,i){!0!==t.isScene&&(t=B),q.resetTextureUnits();var a=t.fog,o=null===b?v.outputEncoding:b.texture.encoding,s=(r.isMeshStandardMaterial?Z:Y).get(r.envMap||(r.isMeshStandardMaterial?t.environment:null)),u=!0===r.vertexColors&&!!n&&!!n.attributes.color&&4===n.attributes.color.itemSize,l=!!r.normalMap&&!!n&&!!n.attributes.tangent,c=!!n&&!!n.morphAttributes.position,h=!!n&&!!n.morphAttributes.normal,d=n&&n.morphAttributes.position?n.morphAttributes.position.length:0,p=X.get(r),m=f.state.lights;!0===I&&(!0!==D&&e===x||ce.setState(r,e,e===x&&r.id===_));var g=!1;r.version===p.__version?p.needsLights&&p.lightsStateVersion!==m.state.version||p.outputEncoding!==o||i.isInstancedMesh&&!1===p.instancing?g=!0:i.isInstancedMesh||!0!==p.instancing?i.isSkinnedMesh&&!1===p.skinning?g=!0:i.isSkinnedMesh||!0!==p.skinning?p.envMap!==s||r.fog&&p.fog!==a?g=!0:void 0===p.numClippingPlanes||p.numClippingPlanes===ce.numPlanes&&p.numIntersection===ce.numIntersection?(p.vertexAlphas!==u||p.vertexTangents!==l||p.morphTargets!==c||p.morphNormals!==h||!0===z.isWebGL2&&p.morphTargetsCount!==d)&&(g=!0):g=!0:g=!0:g=!0:(g=!0,p.__version=r.version);var y=p.currentProgram;!0===g&&(y=Ue(r,t,i));var w=!1,T=!1,S=!1,M=y.getUniforms(),k=p.uniforms;if(V.useProgram(y.program)&&(w=!0,T=!0,S=!0),r.id!==_&&(_=r.id,T=!0),w||x!==e){if(M.setValue(ye,"projectionMatrix",e.projectionMatrix),z.logarithmicDepthBuffer&&M.setValue(ye,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),x!==e&&(x=e,T=!0,S=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var A=M.map.cameraPosition;void 0!==A&&A.setValue(ye,G.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&M.setValue(ye,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&M.setValue(ye,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){M.setOptional(ye,i,"bindMatrix"),M.setOptional(ye,i,"bindMatrixInverse");var C=i.skeleton;C&&(z.floatVertexTextures?(null===C.boneTexture&&C.computeBoneTexture(),M.setValue(ye,"boneTexture",C.boneTexture,q),M.setValue(ye,"boneTextureSize",C.boneTextureSize)):M.setOptional(ye,C,"boneMatrices"))}return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||de.update(i,n,r,y),(T||p.receiveShadow!==i.receiveShadow)&&(p.receiveShadow=i.receiveShadow,M.setValue(ye,"receiveShadow",i.receiveShadow)),T&&(M.setValue(ye,"toneMappingExposure",v.toneMappingExposure),p.needsLights&&Ve(k,S),a&&r.fog&&oe.refreshFogUniforms(k,a),oe.refreshMaterialUniforms(k,r,E,O,N),ga.upload(ye,p.uniformsList,k,q)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(ga.upload(ye,p.uniformsList,k,q),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&M.setValue(ye,"center",i.center),M.setValue(ye,"modelViewMatrix",i.modelViewMatrix),M.setValue(ye,"normalMatrix",i.normalMatrix),M.setValue(ye,"modelMatrix",i.matrixWorld),y}function Ve(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function We(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}Ie.setAnimationLoop(je),"undefined"!=typeof window&&Ie.setContext(window),this.setAnimationLoop=function(e){Pe=e,Se.setAnimationLoop(e),null===e?Ie.stop():Ie.start()},Se.addEventListener("sessionstart",Le),Se.addEventListener("sessionend",Re),this.render=function(e,t){if(void 0===t||!0===t.isCamera){if(!0!==m){if(!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===Se.enabled&&!0===Se.isPresenting&&(!0===Se.cameraAutoUpdate&&Se.updateCamera(t),t=Se.getCamera()),!0===e.isScene&&e.onBeforeRender(v,e,t,b),(f=le.get(e,p.length)).init(),p.push(f),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),R.setFromProjectionMatrix(H),I=ce.init(this.clippingPlanes,D=this.localClippingEnabled,t),(h=se.get(e,d.length)).init(),d.push(h),De(e,t,0,v.sortObjects),h.finish(),!0===v.sortObjects&&h.sort(k,A),!0===I&&ce.beginShadows(),he.render(f.state.shadowsArray,e,t),!0===I&&ce.endShadows(),!0===this.info.autoReset&&this.info.reset(),fe.render(h,e),f.setupLights(v.physicallyCorrectLights),t.isArrayCamera)for(var n=t.cameras,r=0,i=n.length;r<i;r++){var a=n[r];Ne(h,e,a,a.viewport)}else Ne(h,e,t);null!==b&&(q.updateMultisampleRenderTarget(b),q.updateRenderTargetMipmap(b)),!0===e.isScene&&e.onAfterRender(v,e,t),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),ge.resetDefaultState(),_=-1,x=null,p.pop(),f=p.length>0?p[p.length-1]:null,d.pop(),h=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return b},this.setRenderTarget=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b=e,g=t,y=n,e&&void 0===X.get(e).__webglFramebuffer&&q.setupRenderTarget(e);var r=null,i=!1,a=!1;if(e){var o=e.texture;(o.isDataTexture3D||o.isDataTexture2DArray)&&(a=!0);var s=X.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=s[t],i=!0):r=e.isWebGLMultisampleRenderTarget?X.get(e).__webglMultisampledFramebuffer:s,w.copy(e.viewport),T.copy(e.scissor),S=e.scissorTest}else w.copy(C).multiplyScalar(E).floor(),T.copy(P).multiplyScalar(E).floor(),S=j;var u=V.bindFramebuffer(36160,r);if(u&&z.drawBuffers){var l=!1;if(e)if(e.isWebGLMultipleRenderTargets){var c=e.texture;if(L.length!==c.length||36064!==L[0]){for(var h=0,f=c.length;h<f;h++)L[h]=36064+h;L.length=c.length,l=!0}}else 1===L.length&&36064===L[0]||(L[0]=36064,L.length=1,l=!0);else 1===L.length&&1029===L[0]||(L[0]=1029,L.length=1,l=!0);l&&(z.isWebGL2?ye.drawBuffers(L):F.get("WEBGL_draw_buffers").drawBuffersWEBGL(L))}if(V.viewport(w),V.scissor(T),V.setScissorTest(S),i){var d=X.get(e.texture);ye.framebufferTexture2D(36160,36064,34069+t,d.__webglTexture,n)}else if(a){var p=X.get(e.texture),v=t||0;ye.framebufferTextureLayer(36160,36064,p.__webglTexture,n||0,v)}_=-1},this.readRenderTargetPixels=function(e,t,n,r,i,a,o){if(e&&e.isWebGLRenderTarget){var s=X.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){V.bindFramebuffer(36160,s);try{var u=e.texture,l=u.format,c=u.type;if(l!==ue&&me.convert(l)!==ye.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var h=c===ae&&(F.has("EXT_color_buffer_half_float")||z.isWebGL2&&F.has("EXT_color_buffer_float"));if(!(c===te||me.convert(c)===ye.getParameter(35738)||c===ie&&(z.isWebGL2||F.has("OES_texture_float")||F.has("WEBGL_color_buffer_float"))||h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ye.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ye.readPixels(t,n,r,i,me.convert(l),me.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var f=null!==b?X.get(b).__webglFramebuffer:null;V.bindFramebuffer(36160,f)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=Math.pow(2,-n),i=Math.floor(t.image.width*r),a=Math.floor(t.image.height*r),o=me.convert(t.format);z.isWebGL2&&(6407===o&&(o=32849),6408===o&&(o=32856)),q.setTexture2D(t,0),ye.copyTexImage2D(3553,n,o,e.x,e.y,i,a,0),V.unbindTexture()},this.copyTextureToTexture=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.image.width,a=t.image.height,o=me.convert(n.format),s=me.convert(n.type);q.setTexture2D(n,0),ye.pixelStorei(37440,n.flipY),ye.pixelStorei(37441,n.premultiplyAlpha),ye.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?ye.texSubImage2D(3553,r,e.x,e.y,i,a,o,s,t.image.data):t.isCompressedTexture?ye.compressedTexSubImage2D(3553,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,o,t.mipmaps[0].data):ye.texSubImage2D(3553,r,e.x,e.y,o,s,t.image),0===r&&n.generateMipmaps&&ye.generateMipmap(3553),V.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(v.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var a,o=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,u=e.max.z-e.min.z+1,l=me.convert(r.format),c=me.convert(r.type);if(r.isDataTexture3D)q.setTexture3D(r,0),a=32879;else{if(!r.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(r,0),a=35866}ye.pixelStorei(37440,r.flipY),ye.pixelStorei(37441,r.premultiplyAlpha),ye.pixelStorei(3317,r.unpackAlignment);var h=ye.getParameter(3314),f=ye.getParameter(32878),d=ye.getParameter(3316),p=ye.getParameter(3315),m=ye.getParameter(32877),g=n.isCompressedTexture?n.mipmaps[0]:n.image;ye.pixelStorei(3314,g.width),ye.pixelStorei(32878,g.height),ye.pixelStorei(3316,e.min.x),ye.pixelStorei(3315,e.min.y),ye.pixelStorei(32877,e.min.z),n.isDataTexture||n.isDataTexture3D?ye.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),ye.compressedTexSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,g.data)):ye.texSubImage3D(a,i,t.x,t.y,t.z,o,s,u,l,c,g),ye.pixelStorei(3314,h),ye.pixelStorei(32878,f),ye.pixelStorei(3316,d),ye.pixelStorei(3315,p),ye.pixelStorei(32877,m),0===i&&r.generateMipmaps&&ye.generateMipmap(a),V.unbindTexture()}},this.initTexture=function(e){q.setTexture2D(e,0),V.unbindTexture()},this.resetState=function(){g=0,y=0,b=null,V.reset(),ge.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}var lo=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(uo);lo.prototype.isWebGL1Renderer=!0,function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;Object(p.a)(this,e),this.name="",this.color=new Sn(t),this.density=n}return Object(v.a)(e,[{key:"clone",value:function(){return new e(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),e}().prototype.isFogExp2=!0,function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;Object(p.a)(this,e),this.name="",this.color=new Sn(t),this.near=n,this.far=r}return Object(v.a)(e,[{key:"clone",value:function(){return new e(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),e}().prototype.isFog=!0;var co=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).type="Scene",e.background=null,e.environment=null,e.fog=null,e.overrideMaterial=null,e.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Object(b.a)(e)})),e}return Object(v.a)(n,[{key:"copy",value:function(e,t){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}},{key:"toJSON",value:function(e){var t=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this,e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}]),n}(rn);co.prototype.isScene=!0;var ho=function(){function e(t,n){Object(p.a)(this,e),this.array=t,this.stride=n,this.count=void 0!==t?t.length/n:0,this.usage=Se,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Re()}return Object(v.a)(e,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setUsage",value:function(e){return this.usage=e,this}},{key:"copy",value:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}},{key:"copyAt",value:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}},{key:"clone",value:function(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Re()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(e){return this.onUploadCallback=e,this}},{key:"toJSON",value:function(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Re()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),e}();ho.prototype.isInterleavedBuffer=!0;var fo=new tt,po=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(p.a)(this,e),this.name="",this.data=t,this.itemSize=n,this.offset=r,this.normalized=!0===i}return Object(v.a)(e,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(e){this.data.needsUpdate=e}},{key:"applyMatrix4",value:function(e){for(var t=0,n=this.data.count;t<n;t++)fo.x=this.getX(t),fo.y=this.getY(t),fo.z=this.getZ(t),fo.applyMatrix4(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}},{key:"applyNormalMatrix",value:function(e){for(var t=0,n=this.count;t<n;t++)fo.x=this.getX(t),fo.y=this.getY(t),fo.z=this.getZ(t),fo.applyNormalMatrix(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}},{key:"transformDirection",value:function(e){for(var t=0,n=this.count;t<n;t++)fo.x=this.getX(t),fo.y=this.getY(t),fo.z=this.getZ(t),fo.transformDirection(e),this.setXYZ(t,fo.x,fo.y,fo.z);return this}},{key:"setX",value:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}},{key:"setY",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}},{key:"setZ",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}},{key:"setW",value:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}},{key:"getX",value:function(e){return this.data.array[e*this.data.stride+this.offset]}},{key:"getY",value:function(e){return this.data.array[e*this.data.stride+this.offset+1]}},{key:"getZ",value:function(e){return this.data.array[e*this.data.stride+this.offset+2]}},{key:"getW",value:function(e){return this.data.array[e*this.data.stride+this.offset+3]}},{key:"setXY",value:function(e,t,n){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this}},{key:"setXYZ",value:function(e,t,n,r){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}},{key:"setXYZW",value:function(e,t,n,r,i){return this.data.array[(e=e*this.data.stride+this.offset)+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}},{key:"clone",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],r=0;r<this.count;r++)for(var i=r*this.data.stride+this.offset,a=0;a<this.itemSize;a++)n.push(this.data.array[i+a]);return new kn(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new e(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,i=0;i<this.itemSize;i++)t.push(this.data.array[r+i]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),e}();po.prototype.isInterleavedBufferAttribute=!0;var vo,mo=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="SpriteMaterial",r.color=new Sn(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(gn);mo.prototype.isSpriteMaterial=!0;var go=new tt,yo=new tt,bo=new tt,_o=new Fe,xo=new Fe,wo=new jt,To=new tt,So=new tt,Mo=new tt,Oo=new Fe,Eo=new Fe,ko=new Fe;function Ao(e,t,n,r,i,a){_o.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(xo.x=a*_o.x-i*_o.y,xo.y=i*_o.x+a*_o.y):xo.copy(_o),e.copy(t),e.x+=xo.x,e.y+=xo.y,e.applyMatrix4(wo)}(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;if(Object(p.a)(this,n),(r=t.call(this)).type="Sprite",void 0===vo){vo=new Gn;var i=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),a=new ho(i,5);vo.setIndex([0,1,2,0,2,3]),vo.setAttribute("position",new po(a,3,0,!1)),vo.setAttribute("uv",new po(a,2,3,!1))}return r.geometry=vo,r.material=void 0!==e?e:new mo,r.center=new Fe(.5,.5),r}return Object(v.a)(n,[{key:"raycast",value:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),yo.setFromMatrixScale(this.matrixWorld),wo.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),bo.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&yo.multiplyScalar(-bo.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var a=this.center;Ao(To.set(-.5,-.5,0),bo,a,yo,n,r),Ao(So.set(.5,-.5,0),bo,a,yo,n,r),Ao(Mo.set(.5,.5,0),bo,a,yo,n,r),Oo.set(0,0),Eo.set(1,0),ko.set(1,1);var o=e.ray.intersectTriangle(To,So,Mo,!1,go);if(null!==o||(Ao(So.set(-.5,.5,0),bo,a,yo,n,r),Eo.set(0,1),null!==(o=e.ray.intersectTriangle(To,Mo,So,!1,go)))){var s=e.ray.origin.distanceTo(go);s<e.near||s>e.far||t.push({distance:s,point:go.clone(),uv:vn.getUV(go,To,So,Mo,Oo,Eo,ko,new Fe),face:null,object:this})}}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}]),n})(rn).prototype.isSprite=!0;var Co=new tt,Po=new Ze,jo=new Ze,Lo=new tt,Ro=new jt,Io=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,r)).type="SkinnedMesh",i.bindMode="attached",i.bindMatrix=new jt,i.bindMatrixInverse=new jt,i}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}},{key:"bind",value:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var e=new Ze,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}},{key:"updateMatrixWorld",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"updateMatrixWorld",this).call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(e,t){var n=this.skeleton,r=this.geometry;Po.fromBufferAttribute(r.attributes.skinIndex,e),jo.fromBufferAttribute(r.attributes.skinWeight,e),Co.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(var i=0;i<4;i++){var a=jo.getComponent(i);if(0!==a){var o=Po.getComponent(i);Ro.multiplyMatrices(n.bones[o].matrixWorld,n.boneInverses[o]),t.addScaledVector(Lo.copy(Co).applyMatrix4(Ro),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}]),n}(rr);Io.prototype.isSkinnedMesh=!0;var Do=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).type="Bone",e}return n}(rn);Do.prototype.isBone=!0;var No=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0,c=arguments.length>7?arguments[7]:void 0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:J,f=arguments.length>9&&void 0!==arguments[9]?arguments[9]:J,d=arguments.length>10?arguments[10]:void 0,v=arguments.length>11?arguments[11]:void 0;return Object(p.a)(this,n),(e=t.call(this,null,u,l,c,h,f,o,s,d,v)).image={data:r,width:i,height:a},e.magFilter=h,e.minFilter=f,e.generateMipmaps=!1,e.flipY=!1,e.unpackAlignment=1,e.needsUpdate=!0,e}return n}(Ye);No.prototype.isDataTexture=!0;var Ho=new jt,Go=new jt,Bo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(p.a)(this,e),this.uuid=Re(),this.bones=t.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return Object(v.a)(e,[{key:"init",value:function(){var e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new jt)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var e=0,t=this.bones.length;e<t;e++){var n=new jt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(var r=0,i=this.bones.length;r<i;r++){var a=this.bones[r];a&&(a.parent&&a.parent.isBone?(a.matrix.copy(a.parent.matrixWorld).invert(),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}}},{key:"update",value:function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++)Ho.multiplyMatrices(e[i]?e[i].matrixWorld:Go,t[i]),Ho.toArray(n,16*i);null!==r&&(r.needsUpdate=!0)}},{key:"clone",value:function(){return new e(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var e=Math.sqrt(4*this.bones.length);e=Ge(e),e=Math.max(e,4);var t=new Float32Array(e*e*4);t.set(this.boneMatrices);var n=new No(t,e,e,ue,ie);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}},{key:"getBoneByName",value:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(e,t){this.uuid=e.uuid;for(var n=0,r=e.bones.length;n<r;n++){var i=e.bones[n],a=t[i];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),a=new Do),this.bones.push(a),this.boneInverses.push((new jt).fromArray(e.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;for(var t=this.bones,n=this.boneInverses,r=0,i=t.length;r<i;r++)e.bones.push(t[r].uuid),e.boneInverses.push(n[r].toArray());return e}}]),e}(),Uo=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(p.a)(this,n),"number"==typeof i&&(o=i,i=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(a=t.call(this,e,r,i)).meshPerAttribute=o,a}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}]),n}(kn);Uo.prototype.isInstancedBufferAttribute=!0;var Fo=new jt,zo=new jt,Vo=[],Wo=new rr;(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e,r)).instanceMatrix=new Uo(new Float32Array(16*i),16),a.instanceColor=null,a.count=i,a.frustumCulled=!1,a}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}},{key:"getColorAt",value:function(e,t){t.fromArray(this.instanceColor.array,3*e)}},{key:"getMatrixAt",value:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)}},{key:"raycast",value:function(e,t){var n=this.matrixWorld,r=this.count;if(Wo.geometry=this.geometry,Wo.material=this.material,void 0!==Wo.material)for(var i=0;i<r;i++){this.getMatrixAt(i,Fo),zo.multiplyMatrices(n,Fo),Wo.matrixWorld=zo,Wo.raycast(e,Vo);for(var a=0,o=Vo.length;a<o;a++){var s=Vo[a];s.instanceId=i,s.object=this,t.push(s)}Vo.length=0}}},{key:"setColorAt",value:function(e,t){null===this.instanceColor&&(this.instanceColor=new Uo(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}},{key:"setMatrixAt",value:function(e,t){t.toArray(this.instanceMatrix.array,16*e)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n})(rr).prototype.isInstancedMesh=!0;var Xo=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="LineBasicMaterial",r.color=new Sn(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}]),n}(gn);Xo.prototype.isLineBasicMaterial=!0;var qo=new tt,Ko=new tt,Yo=new jt,Jo=new Pt,Zo=new Tt,Qo=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gn,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Xo;return Object(p.a)(this,n),(e=t.call(this)).type="Line",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)qo.fromBufferAttribute(t,r-1),Ko.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=qo.distanceTo(Ko);e.setAttribute("lineDistance",new Pn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Zo.copy(n.boundingSphere),Zo.applyMatrix4(r),Zo.radius+=i,!1!==e.ray.intersectsSphere(Zo)){Yo.copy(r).invert(),Jo.copy(e.ray).applyMatrix4(Yo);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,u=new tt,l=new tt,c=new tt,h=new tt,f=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position;if(null!==d)for(var v=Math.max(0,a.start),m=Math.min(d.count,a.start+a.count)-1;v<m;v+=f){var g=d.getX(v),y=d.getX(v+1);if(u.fromBufferAttribute(p,g),l.fromBufferAttribute(p,y),!(Jo.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var b=e.ray.origin.distanceTo(h);b<e.near||b>e.far||t.push({distance:b,point:c.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var _=Math.max(0,a.start),x=Math.min(p.count,a.start+a.count)-1;_<x;_+=f)if(u.fromBufferAttribute(p,_),l.fromBufferAttribute(p,_+1),!(Jo.distanceSqToSegment(u,l,h,c)>s)){h.applyMatrix4(this.matrixWorld);var w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:c.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(rn);Qo.prototype.isLine=!0;var $o=new tt,es=new tt,ts=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,r)).type="LineSegments",i}return Object(v.a)(n,[{key:"computeLineDistances",value:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[],r=0,i=t.count;r<i;r+=2)$o.fromBufferAttribute(t,r),es.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+$o.distanceTo(es);e.setAttribute("lineDistance",new Pn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(Qo);ts.prototype.isLineSegments=!0;var ns=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,r)).type="LineLoop",i}return n}(Qo);ns.prototype.isLineLoop=!0;var rs=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="PointsMaterial",r.color=new Sn(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}]),n}(gn);rs.prototype.isPointsMaterial=!0;var is=new jt,as=new Pt,os=new Tt,ss=new tt,us=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Gn,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rs;return Object(p.a)(this,n),(e=t.call(this)).type="Points",e.geometry=r,e.material=i,e.updateMorphTargets(),e}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.material=e.material,this.geometry=e.geometry,this}},{key:"raycast",value:function(e,t){var n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),os.copy(n.boundingSphere),os.applyMatrix4(r),os.radius+=i,!1!==e.ray.intersectsSphere(os)){is.copy(r).invert(),as.copy(e.ray).applyMatrix4(is);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){var u=n.index,l=n.attributes.position;if(null!==u)for(var c=Math.max(0,a.start),h=Math.min(u.count,a.start+a.count);c<h;c++){var f=u.getX(c);ss.fromBufferAttribute(l,f),ls(ss,f,s,r,e,t,this)}else for(var d=Math.max(0,a.start),p=Math.min(l.count,a.start+a.count);d<p;d++)ss.fromBufferAttribute(l,d),ls(ss,d,s,r,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var e=this.geometry;if(e.isBufferGeometry){var t=e.morphAttributes,n=Object.keys(t);if(n.length>0){var r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var i=0,a=r.length;i<a;i++){var o=r[i].name||String(i);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=i}}}}else{var s=e.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(rn);function ls(e,t,n,r,i,a,o){var s=as.distanceSqToPoint(e);if(s<n){var u=new tt;as.closestPointToPoint(e,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:t,face:null,object:o})}}us.prototype.isPoints=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a,o,s,u,l,c){var h;Object(p.a)(this,n),(h=t.call(this,e,r,i,a,o,s,u,l,c)).format=void 0!==u?u:se,h.minFilter=void 0!==s?s:$,h.magFilter=void 0!==o?o:$,h.generateMipmaps=!1;var f=Object(b.a)(h);return"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){f.needsUpdate=!0,e.requestVideoFrameCallback(t)}),h}return Object(v.a)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var e=this.image;0=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Ye).prototype.isVideoTexture=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a,o,s,u,l,c,h,f,d){var v;return Object(p.a)(this,n),(v=t.call(this,null,s,u,l,c,h,a,o,f,d)).image={width:r,height:i},v.mipmaps=e,v.flipY=!1,v.generateMipmaps=!1,v}return n}(Ye).prototype.isCompressedTexture=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a,o,s,u,l,c){var h;return Object(p.a)(this,n),(h=t.call(this,e,r,i,a,o,s,u,l,c)).needsUpdate=!0,h}return n}(Ye).prototype.isCanvasTexture=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a,o,s,u,l,c,h){var f;if(Object(p.a)(this,n),(h=void 0!==h?h:le)!==le&&h!==ce)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===i&&h===le&&(i=ne),void 0===i&&h===ce&&(i=oe),(f=t.call(this,null,a,o,s,u,l,h,i,c)).image={width:e,height:r},f.magFilter=void 0!==u?u:J,f.minFilter=void 0!==l?l:J,f.flipY=!1,f.generateMipmaps=!1,f}return n}(Ye).prototype.isDepthTexture=!0,new tt,new tt,new tt,new vn;var cs=function(){function e(){Object(p.a)(this,e),this.type="Curve",this.arcLengthDivisions=200}return Object(v.a)(e,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)}},{key:"getPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n=[],r=this.getPoint(0),i=0;n.push(0);for(var a=1;a<=e;a++)i+=(t=this.getPoint(a/e)).distanceTo(r),n.push(i),r=t;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)}},{key:"getTangent",value:function(e,t){var n=1e-4,r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);var a=this.getPoint(r),o=this.getPoint(i),s=t||(a.isVector2?new Fe:new tt);return s.copy(o).sub(a).normalize(),s}},{key:"getTangentAt",value:function(e,t){var n=this.getUtoTmapping(e);return this.getTangent(n,t)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new tt,r=[],i=[],a=[],o=new tt,s=new jt,u=0;u<=e;u++)r[u]=this.getTangentAt(u/e,new tt);i[0]=new tt,a[0]=new tt;var l=Number.MAX_VALUE,c=Math.abs(r[0].x),h=Math.abs(r[0].y),f=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),h<=l&&(l=h,n.set(0,1,0)),f<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var d=1;d<=e;d++){if(i[d]=i[d-1].clone(),a[d]=a[d-1].clone(),o.crossVectors(r[d-1],r[d]),o.length()>Number.EPSILON){o.normalize();var p=Math.acos(Ie(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(s.makeRotationAxis(o,p))}a[d].crossVectors(r[d],i[d])}if(!0===t){var v=Math.acos(Ie(i[0].dot(i[e]),-1,1));v/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(v=-v);for(var m=1;m<=e;m++)i[m].applyMatrix4(s.makeRotationAxis(r[m],v*m)),a[m].crossVectors(r[m],i[m])}return{tangents:r,normals:i,binormals:a}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}},{key:"toJSON",value:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}},{key:"fromJSON",value:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}]),e}(),hs=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return Object(p.a)(this,n),(e=t.call(this)).type="EllipseCurve",e.aX=r,e.aY=i,e.xRadius=a,e.yRadius=o,e.aStartAngle=s,e.aEndAngle=u,e.aClockwise=l,e.aRotation=c,e}return Object(v.a)(n,[{key:"getPoint",value:function(e,t){for(var n=t||new Fe,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}},{key:"fromJSON",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}]),n}(cs);hs.prototype.isEllipseCurve=!0;var fs=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a,o,s){var u;return Object(p.a)(this,n),(u=t.call(this,e,r,i,i,a,o,s)).type="ArcCurve",u}return n}(hs);function ds(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}fs.prototype.isArcCurve=!0;var ps=new tt,vs=new ds,ms=new ds,gs=new ds,ys=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return Object(p.a)(this,n),(e=t.call(this)).type="CatmullRomCurve3",e.points=r,e.closed=i,e.curveType=a,e.tension=o,e}return Object(v.a)(n,[{key:"getPoint",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt,i=r,a=this.points,o=a.length,s=(o-(this.closed?0:1))*e,u=Math.floor(s),l=s-u;this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/o)+1)*o:0===l&&u===o-1&&(u=o-2,l=1),this.closed||u>0?t=a[(u-1)%o]:(ps.subVectors(a[0],a[1]).add(a[0]),t=ps);var c=a[u%o],h=a[(u+1)%o];if(this.closed||u+2<o?n=a[(u+2)%o]:(ps.subVectors(a[o-1],a[o-2]).add(a[o-1]),n=ps),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,d=Math.pow(t.distanceToSquared(c),f),p=Math.pow(c.distanceToSquared(h),f),v=Math.pow(h.distanceToSquared(n),f);p<1e-4&&(p=1),d<1e-4&&(d=p),v<1e-4&&(v=p),vs.initNonuniformCatmullRom(t.x,c.x,h.x,n.x,d,p,v),ms.initNonuniformCatmullRom(t.y,c.y,h.y,n.y,d,p,v),gs.initNonuniformCatmullRom(t.z,c.z,h.z,n.z,d,p,v)}else"catmullrom"===this.curveType&&(vs.initCatmullRom(t.x,c.x,h.x,n.x,this.tension),ms.initCatmullRom(t.y,c.y,h.y,n.y,this.tension),gs.initCatmullRom(t.z,c.z,h.z,n.z,this.tension));return i.set(vs.calc(l),ms.calc(l),gs.calc(l)),i}},{key:"copy",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}},{key:"fromJSON",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new tt).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}]),n}(cs);function bs(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function _s(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function xs(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}ys.prototype.isCatmullRomCurve3=!0;var ws=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fe,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fe,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fe,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Fe;return Object(p.a)(this,n),(e=t.call(this)).type="CubicBezierCurve",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return Object(v.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fe,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(xs(e,r.x,i.x,a.x,o.x),xs(e,r.y,i.y,a.y,o.y)),n}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(cs);ws.prototype.isCubicBezierCurve=!0;var Ts=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new tt,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new tt;return Object(p.a)(this,n),(e=t.call(this)).type="CubicBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e.v3=o,e}return Object(v.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt,n=t,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(xs(e,r.x,i.x,a.x,o.x),xs(e,r.y,i.y,a.y,o.y),xs(e,r.z,i.z,a.z,o.z)),n}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}},{key:"fromJSON",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}]),n}(cs);Ts.prototype.isCubicBezierCurve3=!0;var Ss=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fe,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fe;return Object(p.a)(this,n),(e=t.call(this)).type="LineCurve",e.v1=r,e.v2=i,e}return Object(v.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fe,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"getTangent",value:function(e,t){var n=t||new Fe;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(cs);Ss.prototype.isLineCurve=!0;var Ms=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt;return Object(p.a)(this,n),(e=t.call(this)).type="LineCurve3",e.isLineCurve3=!0,e.v1=r,e.v2=i,e}return Object(v.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt,n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}},{key:"getPointAt",value:function(e,t){return this.getPoint(e,t)}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(cs),Os=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fe,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fe,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Fe;return Object(p.a)(this,n),(e=t.call(this)).type="QuadraticBezierCurve",e.v0=r,e.v1=i,e.v2=a,e}return Object(v.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fe,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(_s(e,r.x,i.x,a.x),_s(e,r.y,i.y,a.y)),n}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(cs);Os.prototype.isQuadraticBezierCurve=!0;var Es=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new tt;return Object(p.a)(this,n),(e=t.call(this)).type="QuadraticBezierCurve3",e.v0=r,e.v1=i,e.v2=a,e}return Object(v.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt,n=t,r=this.v0,i=this.v1,a=this.v2;return n.set(_s(e,r.x,i.x,a.x),_s(e,r.y,i.y,a.y),_s(e,r.z,i.z,a.z)),n}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}},{key:"fromJSON",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}]),n}(cs);Es.prototype.isQuadraticBezierCurve3=!0;var ks=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(p.a)(this,n),(e=t.call(this)).type="SplineCurve",e.points=r,e}return Object(v.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fe,n=t,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],l=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(bs(o,s.x,u.x,l.x,c.x),bs(o,s.y,u.y,l.y,c.y)),n}},{key:"copy",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++)this.points.push(e.points[t].clone());return this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++)e.points.push(this.points[t].toArray());return e}},{key:"fromJSON",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var i=e.points[t];this.points.push((new Fe).fromArray(i))}return this}}]),n}(cs);ks.prototype.isSplineCurve=!0;var As=Object.freeze({__proto__:null,ArcCurve:fs,CatmullRomCurve3:ys,CubicBezierCurve:ws,CubicBezierCurve3:Ts,EllipseCurve:hs,LineCurve:Ss,LineCurve3:Ms,QuadraticBezierCurve:Os,QuadraticBezierCurve3:Es,SplineCurve:ks}),Cs=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="Path",r.currentPoint=new Fe,e&&r.setFromPoints(e),r}return Object(v.a)(n,[{key:"setFromPoints",value:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}},{key:"moveTo",value:function(e,t){return this.currentPoint.set(e,t),this}},{key:"lineTo",value:function(e,t){var n=new Ss(this.currentPoint.clone(),new Fe(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}},{key:"quadraticCurveTo",value:function(e,t,n,r){var i=new Os(this.currentPoint.clone(),new Fe(e,t),new Fe(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){var o=new ws(this.currentPoint.clone(),new Fe(e,t),new Fe(n,r),new Fe(i,a));return this.curves.push(o),this.currentPoint.set(i,a),this}},{key:"splineThru",value:function(e){var t=[this.currentPoint.clone()].concat(e),n=new ks(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}},{key:"arc",value:function(e,t,n,r,i,a){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,a),this}},{key:"absarc",value:function(e,t,n,r,i,a){return this.absellipse(e,t,n,n,r,i,a),this}},{key:"ellipse",value:function(e,t,n,r,i,a,o,s){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,i,a,o,s),this}},{key:"absellipse",value:function(e,t,n,r,i,a,o,s){var u=new hs(e,t,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.currentPoint.copy(e.currentPoint),this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return e.currentPoint=this.currentPoint.toArray(),e}},{key:"fromJSON",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}]),n}(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).type="CurvePath",e.curves=[],e.autoClose=!1,e}return Object(v.a)(n,[{key:"add",value:function(e){this.curves.push(e)}},{key:"closePath",value:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ss(t,e))}},{key:"getPoint",value:function(e,t){for(var n=e*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var a=r[i]-n,o=this.curves[i],s=o.getLength();return o.getPointAt(0===s?0:1-a/s,t)}i++}return null}},{key:"getLength",value:function(){var e=this.getCurveLengths();return e[e.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}},{key:"getSpacedPoints",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}},{key:"getPoints",value:function(){for(var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++)e.curves.push(this.curves[t].toJSON());return e}},{key:"fromJSON",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var i=e.curves[t];this.curves.push((new As[i.type]).fromJSON(i))}return this}}]),n}(cs)),Ps=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).uuid=Re(),r.type="Shape",r.holes=[],r}return Object(v.a)(n,[{key:"getPointsHoles",value:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}},{key:"extractPoints",value:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}},{key:"copy",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++)this.holes.push(e.holes[t].clone());return this}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++)e.holes.push(this.holes[t].toJSON());return e}},{key:"fromJSON",value:function(e){Object(_.a)(Object(x.a)(n.prototype),"fromJSON",this).call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var i=e.holes[t];this.holes.push((new Cs).fromJSON(i))}return this}}]),n}(Cs);function js(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=eu(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=eu(a,e[a],e[a+1],o);return o&&Ks(o,o.next)&&(tu(o),o=o.next),o}function Ls(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Ks(r,r.next)&&0!==qs(r.prev,r,r.next))r=r.next;else{if(tu(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Rs(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=zs(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?Ds(e,r,i,a):Is(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),tu(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?Rs(e=Ns(Ls(e),t,n),t,n,r,i,a,2):2===o&&Hs(e,t,n,r,i,a):Rs(Ls(e),t,n,r,i,a,1);break}}}function Is(e){var t=e.prev,n=e,r=e.next;if(qs(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(Ws(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&qs(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ds(e,t,n,r){var i=e.prev,a=e,o=e.next;if(qs(i,a,o)>=0)return!1;for(var s=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,l=zs(i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,t,n,r),c=zs(s,u,t,n,r),h=e.prevZ,f=e.nextZ;h&&h.z>=l&&f&&f.z<=c;){if(h!==e.prev&&h!==e.next&&Ws(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&qs(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,f!==e.prev&&f!==e.next&&Ws(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&qs(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;h&&h.z>=l;){if(h!==e.prev&&h!==e.next&&Ws(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&qs(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;f&&f.z<=c;){if(f!==e.prev&&f!==e.next&&Ws(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&qs(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Ns(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Ks(i,a)&&Ys(i,r,r.next,a)&&Qs(i,a)&&Qs(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),tu(r),tu(r.next),r=e=a),r=r.next}while(r!==e);return Ls(r)}function Hs(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Xs(o,s)){var u=$s(o,s);return o=Ls(o,o.next),u=Ls(u,u.next),Rs(o,t,n,r,i,a),void Rs(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function Gs(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=js(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Vs(o));for(s.sort(Bs),i=0;i<s.length;i++)Us(s[i],n),n=Ls(n,n.next);return n}function Bs(e,t){return e.x-t.x}function Us(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Ws(a<h?i:o,a,c,h,a<h?o:i,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(i-r.x),Qs(r,e)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&Fs(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(e,t)){var n=$s(t,e);Ls(t,t.next),Ls(n,n.next)}}function Fs(e,t){return qs(e.prev,e,t.prev)<0&&qs(t.next,e,e.next)<0}function zs(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Vs(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ws(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Xs(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Ys(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Qs(e,t)&&Qs(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(qs(e.prev,e,t.prev)||qs(e,t.prev,t))||Ks(e,t)&&qs(e.prev,e,e.next)>0&&qs(t.prev,t,t.next)>0)}function qs(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Ks(e,t){return e.x===t.x&&e.y===t.y}function Ys(e,t,n,r){var i=Zs(qs(e,t,n)),a=Zs(qs(e,t,r)),o=Zs(qs(n,r,e)),s=Zs(qs(n,r,t));return i!==a&&o!==s||!(0!==i||!Js(e,n,t))||!(0!==a||!Js(e,r,t))||!(0!==o||!Js(n,e,r))||!(0!==s||!Js(n,t,r))}function Js(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Zs(e){return e>0?1:e<0?-1:0}function Qs(e,t){return qs(e.prev,e,e.next)<0?qs(e,t,e.next)>=0&&qs(e,e.prev,t)>=0:qs(e,t,e.prev)<0||qs(e,e.next,t)<0}function $s(e,t){var n=new nu(e.i,e.x,e.y),r=new nu(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function eu(e,t,n,r){var i=new nu(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function tu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function nu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ru=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"area",value:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}},{key:"isClockWise",value:function(t){return e.area(t)<0}},{key:"triangulateShape",value:function(e,t){var n=[],r=[],i=[];iu(e),au(n,e);var a=e.length;t.forEach(iu);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,au(n,t[o]);for(var s=function(e,t){var n,r,i,a,o,s,u,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,c=t&&t.length,h=c?t[0]*l:e.length,f=js(e,0,h,l,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=Gs(e,t,f,l)),e.length>80*l){n=i=e[0],r=a=e[1];for(var p=l;p<h;p+=l)(o=e[p])<n&&(n=o),(s=e[p+1])<r&&(r=s),o>i&&(i=o),s>a&&(a=s);u=0!==(u=Math.max(i-n,a-r))?1/u:0}return Rs(f,d,l,n,r,u),d}(n,r),u=0;u<s.length;u+=3)i.push(s.slice(u,u+3));return i}}]),e}();function iu(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function au(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var ou=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ps([new Fe(.5,.5),new Fe(-.5,.5),new Fe(-.5,-.5),new Fe(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(p.a)(this,n),(e=t.call(this)).type="ExtrudeGeometry",e.parameters={shapes:r,options:i},r=Array.isArray(r)?r:[r];for(var a=Object(b.a)(e),o=[],s=[],u=0,l=r.length;u<l;u++){var c=r[u];h(c)}function h(e){var t=[],n=void 0!==i.curveSegments?i.curveSegments:12,r=void 0!==i.steps?i.steps:1,u=void 0!==i.depth?i.depth:1,l=void 0===i.bevelEnabled||i.bevelEnabled,c=void 0!==i.bevelThickness?i.bevelThickness:.2,h=void 0!==i.bevelSize?i.bevelSize:c-.1,f=void 0!==i.bevelOffset?i.bevelOffset:0,d=void 0!==i.bevelSegments?i.bevelSegments:3,p=i.extrudePath,v=void 0!==i.UVGenerator?i.UVGenerator:su;void 0!==i.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=i.amount);var m,g,y,b,_,x=!1;p&&(m=p.getSpacedPoints(r),x=!0,l=!1,g=p.computeFrenetFrames(r,!1),y=new tt,b=new tt,_=new tt),l||(d=0,c=0,h=0,f=0);var w=e.extractPoints(n),T=w.shape,S=w.holes;if(!ru.isClockWise(T)){T=T.reverse();for(var M=0,O=S.length;M<O;M++){var E=S[M];ru.isClockWise(E)&&(S[M]=E.reverse())}}for(var k=ru.triangulateShape(T,S),A=T,C=0,P=S.length;C<P;C++)T=T.concat(S[C]);function j(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var L=T.length,R=k.length;function I(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=o*o+s*s;if(Math.abs(o*l-s*u)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(u*u+l*l),d=t.x-s/h,p=t.y+o/h,v=((n.x-l/f-d)*l-(n.y+u/f-p)*u)/(o*l-s*u),m=(r=d+o*v-e.x)*r+(i=p+s*v-e.y)*i;if(m<=2)return new Fe(r,i);a=Math.sqrt(m/2)}else{var g=!1;o>Number.EPSILON?u>Number.EPSILON&&(g=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(g=!0):Math.sign(s)===Math.sign(l)&&(g=!0),g?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new Fe(r/a,i/a)}for(var D=[],N=0,H=A.length,G=H-1,B=N+1;N<H;N++,G++,B++)G===H&&(G=0),B===H&&(B=0),D[N]=I(A[N],A[G],A[B]);for(var U,F=[],z=D.concat(),V=0,W=S.length;V<W;V++){var X=S[V];U=[];for(var q=0,K=X.length,Y=K-1,J=q+1;q<K;q++,Y++,J++)Y===K&&(Y=0),J===K&&(J=0),U[q]=I(X[q],X[Y],X[J]);F.push(U),z=z.concat(U)}for(var Z=0;Z<d;Z++){for(var Q=Z/d,$=c*Math.cos(Q*Math.PI/2),ee=h*Math.sin(Q*Math.PI/2)+f,te=0,ne=A.length;te<ne;te++){var re=j(A[te],D[te],ee);Ce(re.x,re.y,-$)}for(var ie=0,ae=S.length;ie<ae;ie++){var oe=S[ie];U=F[ie];for(var se=0,ue=oe.length;se<ue;se++){var le=j(oe[se],U[se],ee);Ce(le.x,le.y,-$)}}}for(var ce=h+f,he=0;he<L;he++){var fe=l?j(T[he],z[he],ce):T[he];x?(b.copy(g.normals[0]).multiplyScalar(fe.x),y.copy(g.binormals[0]).multiplyScalar(fe.y),_.copy(m[0]).add(b).add(y),Ce(_.x,_.y,_.z)):Ce(fe.x,fe.y,0)}for(var de=1;de<=r;de++)for(var pe=0;pe<L;pe++){var ve=l?j(T[pe],z[pe],ce):T[pe];x?(b.copy(g.normals[de]).multiplyScalar(ve.x),y.copy(g.binormals[de]).multiplyScalar(ve.y),_.copy(m[de]).add(b).add(y),Ce(_.x,_.y,_.z)):Ce(ve.x,ve.y,u/r*de)}for(var me=d-1;me>=0;me--){for(var ge=me/d,ye=c*Math.cos(ge*Math.PI/2),be=h*Math.sin(ge*Math.PI/2)+f,_e=0,xe=A.length;_e<xe;_e++){var we=j(A[_e],D[_e],be);Ce(we.x,we.y,u+ye)}for(var Te=0,Se=S.length;Te<Se;Te++){var Me=S[Te];U=F[Te];for(var Oe=0,Ee=Me.length;Oe<Ee;Oe++){var ke=j(Me[Oe],U[Oe],be);x?Ce(ke.x,ke.y+m[r-1].y,m[r-1].x+ye):Ce(ke.x,ke.y,u+ye)}}}function Ae(e,t){for(var n=e.length;--n>=0;){var i=n,a=n-1;a<0&&(a=e.length-1);for(var o=0,s=r+2*d;o<s;o++){var u=L*o,l=L*(o+1);je(t+i+u,t+a+u,t+a+l,t+i+l)}}}function Ce(e,n,r){t.push(e),t.push(n),t.push(r)}function Pe(e,t,n){Le(e),Le(t),Le(n);var r=o.length/3,i=v.generateTopUV(a,o,r-3,r-2,r-1);Re(i[0]),Re(i[1]),Re(i[2])}function je(e,t,n,r){Le(e),Le(t),Le(r),Le(t),Le(n),Le(r);var i=o.length/3,s=v.generateSideWallUV(a,o,i-6,i-3,i-2,i-1);Re(s[0]),Re(s[1]),Re(s[3]),Re(s[1]),Re(s[2]),Re(s[3])}function Le(e){o.push(t[3*e+0]),o.push(t[3*e+1]),o.push(t[3*e+2])}function Re(e){s.push(e.x),s.push(e.y)}!function(){var e=o.length/3;if(l){for(var t=0,n=L*t,i=0;i<R;i++){var s=k[i];Pe(s[2]+n,s[1]+n,s[0]+n)}n=L*(t=r+2*d);for(var u=0;u<R;u++){var c=k[u];Pe(c[0]+n,c[1]+n,c[2]+n)}}else{for(var h=0;h<R;h++){var f=k[h];Pe(f[2],f[1],f[0])}for(var p=0;p<R;p++){var v=k[p];Pe(v[0]+L*r,v[1]+L*r,v[2]+L*r)}}a.addGroup(e,o.length/3-e,0)}(),function(){var e=o.length/3,t=0;Ae(A,t),t+=A.length;for(var n=0,r=S.length;n<r;n++){var i=S[n];Ae(i,t),t+=i.length}a.addGroup(e,o.length/3-e,1)}()}return e.setAttribute("position",new Pn(o,3)),e.setAttribute("uv",new Pn(s,2)),e.computeVertexNormals(),e}return Object(v.a)(n,[{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++)n.shapes.push(e[r].uuid);else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++)r.push(t[e.shapes[i]]);var o=e.options.extrudePath;return void 0!==o&&(e.options.extrudePath=(new As[o.type]).fromJSON(o)),new n(r,e.options)}}]),n}(Gn),su={generateTopUV:function(e,t,n,r,i){var a=t[3*r],o=t[3*r+1],s=t[3*i],u=t[3*i+1];return[new Fe(t[3*n],t[3*n+1]),new Fe(a,o),new Fe(s,u)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],h=t[3*r+2],f=t[3*i],d=t[3*i+1],p=t[3*i+2],v=t[3*a],m=t[3*a+1],g=t[3*a+2];return Math.abs(s-c)<Math.abs(o-l)?[new Fe(o,1-u),new Fe(l,1-h),new Fe(f,1-p),new Fe(v,1-g)]:[new Fe(s,1-u),new Fe(c,1-h),new Fe(d,1-p),new Fe(m,1-g)]}},uu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ps([new Fe(0,.5),new Fe(-.5,-.5),new Fe(.5,-.5)]),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;Object(p.a)(this,n),(e=t.call(this)).type="ShapeGeometry",e.parameters={shapes:r,curveSegments:i};var a=[],o=[],s=[],u=[],l=0,c=0;if(!1===Array.isArray(r))f(r);else for(var h=0;h<r.length;h++)f(r[h]),e.addGroup(l,c,h),l+=c,c=0;function f(e){var t=o.length/3,n=e.extractPoints(i),r=n.shape,l=n.holes;!1===ru.isClockWise(r)&&(r=r.reverse());for(var h=0,f=l.length;h<f;h++){var d=l[h];!0===ru.isClockWise(d)&&(l[h]=d.reverse())}for(var p=ru.triangulateShape(r,l),v=0,m=l.length;v<m;v++)r=r.concat(l[v]);for(var g=0,y=r.length;g<y;g++){var b=r[g];o.push(b.x,b.y,0),s.push(0,0,1),u.push(b.x,b.y)}for(var _=0,x=p.length;_<x;_++){var w=p[_];a.push(w[0]+t,w[1]+t,w[2]+t),c+=3}}return e.setIndex(a),e.setAttribute("position",new Pn(o,3)),e.setAttribute("normal",new Pn(s,3)),e.setAttribute("uv",new Pn(u,2)),e}return Object(v.a)(n,[{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this);return function(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++)t.shapes.push(e[n].uuid);else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}}],[{key:"fromJSON",value:function(e,t){for(var r=[],i=0,a=e.shapes.length;i<a;i++)r.push(t[e.shapes[i]]);return new n(r,e.curveSegments)}}]),n}(Gn);(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="ShadowMaterial",r.color=new Sn(0),r.transparent=!0,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this}}]),n})(gn).prototype.isShadowMaterial=!0;var lu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new Sn(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Sn(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Fe(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(gn);lu.prototype.isMeshStandardMaterial=!0;var cu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new Fe(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(Object(b.a)(r),"reflectivity",{get:function(){return Ie(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),r.sheenTint=new Sn(0),r.sheenRoughness=1,r.transmissionMap=null,r.thickness=.01,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationTint=new Sn(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularTint=new Sn(1,1,1),r.specularTintMap=null,r._sheen=0,r._clearcoat=0,r._transmission=0,r.setValues(e),r}return Object(v.a)(n,[{key:"sheen",get:function(){return this._sheen},set:function(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}},{key:"transmission",get:function(){return this._transmission},set:function(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenTint.copy(e.sheenTint),this.sheenRoughness=e.sheenRoughness,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}]),n}(lu);cu.prototype.isMeshPhysicalMaterial=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="MeshPhongMaterial",r.color=new Sn(16777215),r.specular=new Sn(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Sn(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Fe(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}]),n}(gn).prototype.isMeshPhongMaterial=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new Sn(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Sn(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Fe(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(gn).prototype.isMeshToonMaterial=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Fe(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}]),n}(gn).prototype.isMeshNormalMaterial=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="MeshLambertMaterial",r.color=new Sn(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new Sn(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}]),n}(gn).prototype.isMeshLambertMaterial=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new Sn(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Fe(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}]),n}(gn).prototype.isMeshMatcapMaterial=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}]),n}(Xo).prototype.isLineDashedMaterial=!0;var hu={arraySlice:function(e,t,n){return hu.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}},subclip:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,a=e.clone();a.name=t;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],l=u.getValueSize(),c=[],h=[],f=0;f<u.times.length;++f){var d=u.times[f]*i;if(!(d<n||d>=r)){c.push(u.times[f]);for(var p=0;p<l;++p)h.push(u.values[f*l+p])}}0!==c.length&&(u.times=hu.convertArray(c,u.times.constructor),u.values=hu.convertArray(h,u.values.constructor),o.push(u))}a.tracks=o;for(var v=1/0,m=0;m<a.tracks.length;++m)v>a.tracks[m].times[0]&&(v=a.tracks[m].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*v);return a.resetDuration(),a},makeClipAdditive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var i=n.tracks.length,a=t/r,o=function(t){var r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)return"continue";var o=e.tracks.find(function(e){return e.name===r.name&&e.ValueTypeName===i});if(void 0===o)return"continue";var s=0,u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=u/3);var l=0,c=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=c/3);var h=r.times.length-1,f=void 0;if(a<=r.times[0])f=hu.arraySlice(r.values,s,u-s);else if(a>=r.times[h]){var d=h*u+s;f=hu.arraySlice(r.values,d,d+u-s)}else{var p=r.createInterpolant(),v=s,m=u-s;p.evaluate(a),f=hu.arraySlice(p.resultBuffer,v,m)}"quaternion"===i&&(new et).fromArray(f).normalize().conjugate().toArray(f);for(var g=o.times.length,y=0;y<g;++y){var b=y*c+l;if("quaternion"===i)et.multiplyQuaternionsFlat(o.values,b,f,0,o.values,b);else for(var _=c-2*l,x=0;x<_;++x)o.values[b+x]-=f[x]}},s=0;s<i;++s)o(s);return e.blendMode=ye,e}},fu=function(){function e(t,n,r,i){Object(p.a)(this,e),this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return Object(v.a)(e,[{key:"evaluate",value:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return this._cachedIndex=n=t.length,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(var u=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===u)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return this._cachedIndex=n=t.length,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),e}();fu.prototype.beforeStart_=fu.prototype.copySampleValue_,fu.prototype.afterEnd_=fu.prototype.copySampleValue_;var du=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a){var o;return Object(p.a)(this,n),(o=t.call(this,e,r,i,a))._weightPrev=-0,o._offsetPrev=-0,o._weightNext=-0,o._offsetNext=-0,o.DefaultSettings_={endingStart:pe,endingEnd:pe},o}return Object(v.a)(n,[{key:"intervalChanged_",value:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case ve:i=e,o=2*t-n;break;case me:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ve:a=e,s=2*n-t;break;case me:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l}},{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,d=(n-t)/(r-t),p=d*d,v=p*d,m=-h*v+2*h*p-h*d,g=(1+h)*v+(-1.5-2*h)*p+(-.5+h)*d+1,y=(-1-f)*v+(1.5+f)*p+.5*d,b=f*v-f*p,_=0;_!==o;++_)i[_]=m*a[l+_]+g*a[u+_]+y*a[s+_]+b*a[c+_];return i}}]),n}(fu),pu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a){return Object(p.a)(this,n),t.call(this,e,r,i,a)}return Object(v.a)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,h=0;h!==o;++h)i[h]=a[u+h]*c+a[s+h]*l;return i}}]),n}(fu),vu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a){return Object(p.a)(this,n),t.call(this,e,r,i,a)}return Object(v.a)(n,[{key:"interpolate_",value:function(e){return this.copySampleValue_(e-1)}}]),n}(fu),mu=function(){function e(t,n,r,i){if(Object(p.a)(this,e),void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=hu.convertArray(n,this.TimeBufferType),this.values=hu.convertArray(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}return Object(v.a)(e,[{key:"InterpolantFactoryMethodDiscrete",value:function(e){return new vu(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodLinear",value:function(e){return new pu(this.times,this.values,this.getValueSize(),e)}},{key:"InterpolantFactoryMethodSmooth",value:function(e){return new du(this.times,this.values,this.getValueSize(),e)}},{key:"setInterpolation",value:function(e){var t;switch(e){case he:t=this.InterpolantFactoryMethodDiscrete;break;case fe:t=this.InterpolantFactoryMethodLinear;break;case de:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return he;case this.InterpolantFactoryMethodLinear:return fe;case this.InterpolantFactoryMethodSmooth:return de}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this}},{key:"scale",value:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this}},{key:"trim",value:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=hu.arraySlice(n,i,a),this.values=hu.arraySlice(this.values,i*o,a*o)}return this}},{key:"validate",value:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&hu.isTypedArray(r))for(var u=0,l=r.length;u!==l;++u){var c=r[u];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,u,c),e=!1;break}}return e}},{key:"optimize",value:function(){for(var e=hu.arraySlice(this.times),t=hu.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===de,i=e.length-1,a=1,o=1;o<i;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==e[0]))if(r)s=!0;else for(var l=o*n,c=l-n,h=l+n,f=0;f!==n;++f){var d=t[l+f];if(d!==t[c+f]||d!==t[h+f]){s=!0;break}}if(s){if(o!==a){e[a]=e[o];for(var p=o*n,v=a*n,m=0;m!==n;++m)t[v+m]=t[p+m]}++a}}if(i>0){e[a]=e[i];for(var g=i*n,y=a*n,b=0;b!==n;++b)t[y+b]=t[g+b];++a}return a!==e.length?(this.times=hu.arraySlice(e,0,a),this.values=hu.arraySlice(t,0,a*n)):(this.times=e,this.values=t),this}},{key:"clone",value:function(){var e=hu.arraySlice(this.times,0),t=hu.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(e){var t,n=e.constructor;if(n.toJSON!==this.toJSON)t=n.toJSON(e);else{t={name:e.name,times:hu.convertArray(e.times,Array),values:hu.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}]),e}();mu.prototype.TimeBufferType=Float32Array,mu.prototype.ValueBufferType=Float32Array,mu.prototype.DefaultInterpolation=fe;var gu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(mu);gu.prototype.ValueTypeName="bool",gu.prototype.ValueBufferType=Array,gu.prototype.DefaultInterpolation=he,gu.prototype.InterpolantFactoryMethodLinear=void 0,gu.prototype.InterpolantFactoryMethodSmooth=void 0;var yu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(mu);yu.prototype.ValueTypeName="color";var bu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(mu);bu.prototype.ValueTypeName="number";var _u=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a){return Object(p.a)(this,n),t.call(this,e,r,i,a)}return Object(v.a)(n,[{key:"interpolate_",value:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-t)/(r-t),u=e*o,l=u+o;u!==l;u+=4)et.slerpFlat(i,0,a,u-o,a,u,s);return i}}]),n}(fu),xu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"InterpolantFactoryMethodLinear",value:function(e){return new _u(this.times,this.values,this.getValueSize(),e)}}]),n}(mu);xu.prototype.ValueTypeName="quaternion",xu.prototype.DefaultInterpolation=fe,xu.prototype.InterpolantFactoryMethodSmooth=void 0;var wu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(mu);wu.prototype.ValueTypeName="string",wu.prototype.ValueBufferType=Array,wu.prototype.DefaultInterpolation=he,wu.prototype.InterpolantFactoryMethodLinear=void 0,wu.prototype.InterpolantFactoryMethodSmooth=void 0;var Tu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return n}(mu);Tu.prototype.ValueTypeName="vector";var Su=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ge;Object(p.a)(this,e),this.name=t,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Re(),this.duration<0&&this.resetDuration()}return Object(v.a)(e,[{key:"resetDuration",value:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this}},{key:"trim",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}},{key:"optimize",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},{key:"clone",value:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Mu(n[i]).scale(r));var o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}},{key:"toJSON",value:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode},i=0,a=n.length;i!==a;++i)t.push(mu.toJSON(n[i]));return r}},{key:"CreateFromMorphTargetSequence",value:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=hu.getKeyframeOrder(s);s=hu.sortedArray(s,1,l),u=hu.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new bu(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new this(e,-1,a)}},{key:"findByName",value:function(e,t){var n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var l=u[1],c=r[l];c||(r[l]=c=[]),c.push(s)}}var h=[];for(var f in r)h.push(this.CreateFromMorphTargetSequence(f,r[f],t,n));return h}},{key:"parseAnimation",value:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];hu.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.fps||30,o=e.blendMode,s=e.length||-1,u=e.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){var h={},f=void 0;for(f=0;f<c.length;f++)if(c[f].morphTargets)for(var d=0;d<c[f].morphTargets.length;d++)h[c[f].morphTargets[d]]=-1;for(var p in h){for(var v=[],m=[],g=0;g!==c[f].morphTargets.length;++g){var y=c[f];v.push(y.time),m.push(y.morphTarget===p?1:0)}r.push(new bu(".morphTargetInfluence["+p+"]",v,m))}s=h.length*(a||1)}else{var b=".bones["+t[l].name+"]";n(Tu,b+".position",c,"pos",r),n(xu,b+".quaternion",c,"rot",r),n(Tu,b+".scale",c,"scl",r)}}return 0===r.length?null:new this(i,s,r,o)}}]),e}();function Mu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bu;case"vector":case"vector2":case"vector3":case"vector4":return Tu;case"color":return yu;case"quaternion":return xu;case"bool":case"boolean":return gu;case"string":return wu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];hu.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}var Ou={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},Eu=function e(t,n,r){Object(p.a)(this,e);var i=this,a=!1,o=0,s=0,u=void 0,l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=n,this.onError=r,this.itemStart=function(e){s++,!1===a&&void 0!==i.onStart&&i.onStart(e,o,s),a=!0},this.itemEnd=function(e){o++,void 0!==i.onProgress&&i.onProgress(e,o,s),o===s&&(a=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return u?u(e):e},this.setURLModifier=function(e){return u=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){var t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(var t=0,n=l.length;t<n;t+=2){var r=l[t],i=l[t+1];if(r.global&&(r.lastIndex=0),r.test(e))return i}return null}},ku=new Eu,Au=function(){function e(t){Object(p.a)(this,e),this.manager=void 0!==t?t:ku,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return Object(v.a)(e,[{key:"load",value:function(){}},{key:"loadAsync",value:function(e,t){var n=this;return new Promise(function(r,i){n.load(e,r,t,i)})}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(e){return this.crossOrigin=e,this}},{key:"setWithCredentials",value:function(e){return this.withCredentials=e,this}},{key:"setPath",value:function(e){return this.path=e,this}},{key:"setResourcePath",value:function(e){return this.resourcePath=e,this}},{key:"setRequestHeader",value:function(e){return this.requestHeader=e,this}}]),e}(),Cu={},Pu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(v.a)(n,[{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Ou.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;if(void 0===Cu[e]){var o,s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],l=!!s[2],c=s[3];c=decodeURIComponent(c),l&&(c=atob(c));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var d=new Uint8Array(c.length),p=0;p<c.length;p++)d[p]=c.charCodeAt(p);h="blob"===f?new Blob([d.buffer],{type:u}):d.buffer;break;case"document":var v=new DOMParser;h=v.parseFromString(c,u);break;case"json":h=JSON.parse(c);break;default:h=c}setTimeout(function(){t&&t(h),i.manager.itemEnd(e)},0)}catch(g){setTimeout(function(){r&&r(g),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{for(var m in Cu[e]=[],Cu[e].push({onLoad:t,onProgress:n,onError:r}),(o=new XMLHttpRequest).open("GET",e,!0),o.addEventListener("load",function(t){var n=this.response,r=Cu[e];if(delete Cu[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Ou.add(e,n);for(var a=0,o=r.length;a<o;a++){var s=r[a];s.onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(var u=0,l=r.length;u<l;u++){var c=r[u];c.onError&&c.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),o.addEventListener("progress",function(t){for(var n=Cu[e],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(t)}},!1),o.addEventListener("error",function(t){var n=Cu[e];delete Cu[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),o.addEventListener("abort",function(t){var n=Cu[e];delete Cu[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(m,this.requestHeader[m]);o.send(null)}return i.manager.itemStart(e),o}Cu[e].push({onLoad:t,onProgress:n,onError:r})}},{key:"setResponseType",value:function(e){return this.responseType=e,this}},{key:"setMimeType",value:function(e){return this.mimeType=e,this}}]),n}(Au),ju=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(v.a)(n,[{key:"load",value:function(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Ou.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=Xe("img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),Ou.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}]),n}(Au),Lu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(v.a)(n,[{key:"load",value:function(e,t,n,r){var i=new pr,a=new ju(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],function(e){i.images[n]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var u=0;u<e.length;++u)s(u);return i}}]),n}(Au),Ru=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(v.a)(n,[{key:"load",value:function(e,t,n,r){var i=new Ye,a=new ju(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i}}]),n}(Au),Iu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(p.a)(this,n),(r=t.call(this)).type="Light",r.color=new Sn(e),r.intensity=i,r}return Object(v.a)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this}},{key:"toJSON",value:function(e){var t=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}]),n}(rn);Iu.prototype.isLight=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i){var a;return Object(p.a)(this,n),(a=t.call(this,e,i)).type="HemisphereLight",a.position.copy(rn.DefaultUp),a.updateMatrix(),a.groundColor=new Sn(r),a}return Object(v.a)(n,[{key:"copy",value:function(e){return Iu.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}]),n}(Iu).prototype.isHemisphereLight=!0;var Du=new jt,Nu=new tt,Hu=new tt,Gu=function(){function e(t){Object(p.a)(this,e),this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Fe(512,512),this.map=null,this.mapPass=null,this.matrix=new jt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wr,this._frameExtents=new Fe(1,1),this._viewportCount=1,this._viewports=[new Ze(0,0,1,1)]}return Object(v.a)(e,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(e){var t=this.camera,n=this.matrix;Nu.setFromMatrixPosition(e.matrixWorld),t.position.copy(Nu),Hu.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Hu),t.updateMatrixWorld(),Du.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Du),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}},{key:"getViewport",value:function(e){return this._viewports[e]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}]),e}(),Bu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this,new hr(50,1,.5,500))).focus=1,e}return Object(v.a)(n,[{key:"updateMatrices",value:function(e){var t=this.camera,r=2*Ce*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;r===t.fov&&i===t.aspect&&a===t.far||(t.fov=r,t.aspect=i,t.far=a,t.updateProjectionMatrix()),Object(_.a)(Object(x.a)(n.prototype),"updateMatrices",this).call(this,e)}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.focus=e.focus,this}}]),n}(Gu);Bu.prototype.isSpotLightShadow=!0;var Uu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return Object(p.a)(this,n),(i=t.call(this,e,r)).type="SpotLight",i.position.copy(rn.DefaultUp),i.updateMatrix(),i.target=new rn,i.distance=a,i.angle=o,i.penumbra=s,i.decay=u,i.shadow=new Bu,i}return Object(v.a)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Iu);Uu.prototype.isSpotLight=!0;var Fu=new jt,zu=new tt,Vu=new tt,Wu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this,new hr(90,1,.5,500)))._frameExtents=new Fe(4,2),e._viewportCount=6,e._viewports=[new Ze(2,1,1,1),new Ze(0,1,1,1),new Ze(3,1,1,1),new Ze(1,1,1,1),new Ze(3,0,1,1),new Ze(1,0,1,1)],e._cubeDirections=[new tt(1,0,0),new tt(-1,0,0),new tt(0,0,1),new tt(0,0,-1),new tt(0,1,0),new tt(0,-1,0)],e._cubeUps=[new tt(0,1,0),new tt(0,1,0),new tt(0,1,0),new tt(0,1,0),new tt(0,0,1),new tt(0,0,-1)],e}return Object(v.a)(n,[{key:"updateMatrices",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),zu.setFromMatrixPosition(e.matrixWorld),n.position.copy(zu),Vu.copy(n.position),Vu.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Vu),n.updateMatrixWorld(),r.makeTranslation(-zu.x,-zu.y,-zu.z),Fu.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Fu)}}]),n}(Gu);Wu.prototype.isPointLightShadow=!0;var Xu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(p.a)(this,n),(i=t.call(this,e,r)).type="PointLight",i.distance=a,i.decay=o,i.shadow=new Wu,i}return Object(v.a)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}]),n}(Iu);Xu.prototype.isPointLight=!0;var qu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.call(this,new Ir(-5,5,5,-5,.5,500))}return n}(Gu);qu.prototype.isDirectionalLightShadow=!0;var Ku=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,r)).type="DirectionalLight",i.position.copy(rn.DefaultUp),i.updateMatrix(),i.target=new rn,i.shadow=new qu,i}return Object(v.a)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}]),n}(Iu);Ku.prototype.isDirectionalLight=!0;var Yu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i;return Object(p.a)(this,n),(i=t.call(this,e,r)).type="AmbientLight",i}return n}(Iu);Yu.prototype.isAmbientLight=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Object(p.a)(this,n),(i=t.call(this,e,r)).type="RectAreaLight",i.width=a,i.height=o,i}return Object(v.a)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(e){this.intensity=e/(this.width*this.height*Math.PI)}},{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.width=e.width,this.height=e.height,this}},{key:"toJSON",value:function(e){var t=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}]),n}(Iu).prototype.isRectAreaLight=!0;var Ju=function(){function e(){Object(p.a)(this,e),this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new tt)}return Object(v.a)(e,[{key:"set",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}},{key:"zero",value:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}},{key:"getAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*i),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*i*1.092548),t.addScaledVector(a[6],.315392*(3*i*i-1)),t.addScaledVector(a[7],n*i*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}},{key:"getIrradianceAt",value:function(e,t){var n=e.x,r=e.y,i=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*i),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*i),t.addScaledVector(a[6],.743125*i*i-.247708),t.addScaledVector(a[7],.858086*n*i),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}},{key:"add",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}},{key:"addScaledSH",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}},{key:"scale",value:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}},{key:"lerp",value:function(e,t){for(var n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}},{key:"equals",value:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}},{key:"copy",value:function(e){return this.set(e.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}},{key:"toArray",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}}],[{key:"getBasisAt",value:function(e,t){var n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}]),e}();Ju.prototype.isSphericalHarmonics3=!0;var Zu=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ju,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(p.a)(this,n),(e=t.call(this,void 0,i)).sh=r,e}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.sh.copy(e.sh),this}},{key:"fromJSON",value:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}},{key:"toJSON",value:function(e){var t=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this,e);return t.object.sh=this.sh.toArray(),t}}]),n}(Iu);Zu.prototype.isLightProbe=!0;var Qu=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"decodeText",value:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(i){return t}}},{key:"extractUrlBase",value:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}]),e}();(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).type="InstancedBufferGeometry",e.instanceCount=1/0,e}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.instanceCount=e.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var e=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this,this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}]),n})(Gn).prototype.isInstancedBufferGeometry=!0;var $u,el=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),r=t.call(this,e),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return Object(v.a)(n,[{key:"setOptions",value:function(e){return this.options=e,this}},{key:"load",value:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Ou.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))}).then(function(n){Ou.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}),i.manager.itemStart(e)}}]),n}(Au);el.prototype.isImageBitmapLoader=!0;var tl=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){return Object(p.a)(this,n),t.call(this,e)}return Object(v.a)(n,[{key:"load",value:function(e,t,n,r){var i=this,a=new Pu(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){try{var a=n.slice(0);(void 0===$u&&($u=new(window.AudioContext||window.webkitAudioContext)),$u).decodeAudioData(a,function(e){t(e)})}catch(o){r?r(o):console.error(o),i.manager.itemError(e)}},n,r)}}]),n}(Au);(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(p.a)(this,n),i=t.call(this,void 0,a);var o=(new Sn).set(e),s=(new Sn).set(r),u=new tt(o.r,o.g,o.b),l=new tt(s.r,s.g,s.b),c=Math.sqrt(Math.PI),h=c*Math.sqrt(.75);return i.sh.coefficients[0].copy(u).add(l).multiplyScalar(c),i.sh.coefficients[1].copy(u).sub(l).multiplyScalar(h),i}return n})(Zu).prototype.isHemisphereLightProbe=!0,function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(p.a)(this,n),r=t.call(this,void 0,i);var a=(new Sn).set(e);return r.sh.coefficients[0].set(a.r,a.g,a.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return n}(Zu).prototype.isAmbientLightProbe=!0;var nl=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).type="Audio",r.listener=e,r.context=e.context,r.gain=r.context.createGain(),r.gain.connect(e.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return Object(v.a)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}},{key:"setMediaElementSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}},{key:"setMediaStreamSource",value:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}},{key:"setBuffer",value:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}},{key:"setDetune",value:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(e){return this.setFilters(e?[e]:[])}},{key:"setPlaybackRate",value:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(e){return this.loopStart=e,this}},{key:"setLoopEnd",value:function(e){return this.loopEnd=e,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}]),n}(rn),rl=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;Object(p.a)(this,e),this.analyser=t.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}return Object(v.a)(e,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}]),e}(),il=function(){function e(t,n,r){var i,a,o;switch(Object(p.a)(this,e),this.binding=t,this.valueSize=r,n){case"quaternion":i=this._slerp,a=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":i=this._select,a=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:i=this._lerp,a=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=a,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return Object(v.a)(e,[{key:"accumulate",value:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else this._mixBufferRegion(n,i,0,t/(a+=t),r);this.cumulativeWeight=a}},{key:"accumulateAdditive",value:function(e){var t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}},{key:"apply",value:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1&&this._mixBufferRegion(n,r,t*this._origIndex,1-i,t),a>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var e=this.buffer,t=this.valueSize,n=t*this._origIndex;this.binding.getValue(e,n);for(var r=t,i=n;r!==i;++r)e[r]=e[n+r%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){this.binding.setValue(this.buffer,3*this.valueSize)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var e=this._addIndex*this.valueSize,t=e+this.valueSize,n=e;n<t;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}},{key:"_select",value:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]}},{key:"_slerp",value:function(e,t,n,r){et.slerpFlat(e,t,e,t,e,n,r)}},{key:"_slerpAdditive",value:function(e,t,n,r,i){var a=this._workIndex*i;et.multiplyQuaternionsFlat(e,a,e,t,e,n),et.slerpFlat(e,t,e,t,e,a,r)}},{key:"_lerp",value:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}},{key:"_lerpAdditive",value:function(e,t,n,r,i){for(var a=0;a!==i;++a){var o=t+a;e[o]=e[o]+e[n+a]*r}}}]),e}(),al=new RegExp("[\\[\\]\\.:\\/]","g"),ol="[^\\[\\]\\.:\\/]",sl="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",ul=/((?:WC+[\/:])*)/.source.replace("WC",ol),ll=/(WCOD+)?/.source.replace("WCOD",sl),cl=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ol),hl=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ol),fl=new RegExp("^"+ul+ll+cl+hl+"$"),dl=["material","materials","bones"],pl=function(){function e(t,n,r){Object(p.a)(this,e);var i=r||vl.parseTrackName(n);this._targetGroup=t,this._bindings=t.subscribe_(n,i)}return Object(v.a)(e,[{key:"getValue",value:function(e,t){this.bind();var n=this._bindings[this._targetGroup.nCachedObjects_];void 0!==n&&n.getValue(e,t)}},{key:"setValue",value:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}},{key:"bind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}},{key:"unbind",value:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}]),e}(),vl=function(){function e(t,n,r){Object(p.a)(this,e),this.path=n,this.parsedPath=r||e.parseTrackName(n),this.node=e.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return Object(v.a)(e,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(e,t){e[t]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]}},{key:"_getValue_arrayElement",value:function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(e,t){this.resolvedProperty.toArray(e,t)}},{key:"_setValue_direct",value:function(e,t){this.targetObject[this.propertyName]=e[t]}},{key:"_setValue_direct_setNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]}},{key:"_setValue_array_setNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(e,t){this.resolvedProperty.fromArray(e,t)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(e,t){this.bind(),this.getValue(e,t)}},{key:"_setValue_unbound",value:function(e,t){this.bind(),this.setValue(e,t)}},{key:"bind",value:function(){var t=this.node,n=this.parsedPath,r=n.objectName,i=n.propertyName,a=n.propertyIndex;if(t||(t=e.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(r){var o=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var s=0;s<t.length;s++)if(t[s].name===o){o=s;break}break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var u=t[i];if(void 0!==u){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}c=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=a}else void 0!==u.fromArray&&void 0!==u.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(c=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+i+" but it wasn't found.",t)}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(t,n,r){return t&&t.isAnimationObjectGroup?new e.Composite(t,n,r):new e(t,n,r)}},{key:"sanitizeNodeName",value:function(e){return e.replace(/\s/g,"_").replace(al,"")}},{key:"parseTrackName",value:function(e){var t=fl.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==dl.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}},{key:"findNode",value:function(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}]),e}();vl.Composite=pl,vl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vl.prototype.GetterByBindingType=[vl.prototype._getValue_direct,vl.prototype._getValue_array,vl.prototype._getValue_arrayElement,vl.prototype._getValue_toArray],vl.prototype.SetterByBindingTypeAndVersioning=[[vl.prototype._setValue_direct,vl.prototype._setValue_direct_setNeedsUpdate,vl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vl.prototype._setValue_array,vl.prototype._setValue_array_setNeedsUpdate,vl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vl.prototype._setValue_arrayElement,vl.prototype._setValue_arrayElement_setNeedsUpdate,vl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vl.prototype._setValue_fromArray,vl.prototype._setValue_fromArray_setNeedsUpdate,vl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],function(){function e(){Object(p.a)(this,e),this.uuid=Re(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,r=arguments.length;n!==r;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}return Object(v.a)(e,[{key:"add",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,a=i.length,o=void 0,s=e.length,u=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,d=t[f];if(void 0===d){d=s++,t[f]=d,e.push(h);for(var p=0,v=a;p!==v;++p)i[p].push(new vl(h,n[p],r[p]))}else if(d<u){o=e[d];var m=--u,g=e[m];t[g.uuid]=d,e[d]=g,t[f]=m,e[m]=h;for(var y=0,b=a;y!==b;++y){var _=i[y],x=_[m],w=_[d];_[d]=x,void 0===w&&(w=new vl(h,n[y],r[y])),_[m]=w}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}},{key:"remove",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,l=t[u];if(void 0!==l&&l>=i){var c=i++,h=e[c];t[h.uuid]=l,e[l]=h,t[u]=c,e[c]=s;for(var f=0,d=r;f!==d;++f){var p=n[f],v=p[c],m=p[l];p[l]=v,p[c]=m}}}this.nCachedObjects_=i}},{key:"uncache",value:function(){for(var e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length,i=this.nCachedObjects_,a=e.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=t[l];if(void 0!==c)if(delete t[l],c<i){var h=--i,f=e[h],d=--a,p=e[d];t[f.uuid]=c,e[c]=f,t[p.uuid]=h,e[h]=p,e.pop();for(var v=0,m=r;v!==m;++v){var g=n[v],y=g[h],b=g[d];g[c]=y,g[h]=b,g.pop()}}else{var _=--a,x=e[_];_>0&&(t[x.uuid]=c),e[c]=x,e.pop();for(var w=0,T=r;w!==T;++w){var S=n[w];S[c]=S[_],S.pop()}}}this.nCachedObjects_=i}},{key:"subscribe_",value:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=this.nCachedObjects_,l=new Array(s.length);n[e]=r=i.length,a.push(e),o.push(t),i.push(l);for(var c=u,h=s.length;c!==h;++c)l[c]=new vl(s[c],e,t);return l}},{key:"unsubscribe_",value:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}]),e}().prototype.isAnimationObjectGroup=!0;var ml=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;Object(p.a)(this,e),this._mixer=t,this._clip=n,this._localRoot=r,this.blendMode=i;for(var a=n.tracks,o=a.length,s=new Array(o),u={endingStart:pe,endingEnd:pe},l=0;l!==o;++l){var c=a[l].createInterpolant(null);s[l]=c,c.settings=u}this._interpolantSettings=u,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return Object(v.a)(e,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(e){return this._startTime=e,this}},{key:"setLoop",value:function(e,t){return this.loop=e,this.repetitions=t,this}},{key:"setEffectiveWeight",value:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(e){return this._scheduleFading(e,0,1)}},{key:"fadeOut",value:function(e){return this._scheduleFading(e,1,0)}},{key:"crossFadeFrom",value:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=r/i;e.warp(1,i/r,t),this.warp(a,1,t)}return this}},{key:"crossFadeTo",value:function(e,t,n){return e.crossFadeFrom(this,t,n)}},{key:"stopFading",value:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"setEffectiveTimeScale",value:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}},{key:"syncWith",value:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}},{key:"halt",value:function(e){return this.warp(this._effectiveTimeScale,0,e)}},{key:"warp",value:function(e,t,n){var r=this._mixer,i=r.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/a,u[1]=t/a,this}},{key:"stopWarping",value:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0){var u=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case ye:for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(o),l[c].accumulateAdditive(s);break;case ge:default:for(var f=0,d=u.length;f!==d;++f)u[f].evaluate(o),l[f].accumulate(r,s)}}}else this._updateWeight(e)}},{key:"_updateWeight",value:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(e){var t=this._clip.duration,n=this.loop,r=this.time+e,i=this._loopCount,a=2202===n;if(0===e)return-1===i?r:a&&1==(1&i)?t-r:r;if(2200===n){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),r>=t||r<0){var o=Math.floor(r/t);r-=t*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r=e>0?t:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&1==(1&i))return t-r}return r}},{key:"_setEndings",value:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=ve,r.endingEnd=ve):(r.endingStart=e?this.zeroSlopeAtStart?ve:pe:me,r.endingEnd=t?this.zeroSlopeAtEnd?ve:pe:me)}},{key:"_scheduleFading",value:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}]),e}();(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this))._root=e,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return Object(v.a)(n,[{key:"_bindAction",value:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(u[s]=l={});for(var c=0;c!==i;++c){var h=r[c],f=h.name,d=l[f];if(void 0!==d)a[c]=d;else{if(void 0!==(d=a[c])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,f));continue}++(d=new il(vl.create(n,f,t&&t._propertyBindings[c].binding.parsedPath),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,f),a[c]=d}o[c].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}},{key:"_deactivateAction",value:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions}},{key:"_addInactiveAction",value:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e}},{key:"_removeInactiveAction",value:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)}},{key:"_removeInactiveBindingsForAction",value:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}}},{key:"_lendAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackAction",value:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_addInactiveBinding",value:function(e,t,n){var r=this._bindingsByRootAndName,i=this._bindings,a=r[t];void 0===a&&(r[t]=a={}),a[n]=e,e._cacheIndex=i.length,i.push(e)}},{key:"_removeInactiveBinding",value:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i],0===Object.keys(o).length&&delete a[r]}},{key:"_lendBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_takeBackBinding",value:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}},{key:"_lendControlInterpolant",value:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new pu(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n}},{key:"_takeBackControlInterpolant",value:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}},{key:"clipAction",value:function(e,t,n){var r=t||this._root,i=r.uuid,a="string"==typeof e?Su.findByName(r,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:ge),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var c=new ml(this,a,t,n);return this._bindAction(c,u),this._addInactiveAction(c,o,i),c}},{key:"existingAction",value:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?Su.findByName(n,e):e,a=this._actionsByClip[i?i.uuid:e];return void 0!==a&&a.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var e=this._actions,t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}},{key:"update",value:function(e){for(var t=this._actions,n=this._nActiveActions,r=this.time+=e*=this.timeScale,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(r,e,i,a);for(var s=this._bindings,u=this._nActiveBindings,l=0;l!==u;++l)s[l].apply(a);return this}},{key:"setTime",value:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}},{key:"uncacheRoot",value:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n})(Ee).prototype._controlInterpolantsResultBuffer=new Float32Array(1);var gl=function(){function e(t){Object(p.a)(this,e),"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}return Object(v.a)(e,[{key:"clone",value:function(){return new e(void 0===this.value.clone?this.value:this.value.clone())}}]),e}();(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(p.a)(this,n),(i=t.call(this,e,r)).meshPerAttribute=a,i}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},{key:"clone",value:function(e){var t=Object(_.a)(Object(x.a)(n.prototype),"clone",this).call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(e){var t=Object(_.a)(Object(x.a)(n.prototype),"toJSON",this).call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n})(ho).prototype.isInstancedInterleavedBuffer=!0,function(){function e(t,n,r,i,a){Object(p.a)(this,e),this.buffer=t,this.type=n,this.itemSize=r,this.elementSize=i,this.count=a,this.version=0}return Object(v.a)(e,[{key:"needsUpdate",set:function(e){!0===e&&this.version++}},{key:"setBuffer",value:function(e){return this.buffer=e,this}},{key:"setType",value:function(e,t){return this.type=e,this.elementSize=t,this}},{key:"setItemSize",value:function(e){return this.itemSize=e,this}},{key:"setCount",value:function(e){return this.count=e,this}}]),e}().prototype.isGLBufferAttribute=!0;var yl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(p.a)(this,e),this.radius=t,this.phi=n,this.theta=r,this}return Object(v.a)(e,[{key:"set",value:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}},{key:"copy",value:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}},{key:"makeSafe",value:function(){var e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}},{key:"setFromVector3",value:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}},{key:"setFromCartesianCoords",value:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ie(t/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}(),bl=new Fe,_l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fe(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Fe(-1/0,-1/0);Object(p.a)(this,e),this.min=t,this.max=n}return Object(v.a)(e,[{key:"set",value:function(e,t){return this.min.copy(e),this.max.copy(t),this}},{key:"setFromPoints",value:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}},{key:"setFromCenterAndSize",value:function(e,t){var n=bl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(e){return this.min.copy(e.min),this.max.copy(e.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(e){return this.min.min(e),this.max.max(e),this}},{key:"expandByVector",value:function(e){return this.min.sub(e),this.max.add(e),this}},{key:"expandByScalar",value:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this}},{key:"containsPoint",value:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}},{key:"containsBox",value:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}},{key:"getParameter",value:function(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}},{key:"clampPoint",value:function(e,t){return t.copy(e).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(e){return bl.copy(e).clamp(this.min,this.max).sub(e).length()}},{key:"intersect",value:function(e){return this.min.max(e.min),this.max.min(e.max),this}},{key:"union",value:function(e){return this.min.min(e.min),this.max.max(e.max),this}},{key:"translate",value:function(e){return this.min.add(e),this.max.add(e),this}},{key:"equals",value:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}]),e}();_l.prototype.isBox2=!0;var xl=new tt,wl=new tt,Tl=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new tt;Object(p.a)(this,e),this.start=t,this.end=n}return Object(v.a)(e,[{key:"set",value:function(e,t){return this.start.copy(e),this.end.copy(t),this}},{key:"copy",value:function(e){return this.start.copy(e.start),this.end.copy(e.end),this}},{key:"getCenter",value:function(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(e){return e.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}},{key:"closestPointToPointParameter",value:function(e,t){xl.subVectors(e,this.start),wl.subVectors(this.end,this.start);var n=wl.dot(wl),r=wl.dot(xl)/n;return t&&(r=Ie(r,0,1)),r}},{key:"closestPointToPoint",value:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}},{key:"equals",value:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),e}();(function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this)).material=e,r.render=function(){},r.hasPositions=!1,r.hasNormals=!1,r.hasColors=!1,r.hasUvs=!1,r.positionArray=null,r.normalArray=null,r.colorArray=null,r.uvArray=null,r.count=0,r}return n})(rn).prototype.isImmediateRenderObject=!0;var Sl=new tt,Ml=new jt,Ol=new jt,El=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;Object(p.a)(this,n);for(var i=kl(e),a=new Gn,o=[],s=[],u=new Sn(0,0,1),l=new Sn(0,1,0),c=0;c<i.length;c++){var h=i[c];h.parent&&h.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),s.push(u.r,u.g,u.b),s.push(l.r,l.g,l.b))}a.setAttribute("position",new Pn(o,3)),a.setAttribute("color",new Pn(s,3));var f=new Xo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(r=t.call(this,a,f)).type="SkeletonHelper",r.isSkeletonHelper=!0,r.root=e,r.bones=i,r.matrix=e.matrixWorld,r.matrixAutoUpdate=!1,r}return Object(v.a)(n,[{key:"updateMatrixWorld",value:function(e){var t=this.bones,r=this.geometry,i=r.getAttribute("position");Ol.copy(this.root.matrixWorld).invert();for(var a=0,o=0;a<t.length;a++){var s=t[a];s.parent&&s.parent.isBone&&(Ml.multiplyMatrices(Ol,s.matrixWorld),Sl.setFromMatrixPosition(Ml),i.setXYZ(o,Sl.x,Sl.y,Sl.z),Ml.multiplyMatrices(Ol,s.parent.matrixWorld),Sl.setFromMatrixPosition(Ml),i.setXYZ(o+1,Sl.x,Sl.y,Sl.z),o+=2)}r.getAttribute("position").needsUpdate=!0,Object(_.a)(Object(x.a)(n.prototype),"updateMatrixWorld",this).call(this,e)}}]),n}(ts);function kl(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,kl(e.children[n]));return t}var Al=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;Object(p.a)(this,n),a=new Sn(a),o=new Sn(o);for(var s=i/2,u=r/i,l=r/2,c=[],h=[],f=0,d=0,v=-l;f<=i;f++,v+=u){c.push(-l,0,v,l,0,v),c.push(v,0,-l,v,0,l);var m=f===s?a:o;m.toArray(h,d),m.toArray(h,d+=3),m.toArray(h,d+=3),m.toArray(h,d+=3),d+=3}var g=new Gn;g.setAttribute("position",new Pn(c,3)),g.setAttribute("color",new Pn(h,3));var y=new Xo({vertexColors:!0,toneMapped:!1});return(e=t.call(this,g,y)).type="GridHelper",e}return n}(ts),Cl=new Float32Array(1);new Int32Array(Cl.buffer),cs.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(cs.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Cs.prototype.fromPoints=function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},Al.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},El.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Au.prototype.extractUrlBase=function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Qu.extractUrlBase(e)},Au.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},_l.prototype.center=function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},_l.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},_l.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},_l.prototype.size=function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},it.prototype.center=function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},it.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},it.prototype.isIntersectionBox=function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},it.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},it.prototype.size=function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},Tt.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},wr.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Tl.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Ve.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},Ve.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Ve.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},Ve.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},Ve.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},Ve.prototype.getInverse=function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},jt.prototype.extractPosition=function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},jt.prototype.flattenToArrayOffset=function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},jt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new tt).setFromMatrixColumn(this,3)},jt.prototype.setRotationFromQuaternion=function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},jt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},jt.prototype.multiplyVector3=function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},jt.prototype.multiplyVector4=function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},jt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},jt.prototype.rotateAxis=function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},jt.prototype.crossVector=function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},jt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},jt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},jt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},jt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},jt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},jt.prototype.applyToBufferAttribute=function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},jt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},jt.prototype.makeFrustum=function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)},jt.prototype.getInverse=function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},br.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},et.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},et.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Pt.prototype.isIntersectionBox=function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Pt.prototype.isIntersectionPlane=function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},Pt.prototype.isIntersectionSphere=function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},vn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},vn.prototype.barycoordFromPoint=function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},vn.prototype.midpoint=function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},vn.prototypenormal=function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},vn.prototype.plane=function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},vn.barycoordFromPoint=function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),vn.getBarycoord(e,t,n,r,i)},vn.normal=function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),vn.getNormal(e,t,n,r)},Ps.prototype.extractAllPoints=function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Ps.prototype.extrude=function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ou(this,e)},Ps.prototype.makeGeometry=function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new uu(this,e)},Fe.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Fe.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},Fe.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},tt.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},tt.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},tt.prototype.getPositionFromMatrix=function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},tt.prototype.getScaleFromMatrix=function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},tt.prototype.getColumnFromMatrix=function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},tt.prototype.applyProjection=function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},tt.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},tt.prototype.distanceToManhattan=function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},tt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ze.prototype.fromAttribute=function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},Ze.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},rn.prototype.getChildByName=function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},rn.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},rn.prototype.translate=function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},rn.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},rn.prototype.applyMatrix=function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(rn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),rr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(rr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Io.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},hr.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Iu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(kn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Me},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Me)}}}),kn.prototype.setDynamic=function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Me:Se),this},kn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},kn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Gn.prototype.addIndex=function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},Gn.prototype.addAttribute=function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new kn(arguments[1],arguments[2])))},Gn.prototype.addDrawCall=function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},Gn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Gn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Gn.prototype.removeAttribute=function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},Gn.prototype.applyMatrix=function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(Gn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),ho.prototype.setDynamic=function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?Me:Se),this},ho.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ou.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ou.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ou.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},co.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},gl.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(gn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Sn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(lr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),uo.prototype.clearTarget=function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},uo.prototype.animate=function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},uo.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},uo.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},uo.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},uo.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},uo.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},uo.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},uo.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},uo.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},uo.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},uo.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},uo.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},uo.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},uo.prototype.enableScissorTest=function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},uo.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},uo.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},uo.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},uo.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},uo.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},uo.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},uo.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},uo.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},uo.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},uo.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(uo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?_e:be}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(Za.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Qe.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),nl.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new tl).load(e,function(e){t.setBuffer(e)}),this},rl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},dr.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},dr.prototype.clear=function(e,t,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},qe.crossOrigin=void 0,qe.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ru;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},qe.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new Lu;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},qe.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},qe.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"133"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="133");var Pl=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).dracoLoader=null,r.ktx2Loader=null,r.meshoptDecoder=null,r.pluginCallbacks=[],r.register(function(e){return new Dl(e)}),r.register(function(e){return new Ul(e)}),r.register(function(e){return new Fl(e)}),r.register(function(e){return new Nl(e)}),r.register(function(e){return new Hl(e)}),r.register(function(e){return new Gl(e)}),r.register(function(e){return new Bl(e)}),r.register(function(e){return new Rl(e)}),r.register(function(e){return new zl(e)}),r}return Object(v.a)(n,[{key:"load",value:function(e,t,n,r){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Qu.extractUrlBase(e),this.manager.itemStart(e);var o=function(t){r?r(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},s=new Pu(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{a.parse(n,i,function(n){t(n),a.manager.itemEnd(e)},o)}catch(r){o(r)}},n,o)}},{key:"setDRACOLoader",value:function(e){return this.dracoLoader=e,this}},{key:"setDDSLoader",value:function(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}},{key:"setKTX2Loader",value:function(e){return this.ktx2Loader=e,this}},{key:"setMeshoptDecoder",value:function(e){return this.meshoptDecoder=e,this}},{key:"register",value:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}},{key:"unregister",value:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}},{key:"parse",value:function(e,t,n,r){var i,a={},o={};if("string"==typeof e)i=e;else if(Qu.decodeText(new Uint8Array(e,0,4))===Vl){try{a[Ll.KHR_BINARY_GLTF]=new Wl(e)}catch(p){return void(r&&r(p))}i=a[Ll.KHR_BINARY_GLTF].content}else i=Qu.decodeText(new Uint8Array(e));var s=JSON.parse(i);if(void 0===s.asset||s.asset.version[0]<2)r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var u=new dc(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(var l=0;l<this.pluginCallbacks.length;l++){var c=this.pluginCallbacks[l](u);o[c.name]=c,a[c.name]=!0}if(s.extensionsUsed)for(var h=0;h<s.extensionsUsed.length;++h){var f=s.extensionsUsed[h],d=s.extensionsRequired||[];switch(f){case Ll.KHR_MATERIALS_UNLIT:a[f]=new Il;break;case Ll.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:a[f]=new Yl;break;case Ll.KHR_DRACO_MESH_COMPRESSION:a[f]=new Xl(s,this.dracoLoader);break;case Ll.KHR_TEXTURE_TRANSFORM:a[f]=new ql;break;case Ll.KHR_MESH_QUANTIZATION:a[f]=new Jl;break;default:d.indexOf(f)>=0&&void 0===o[f]&&console.warn('THREE.GLTFLoader: Unknown extension "'+f+'".')}}u.setExtensions(a),u.setPlugins(o),u.parse(n,r)}}}]),n}(Au);function jl(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}var Ll={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"},Rl=function(){function e(t){Object(p.a)(this,e),this.parser=t,this.name=Ll.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}return Object(v.a)(e,[{key:"_markDefs",value:function(){for(var e=this.parser,t=this.parser.json.nodes||[],n=0,r=t.length;n<r;n++){var i=t[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}}},{key:"_loadLight",value:function(e){var t=this.parser,n="light:"+e,r=t.cache.get(n);if(r)return r;var i,a=t.json,o=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],s=new Sn(16777215);void 0!==o.color&&s.fromArray(o.color);var u=void 0!==o.range?o.range:0;switch(o.type){case"directional":(i=new Ku(s)).target.position.set(0,0,-1),i.add(i.target);break;case"point":(i=new Xu(s)).distance=u;break;case"spot":(i=new Uu(s)).distance=u,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,i.angle=o.spot.outerConeAngle,i.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,i.target.position.set(0,0,-1),i.add(i.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return i.position.set(0,0,0),i.decay=2,void 0!==o.intensity&&(i.intensity=o.intensity),i.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(i),t.cache.add(n,r),r}},{key:"createNodeAttachment",value:function(e){var t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then(function(e){return n._getNodeRef(t.cache,i,e)})}}]),e}(),Il=function(){function e(){Object(p.a)(this,e),this.name=Ll.KHR_MATERIALS_UNLIT}return Object(v.a)(e,[{key:"getMaterialType",value:function(){return Mn}},{key:"extendParams",value:function(e,t,n){var r=[];e.color=new Sn(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(r)}}]),e}(),Dl=function(){function e(t){Object(p.a)(this,e),this.parser=t,this.name=Ll.KHR_MATERIALS_CLEARCOAT}return Object(v.a)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?cu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Fe(o,o)}return Promise.all(i)}}]),e}(),Nl=function(){function e(t){Object(p.a)(this,e),this.parser=t,this.name=Ll.KHR_MATERIALS_TRANSMISSION}return Object(v.a)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?cu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(i)}}]),e}(),Hl=function(){function e(t){Object(p.a)(this,e),this.parser=t,this.name=Ll.KHR_MATERIALS_VOLUME}return Object(v.a)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?cu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;var o=a.attenuationColor||[1,1,1];return t.attenuationTint=new Sn(o[0],o[1],o[2]),Promise.all(i)}}]),e}(),Gl=function(){function e(t){Object(p.a)(this,e),this.parser=t,this.name=Ll.KHR_MATERIALS_IOR}return Object(v.a)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?cu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}]),e}(),Bl=function(){function e(t){Object(p.a)(this,e),this.parser=t,this.name=Ll.KHR_MATERIALS_SPECULAR}return Object(v.a)(e,[{key:"getMaterialType",value:function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?cu:null}},{key:"extendMaterialParams",value:function(e,t){var n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();var i=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));var o=a.specularColorFactor||[1,1,1];return t.specularTint=new Sn(o[0],o[1],o[2]),void 0!==a.specularColorTexture&&i.push(n.assignTexture(t,"specularTintMap",a.specularColorTexture).then(function(e){e.encoding=_e})),Promise.all(i)}}]),e}(),Ul=function(){function e(t){Object(p.a)(this,e),this.parser=t,this.name=Ll.KHR_TEXTURE_BASISU}return Object(v.a)(e,[{key:"loadTexture",value:function(e){var t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;var i=n.images[r.extensions[this.name].source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i,a)}}]),e}(),Fl=function(){function e(t){Object(p.a)(this,e),this.parser=t,this.name=Ll.EXT_TEXTURE_WEBP,this.isSupported=null}return Object(v.a)(e,[{key:"loadTexture",value:function(e){var t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;var a=r.images[i.extensions[t].source],o=n.textureLoader;if(a.uri){var s=n.options.manager.getHandler(a.uri);null!==s&&(o=s)}return this.detectSupport().then(function(i){if(i)return n.loadTextureImage(e,a,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}},{key:"detectSupport",value:function(){return this.isSupported||(this.isSupported=new Promise(function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}]),e}(),zl=function(){function e(t){Object(p.a)(this,e),this.name=Ll.EXT_MESHOPT_COMPRESSION,this.parser=t}return Object(v.a)(e,[{key:"loadBufferView",value:function(e){var t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){var r=n.extensions[this.name],i=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,a.ready]).then(function(e){var t=r.byteOffset||0,n=r.byteLength||0,i=r.count,o=r.byteStride,s=new ArrayBuffer(i*o),u=new Uint8Array(e[0],t,n);return a.decodeGltfBuffer(new Uint8Array(s),i,o,u,r.mode,r.filter),s})}return null}}]),e}(),Vl="glTF",Wl=function e(t){Object(p.a)(this,e),this.name=Ll.KHR_BINARY_GLTF,this.content=null,this.body=null;var n=new DataView(t,0,12);if(this.header={magic:Qu.decodeText(new Uint8Array(t.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Vl)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=this.header.length-12,i=new DataView(t,12),a=0;a<r;){var o=i.getUint32(a,!0),s=i.getUint32(a+=4,!0);if(a+=4,1313821514===s){var u=new Uint8Array(t,12+a,o);this.content=Qu.decodeText(u)}else if(5130562===s){var l=12+a;this.body=t.slice(l,l+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")},Xl=function(){function e(t,n){if(Object(p.a)(this,e),!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ll.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=n,this.dracoLoader.preload()}return Object(v.a)(e,[{key:"decodePrimitive",value:function(e,t){var n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},s={},u={};for(var l in a){var c=ic[l]||l.toLowerCase();o[c]=a[l]}for(var h in e.attributes){var f=ic[h]||h.toLowerCase();if(void 0!==a[h]){var d=n.accessors[e.attributes[h]];u[f]=ec[d.componentType],s[f]=!0===d.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t){r.decodeDracoFile(e,function(e){for(var n in e.attributes){var r=s[n];void 0!==r&&(e.attributes[n].normalized=r)}t(e)},o,u)})})}}]),e}(),ql=function(){function e(){Object(p.a)(this,e),this.name=Ll.KHR_TEXTURE_TRANSFORM}return Object(v.a)(e,[{key:"extendTexture",value:function(e,t){return void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}]),e}(),Kl=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;Object(p.a)(this,n),(r=t.call(this)).isGLTFSpecularGlossinessMaterial=!0;var i=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),a=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),u=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),l={specular:{value:(new Sn).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};return r._extraUniforms=l,r.onBeforeCompile=function(e){for(var t in l)e.uniforms[t]=l[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",i).replace("#include <metalnessmap_pars_fragment>",a).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",s).replace("#include <lights_physical_fragment>",u)},Object.defineProperties(Object(b.a)(r),{specular:{get:function(){return l.specular.value},set:function(e){l.specular.value=e}},specularMap:{get:function(){return l.specularMap.value},set:function(e){l.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return l.glossiness.value},set:function(e){l.glossiness.value=e}},glossinessMap:{get:function(){return l.glossinessMap.value},set:function(e){l.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete r.metalness,delete r.roughness,delete r.metalnessMap,delete r.roughnessMap,r.setValues(e),r}return Object(v.a)(n,[{key:"copy",value:function(e){return Object(_.a)(Object(x.a)(n.prototype),"copy",this).call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}]),n}(lu),Yl=function(){function e(){Object(p.a)(this,e),this.name=Ll.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}return Object(v.a)(e,[{key:"getMaterialType",value:function(){return Kl}},{key:"extendParams",value:function(e,t,n){var r=t.extensions[this.name];e.color=new Sn(1,1,1),e.opacity=1;var i=[];if(Array.isArray(r.diffuseFactor)){var a=r.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new Sn(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new Sn(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var o=r.specularGlossinessTexture;i.push(n.assignTexture(e,"glossinessMap",o)),i.push(n.assignTexture(e,"specularMap",o))}return Promise.all(i)}},{key:"createMaterial",value:function(e){var t=new Kl(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=0,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}]),e}(),Jl=function e(){Object(p.a)(this,e),this.name=Ll.KHR_MESH_QUANTIZATION},Zl=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r,i,a){return Object(p.a)(this,n),t.call(this,e,r,i,a)}return Object(v.a)(n,[{key:"copySampleValue_",value:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r,a=0;a!==r;a++)t[a]=n[i+a];return t}}]),n}(fu);Zl.prototype.beforeStart_=Zl.prototype.copySampleValue_,Zl.prototype.afterEnd_=Zl.prototype.copySampleValue_,Zl.prototype.interpolate_=function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=2*o,u=3*o,l=r-t,c=(n-t)/l,h=c*c,f=h*c,d=e*u,p=d-u,v=-2*f+3*h,m=f-h,g=1-v,y=m-h+c,b=0;b!==o;b++)i[b]=g*a[p+b+o]+y*(a[p+b+s]*l)+v*a[d+b+o]+m*(a[d+b]*l);return i};var Ql=new et,$l=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(v.a)(n,[{key:"interpolate_",value:function(e,t,r,i){var a=Object(_.a)(Object(x.a)(n.prototype),"interpolate_",this).call(this,e,t,r,i);return Ql.fromArray(a).normalize().toArray(a),a}}]),n}(Zl),ec={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},tc={9728:J,9729:$,9984:Z,9985:1007,9986:Q,9987:ee},nc={33071:K,33648:Y,10497:q},rc={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ic={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ac={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},oc={CUBICSPLINE:void 0,LINEAR:fe,STEP:he};function sc(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function uc(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function lc(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function cc(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(var a=0,o=i.length;a<o;a++)e.morphTargetDictionary[i[a]]=a}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function hc(e){for(var t="",n=Object.keys(e).sort(),r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function fc(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}var dc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(p.a)(this,e),this.json=t,this.extensions={},this.plugins={},this.options=n,this.cache=new jl,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},this.textureLoader="undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?new el(this.options.manager):new Ru(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Pu(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}return Object(v.a)(e,[{key:"setExtensions",value:function(e){this.extensions=e}},{key:"setPlugins",value:function(e){this.plugins=e}},{key:"parse",value:function(e,t){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all(this._invokeAll(function(e){return e.beforeRoot&&e.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(t){var a={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};uc(i,a,r),lc(a,r),Promise.all(n._invokeAll(function(e){return e.afterRoot&&e.afterRoot(a)})).then(function(){e(a)})}).catch(t)}},{key:"_markDefs",value:function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r=0,i=t.length;r<i;r++)for(var a=t[r].joints,o=0,s=a.length;o<s;o++)e[a[o]].isBone=!0;for(var u=0,l=e.length;u<l;u++){var c=e[u];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(n[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}}},{key:"_addNodeRef",value:function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}},{key:"_getNodeRef",value:function(e,t,n){var r=this;if(e.refs[t]<=1)return n;var i=n.clone();return function e(t,n){var i=r.associations.get(t);null!=i&&r.associations.set(n,i);var a,o=Object(I.a)(t.children.entries());try{for(o.s();!(a=o.n()).done;){var s=Object(N.a)(a.value,2);e(s[1],n.children[s[0]])}}catch(u){o.e(u)}finally{o.f()}}(n,i),i.name+="_instance_"+e.uses[t]++,i}},{key:"_invokeOne",value:function(e){var t=Object.values(this.plugins);t.push(this);for(var n=0;n<t.length;n++){var r=e(t[n]);if(r)return r}return null}},{key:"_invokeAll",value:function(e){var t=Object.values(this.plugins);t.unshift(this);for(var n=[],r=0;r<t.length;r++){var i=e(t[r]);i&&n.push(i)}return n}},{key:"getDependency",value:function(e,t){var n=e+":"+t,r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}},{key:"getDependencies",value:function(e){var t=this.cache.get(e);if(!t){var n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(t,r){return n.getDependency(e,r)})),this.cache.add(e,t)}return t}},{key:"loadBuffer",value:function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Ll.KHR_BINARY_GLTF].body);var r=this.options;return new Promise(function(e,i){n.load(sc(t.uri,r.path),e,void 0,function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}},{key:"loadBufferView",value:function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var n=t.byteOffset||0;return e.slice(n,n+(t.byteLength||0))})}},{key:"loadAccessor",value:function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return i.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then(function(e){var i,a,o=e[0],s=rc[r.type],u=ec[r.componentType],l=u.BYTES_PER_ELEMENT,c=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(h&&h!==l*s){var d=Math.floor(c/h),p="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+d+":"+r.count,v=t.cache.get(p);v||(i=new u(o,d*h,r.count*h/l),v=new ho(i,h/l),t.cache.add(p,v)),a=new po(v,s,c%h/l,f)}else i=null===o?new u(r.count*s):new u(o,c,r.count*s),a=new kn(i,s,f);if(void 0!==r.sparse){var m=r.sparse.values.byteOffset||0,g=new(0,ec[r.sparse.indices.componentType])(e[1],r.sparse.indices.byteOffset||0,r.sparse.count*rc.SCALAR),y=new u(e[2],m,r.sparse.count*s);null!==o&&(a=new kn(a.array.slice(),a.itemSize,a.normalized));for(var b=0,_=g.length;b<_;b++){var x=g[b];if(a.setX(x,y[b*s]),s>=2&&a.setY(x,y[b*s+1]),s>=3&&a.setZ(x,y[b*s+2]),s>=4&&a.setW(x,y[b*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a})}},{key:"loadTexture",value:function(e){var t=this.json,n=t.images[t.textures[e].source],r=this.textureLoader;if(n.uri){var i=this.options.manager.getHandler(n.uri);null!==i&&(r=i)}return this.loadTextureImage(e,n,r)}},{key:"loadTextureImage",value:function(e,t,n){var r=this,i=this.json,a=this.options,o=i.textures[e],s=(t.uri||t.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];var u=self.URL||self.webkitURL,l=t.uri||"",c=!1;if(void 0!==t.bufferView)l=r.getDependency("bufferView",t.bufferView).then(function(e){c=!0;var n=new Blob([e],{type:t.mimeType});return l=u.createObjectURL(n)});else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");var h=Promise.resolve(l).then(function(e){return new Promise(function(t,r){var i=t;!0===n.isImageBitmapLoader&&(i=function(e){var n=new Ye(e);n.needsUpdate=!0,t(n)}),n.load(sc(e,a.path),i,void 0,r)})}).then(function(t){!0===c&&u.revokeObjectURL(l),t.flipY=!1,o.name&&(t.name=o.name);var n=(i.samplers||{})[o.sampler]||{};return t.magFilter=tc[n.magFilter]||$,t.minFilter=tc[n.minFilter]||ee,t.wrapS=nc[n.wrapS]||q,t.wrapT=nc[n.wrapT]||q,r.associations.set(t,{textures:e}),t}).catch(function(){return console.error("THREE.GLTFLoader: Couldn't load texture",l),null});return this.textureCache[s]=h,h}},{key:"assignTexture",value:function(e,t,n){var r=this;return this.getDependency("texture",n.index).then(function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[Ll.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[Ll.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var o=r.associations.get(i);i=r.extensions[Ll.KHR_TEXTURE_TRANSFORM].extendTexture(i,a),r.associations.set(i,o)}}return e[t]=i,i})}},{key:"assignFinalMaterial",value:function(e){var t=e.geometry,n=e.material,r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){var o="PointsMaterial:"+n.uuid,s=this.cache.get(o);s||(s=new rs,gn.prototype.copy.call(s,n),s.color.copy(n.color),s.map=n.map,s.sizeAttenuation=!1,this.cache.add(o,s)),n=s}else if(e.isLine){var u="LineBasicMaterial:"+n.uuid,l=this.cache.get(u);l||(l=new Xo,gn.prototype.copy.call(l,n),l.color.copy(n.color),this.cache.add(u,l)),n=l}if(r||i||a){var c="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),r&&(c+="derivative-tangents:"),i&&(c+="vertex-colors:"),a&&(c+="flat-shading:");var h=this.cache.get(c);h||(h=n.clone(),i&&(h.vertexColors=!0),a&&(h.flatShading=!0),r&&(h.normalScale&&(h.normalScale.y*=-1),h.clearcoatNormalScale&&(h.clearcoatNormalScale.y*=-1)),this.cache.add(c,h),this.associations.set(h,this.associations.get(n))),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}},{key:"getMaterialType",value:function(){return lu}},{key:"loadMaterial",value:function(e){var t,n=this,r=this.extensions,i=this.json.materials[e],a={},o=i.extensions||{},s=[];if(o[Ll.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=r[Ll.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),s.push(u.extendParams(a,i,n))}else if(o[Ll.KHR_MATERIALS_UNLIT]){var l=r[Ll.KHR_MATERIALS_UNLIT];t=l.getMaterialType(),s.push(l.extendParams(a,i,n))}else{var c=i.pbrMetallicRoughness||{};if(a.color=new Sn(1,1,1),a.opacity=1,Array.isArray(c.baseColorFactor)){var h=c.baseColorFactor;a.color.fromArray(h),a.opacity=h[3]}void 0!==c.baseColorTexture&&s.push(n.assignTexture(a,"map",c.baseColorTexture)),a.metalness=void 0!==c.metallicFactor?c.metallicFactor:1,a.roughness=void 0!==c.roughnessFactor?c.roughnessFactor:1,void 0!==c.metallicRoughnessTexture&&(s.push(n.assignTexture(a,"metalnessMap",c.metallicRoughnessTexture)),s.push(n.assignTexture(a,"roughnessMap",c.metallicRoughnessTexture))),t=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),s.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)})))}!0===i.doubleSided&&(a.side=2);var f=i.alphaMode||"OPAQUE";if("BLEND"===f?(a.transparent=!0,a.depthWrite=!1):(a.format=se,a.transparent=!1,"MASK"===f&&(a.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&t!==Mn&&(s.push(n.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new Fe(1,1),void 0!==i.normalTexture.scale)){var d=i.normalTexture.scale;a.normalScale.set(d,d)}return void 0!==i.occlusionTexture&&t!==Mn&&(s.push(n.assignTexture(a,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(a.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&t!==Mn&&(a.emissive=(new Sn).fromArray(i.emissiveFactor)),void 0!==i.emissiveTexture&&t!==Mn&&s.push(n.assignTexture(a,"emissiveMap",i.emissiveTexture)),Promise.all(s).then(function(){var o;return o=t===Kl?r[Ll.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new t(a),i.name&&(o.name=i.name),o.map&&(o.map.encoding=_e),o.emissiveMap&&(o.emissiveMap.encoding=_e),lc(o,i),n.associations.set(o,{materials:e}),i.extensions&&uc(r,o,i),o})}},{key:"createUniqueName",value:function(e){for(var t=vl.sanitizeNodeName(e||""),n=t,r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}},{key:"loadGeometries",value:function(e){var t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[Ll.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then(function(n){return vc(n,e,t)})}for(var a,o,s=[],u=0,l=e.length;u<l;u++){var c,h=e[u],f=(o=(a=h).extensions&&a.extensions[Ll.KHR_DRACO_MESH_COMPRESSION])?"draco:"+o.bufferView+":"+o.indices+":"+hc(o.attributes):a.indices+":"+hc(a.attributes)+":"+a.mode,d=r[f];if(d)s.push(d.promise);else c=h.extensions&&h.extensions[Ll.KHR_DRACO_MESH_COMPRESSION]?i(h):vc(new Gn,h,t),r[f]={primitive:h,promise:c},s.push(c)}return Promise.all(s)}},{key:"loadMesh",value:function(e){for(var t,n=this,r=this.extensions,i=this.json.meshes[e],a=i.primitives,o=[],s=0,u=a.length;s<u;s++){var l=void 0===a[s].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new lu({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:0})),t.DefaultMaterial):this.getDependency("material",a[s].material);o.push(l)}return o.push(n.loadGeometries(a)),Promise.all(o).then(function(t){for(var o=t.slice(0,t.length-1),s=t[t.length-1],u=[],l=0,c=s.length;l<c;l++){var h=s[l],f=a[l],d=void 0,p=o[l];if(4===f.mode||5===f.mode||6===f.mode||void 0===f.mode)!0!==(d=!0===i.isSkinnedMesh?new Io(h,p):new rr(h,p)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),5===f.mode?d.geometry=mc(d.geometry,1):6===f.mode&&(d.geometry=mc(d.geometry,2));else if(1===f.mode)d=new ts(h,p);else if(3===f.mode)d=new Qo(h,p);else if(2===f.mode)d=new ns(h,p);else{if(0!==f.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new us(h,p)}Object.keys(d.geometry.morphAttributes).length>0&&cc(d,i),d.name=n.createUniqueName(i.name||"mesh_"+e),lc(d,i),f.extensions&&uc(r,d,f),n.assignFinalMaterial(d),u.push(d)}for(var v=0,m=u.length;v<m;v++)n.associations.set(u[v],{meshes:e,primitives:v});if(1===u.length)return u[0];var g=new no;n.associations.set(g,{meshes:e});for(var y=0,b=u.length;y<b;y++)g.add(u[y]);return g})}},{key:"loadCamera",value:function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new hr(Ue.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new Ir(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),lc(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}},{key:"loadSkin",value:function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return n.inverseBindMatrices=e,n})}},{key:"loadAnimation",value:function(e){for(var t=this.json.animations[e],n=[],r=[],i=[],a=[],o=[],s=0,u=t.channels.length;s<u;s++){var l=t.channels[s],c=t.samplers[l.sampler],h=l.target,f=void 0!==t.parameters?t.parameters[c.input]:c.input,d=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",void 0!==h.node?h.node:h.id)),r.push(this.getDependency("accessor",f)),i.push(this.getDependency("accessor",d)),a.push(c),o.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(a),Promise.all(o)]).then(function(n){for(var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=[],l=function(e,t){var n=r[e],l=i[e],c=a[e],h=o[e],f=s[e];if(void 0===n)return"continue";n.updateMatrix(),n.matrixAutoUpdate=!0;var d=void 0;switch(ac[f.path]){case ac.weights:d=bu;break;case ac.rotation:d=xu;break;case ac.position:case ac.scale:default:d=Tu}var p=n.name?n.name:n.uuid,v=void 0!==h.interpolation?oc[h.interpolation]:fe,m=[];ac[f.path]===ac.weights?n.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&m.push(e.name?e.name:e.uuid)}):m.push(p);var g=c.array;if(c.normalized){for(var y=fc(g.constructor),b=new Float32Array(g.length),_=0,x=g.length;_<x;_++)b[_]=g[_]*y;g=b}for(var w=0,T=m.length;w<T;w++){var S=new d(m[w]+"."+ac[f.path],l.array,g,v);"CUBICSPLINE"===h.interpolation&&(S.createInterpolant=function(e){return new(this instanceof xu?$l:Zl)(this.times,this.values,this.getValueSize()/3,e)},S.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(S)}},c=0,h=r.length;c<h;c++)l(c);return new Su(t.name?t.name:"animation_"+e,void 0,u)})}},{key:"createNodeMesh",value:function(e){var t=this,n=this.json.nodes[e];return void 0===n.mesh?null:t.getDependency("mesh",n.mesh).then(function(e){var r=t._getNodeRef(t.meshCache,n.mesh,e);return void 0!==n.weights&&r.traverse(function(e){if(e.isMesh)for(var t=0,r=n.weights.length;t<r;t++)e.morphTargetInfluences[t]=n.weights[t]}),r})}},{key:"loadNode",value:function(e){var t,n,r=this.extensions,i=this,a=this.json.nodes[e],o=a.name?i.createUniqueName(a.name):"";return(t=[],n=i._invokeOne(function(t){return t.createNodeMesh&&t.createNodeMesh(e)}),n&&t.push(n),void 0!==a.camera&&t.push(i.getDependency("camera",a.camera).then(function(e){return i._getNodeRef(i.cameraCache,a.camera,e)})),i._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){t.push(e)}),Promise.all(t)).then(function(t){var n;if((n=!0===a.isBone?new Do:t.length>1?new no:1===t.length?t[0]:new rn)!==t[0])for(var s=0,u=t.length;s<u;s++)n.add(t[s]);if(a.name&&(n.userData.name=a.name,n.name=o),lc(n,a),a.extensions&&uc(r,n,a),void 0!==a.matrix){var l=new jt;l.fromArray(a.matrix),n.applyMatrix4(l)}else void 0!==a.translation&&n.position.fromArray(a.translation),void 0!==a.rotation&&n.quaternion.fromArray(a.rotation),void 0!==a.scale&&n.scale.fromArray(a.scale);return i.associations.has(n)||i.associations.set(n,{}),i.associations.get(n).nodes=e,n})}},{key:"loadScene",value:function(e){var t=this.json,n=this.extensions,r=this.json.scenes[e],i=this,a=new no;r.name&&(a.name=i.createUniqueName(r.name)),lc(a,r),r.extensions&&uc(n,a,r);for(var o=r.nodes||[],s=[],u=0,l=o.length;u<l;u++)s.push(pc(o[u],a,t,i));return Promise.all(s).then(function(){return i.associations=function(e){var t,n=new Map,r=Object(I.a)(i.associations);try{for(r.s();!(t=r.n()).done;){var a=Object(N.a)(t.value,2),o=a[0];(o instanceof gn||o instanceof Ye)&&n.set(o,a[1])}}catch(s){r.e(s)}finally{r.f()}return e.traverse(function(e){var t=i.associations.get(e);null!=t&&n.set(e,t)}),n}(a),a})}}]),e}();function pc(e,t,n,r){var i=n.nodes[e];return r.getDependency("node",e).then(function(e){return void 0===i.skin?e:r.getDependency("skin",i.skin).then(function(e){for(var n=[],i=0,a=(t=e).joints.length;i<a;i++)n.push(r.getDependency("node",t.joints[i]));return Promise.all(n)}).then(function(n){return e.traverse(function(e){if(e.isMesh){for(var r=[],i=[],a=0,o=n.length;a<o;a++){var s=n[a];if(s){r.push(s);var u=new jt;void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*a),i.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new Bo(r,i),e.matrixWorld)}}),e});var t}).then(function(e){t.add(e);var a=[];if(i.children)for(var o=i.children,s=0,u=o.length;s<u;s++)a.push(pc(o[s],e,n,r));return Promise.all(a)})}function vc(e,t,n){var r=t.attributes,i=[];function a(t,r){return n.getDependency("accessor",t).then(function(t){e.setAttribute(r,t)})}for(var o in r){var s=ic[o]||o.toLowerCase();s in e.attributes||i.push(a(r[o],s))}if(void 0!==t.indices&&!e.index){var u=n.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});i.push(u)}return lc(e,t),function(e,t,n){var r=t.attributes,i=new it;if(void 0!==r.POSITION){var a=n.json.accessors[r.POSITION],o=a.min,s=a.max;if(void 0!==o&&void 0!==s){if(i.set(new tt(o[0],o[1],o[2]),new tt(s[0],s[1],s[2])),a.normalized){var u=fc(ec[a.componentType]);i.min.multiplyScalar(u),i.max.multiplyScalar(u)}var l=t.targets;if(void 0!==l){for(var c=new tt,h=new tt,f=0,d=l.length;f<d;f++){var p=l[f];if(void 0!==p.POSITION){var v=n.json.accessors[p.POSITION],m=v.min,g=v.max;if(void 0!==m&&void 0!==g){if(h.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),h.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),h.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),v.normalized){var y=fc(ec[v.componentType]);h.multiplyScalar(y)}c.max(h)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}e.boundingBox=i;var b=new Tt;i.getCenter(b.center),b.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=b}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(i).then(function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,i=!1,a=0,o=t.length;a<o;a++){var s=t[a];if(void 0!==s.POSITION&&(r=!0),void 0!==s.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);for(var u=[],l=[],c=0,h=t.length;c<h;c++){var f=t[c];if(r){var d=void 0!==f.POSITION?n.getDependency("accessor",f.POSITION):e.attributes.position;u.push(d)}if(i){var p=void 0!==f.NORMAL?n.getDependency("accessor",f.NORMAL):e.attributes.normal;l.push(p)}}return Promise.all([Promise.all(u),Promise.all(l)]).then(function(t){var n=t[1];return r&&(e.morphAttributes.position=t[0]),i&&(e.morphAttributes.normal=n),e.morphTargetsRelative=!0,e})}(e,t.targets,n):e})}function mc(e,t){var n=e.getIndex();if(null===n){var r=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)r.push(a);e.setIndex(r),n=e.getIndex()}var o=n.count-2,s=[];if(2===t)for(var u=1;u<=o;u++)s.push(n.getX(0)),s.push(n.getX(u)),s.push(n.getX(u+1));else for(var l=0;l<o;l++)l%2==0?(s.push(n.getX(l)),s.push(n.getX(l+1)),s.push(n.getX(l+2))):(s.push(n.getX(l+2)),s.push(n.getX(l+1)),s.push(n.getX(l)));s.length/3!==o&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(s),c}var gc=new WeakMap,yc=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var r;return Object(p.a)(this,n),(r=t.call(this,e)).decoderPath="",r.decoderConfig={},r.decoderBinary=null,r.decoderPending=null,r.workerLimit=4,r.workerPool=[],r.workerNextTaskID=1,r.workerSourceURL="",r.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},r.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},r}return Object(v.a)(n,[{key:"setDecoderPath",value:function(e){return this.decoderPath=e,this}},{key:"setDecoderConfig",value:function(e){return this.decoderConfig=e,this}},{key:"setWorkerLimit",value:function(e){return this.workerLimit=e,this}},{key:"load",value:function(e,t,n,r){var i=this,a=new Pu(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){i.decodeGeometry(e,{attributeIDs:i.defaultAttributeIDs,attributeTypes:i.defaultAttributeTypes,useUniqueIDs:!1}).then(t).catch(r)},n,r)}},{key:"decodeDracoFile",value:function(e,t,n,r){this.decodeGeometry(e,{attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n}).then(t)}},{key:"decodeGeometry",value:function(e,t){var n=this;for(var r in t.attributeTypes){var i=t.attributeTypes[r];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[r]=i.name)}var a,o=JSON.stringify(t);if(gc.has(e)){var s=gc.get(e);if(s.key===o)return s.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var u=this.workerNextTaskID++,l=this._getWorker(u,e.byteLength).then(function(n){return a=n,new Promise(function(n,r){a._callbacks[u]={resolve:n,reject:r},a.postMessage({type:"decode",id:u,taskConfig:t,buffer:e},[e])})}).then(function(e){return n._createGeometry(e.geometry)});return l.catch(function(){return!0}).then(function(){a&&u&&n._releaseTask(a,u)}),gc.set(e,{key:o,promise:l}),l}},{key:"_createGeometry",value:function(e){var t=new Gn;e.index&&t.setIndex(new kn(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var r=e.attributes[n];t.setAttribute(r.name,new kn(r.array,r.itemSize))}return t}},{key:"_loadLibrary",value:function(e,t){var n=new Pu(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(function(t,r){n.load(e,t,void 0,r)})}},{key:"preload",value:function(){return this._initDecoder(),this}},{key:"_initDecoder",value:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,n=[];return t?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(function(n){var r=n[0];t||(e.decoderConfig.wasmBinary=n[1]);var i=bc.toString(),a=["/* draco decoder */",r,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}},{key:"_getWorker",value:function(e,t){var n=this;return this._initDecoder().then(function(){if(n.workerPool.length<n.workerLimit){var r=new Worker(n.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:n.decoderConfig}),r.onmessage=function(e){var t=e.data;switch(t.type){case"decode":r._callbacks[t.id].resolve(t);break;case"error":r._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},n.workerPool.push(r)}else n.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});var i=n.workerPool[n.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}},{key:"_releaseTask",value:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}},{key:"debug",value:function(){console.log("Task load: ",this.workerPool.map(function(e){return e._taskLoad}))}},{key:"dispose",value:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}]),n}(Au);function bc(){var e,t;function n(e,t,n,r,i,a){var o=a.num_components(),s=n.num_points()*o,u=s*i.BYTES_PER_ELEMENT,l=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(u);t.GetAttributeDataArrayForAllPoints(n,a,l,u,c);var h=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:r,array:h,itemSize:o}}onmessage=function(r){var i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":var a=i.buffer,o=i.taskConfig;t.then(function(e){var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(a),a.byteLength);try{var u=function(e,t,r,i){var a,o,s=i.attributeIDs,u=i.attributeTypes,l=t.GetEncodedGeometryType(r);if(l===e.TRIANGULAR_MESH)a=new e.Mesh,o=t.DecodeBufferToMesh(r,a);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,o=t.DecodeBufferToPointCloud(r,a)}if(!o.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+o.error_msg());var c={index:null,attributes:[]};for(var h in s){var f=self[u[h]],d=void 0,p=void 0;if(i.useUniqueIDs)d=t.GetAttributeByUniqueId(a,p=s[h]);else{if(-1===(p=t.GetAttributeId(a,e[s[h]])))continue;d=t.GetAttribute(a,p)}c.attributes.push(n(e,t,a,h,f,d))}return l===e.TRIANGULAR_MESH&&(c.index=function(e,t,n){var r=3*n.num_faces(),i=4*r,a=e._malloc(i);t.GetTrianglesUInt32Array(n,i,a);var o=new Uint32Array(e.HEAPF32.buffer,a,r).slice();return e._free(a),{array:o,itemSize:1}}(e,t,a)),e.destroy(a),c}(t,r,s,o),l=u.attributes.map(function(e){return e.array.buffer});u.index&&l.push(u.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:u},l)}catch(c){console.error(c),self.postMessage({type:"error",id:i.id,error:c.message})}finally{t.destroy(s),t.destroy(r)}})}}}var _c={type:"change"},xc={type:"start"},wc={type:"end"},Tc=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e,r){var i,a,o,s,u,l,c;Object(p.a)(this,n),i=t.call(this),void 0===r&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),r===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.object=e,i.domElement=r,i.domElement.style.touchAction="none",i.enabled=!0,i.target=new tt,i.minDistance=0,i.maxDistance=1/0,i.minZoom=0,i.maxZoom=1/0,i.minPolarAngle=0,i.maxPolarAngle=Math.PI,i.minAzimuthAngle=-1/0,i.maxAzimuthAngle=1/0,i.enableDamping=!1,i.dampingFactor=.05,i.enableZoom=!0,i.zoomSpeed=1,i.enableRotate=!0,i.rotateSpeed=1,i.enablePan=!0,i.panSpeed=1,i.screenSpacePanning=!0,i.keyPanSpeed=7,i.autoRotate=!1,i.autoRotateSpeed=2,i.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},i.mouseButtons={LEFT:0,MIDDLE:1,RIGHT:2},i.touches={ONE:0,TWO:2},i.target0=i.target.clone(),i.position0=i.object.position.clone(),i.zoom0=i.object.zoom,i._domElementKeyEvents=null,i.getPolarAngle=function(){return m.phi},i.getAzimuthalAngle=function(){return m.theta},i.getDistance=function(){return this.object.position.distanceTo(this.target)},i.listenToKeyEvents=function(e){e.addEventListener("keydown",te),this._domElementKeyEvents=e},i.saveState=function(){h.target0.copy(h.target),h.position0.copy(h.object.position),h.zoom0=h.object.zoom},i.reset=function(){h.target.copy(h.target0),h.object.position.copy(h.position0),h.object.zoom=h.zoom0,h.object.updateProjectionMatrix(),h.dispatchEvent(_c),h.update(),d=f.NONE},i.update=(a=new tt,o=(new et).setFromUnitVectors(e.up,new tt(0,1,0)),s=o.clone().invert(),u=new tt,l=new et,c=2*Math.PI,function(){var e=h.object.position;a.copy(e).sub(h.target),a.applyQuaternion(o),m.setFromVector3(a),h.autoRotate&&d===f.NONE&&R(2*Math.PI/60/60*h.autoRotateSpeed),h.enableDamping?(m.theta+=g.theta*h.dampingFactor,m.phi+=g.phi*h.dampingFactor):(m.theta+=g.theta,m.phi+=g.phi);var t=h.minAzimuthAngle,n=h.maxAzimuthAngle;return isFinite(t)&&isFinite(n)&&(t<-Math.PI?t+=c:t>Math.PI&&(t-=c),n<-Math.PI?n+=c:n>Math.PI&&(n-=c),m.theta=t<=n?Math.max(t,Math.min(n,m.theta)):m.theta>(t+n)/2?Math.max(t,m.theta):Math.min(n,m.theta)),m.phi=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=y,m.radius=Math.max(h.minDistance,Math.min(h.maxDistance,m.radius)),!0===h.enableDamping?h.target.addScaledVector(_,h.dampingFactor):h.target.add(_),a.setFromSpherical(m),a.applyQuaternion(s),e.copy(h.target).add(a),h.object.lookAt(h.target),!0===h.enableDamping?(g.theta*=1-h.dampingFactor,g.phi*=1-h.dampingFactor,_.multiplyScalar(1-h.dampingFactor)):(g.set(0,0,0),_.set(0,0,0)),y=1,!!(x||u.distanceToSquared(h.object.position)>v||8*(1-l.dot(h.object.quaternion))>v)&&(h.dispatchEvent(_c),u.copy(h.object.position),l.copy(h.object.quaternion),x=!1,!0)}),i.dispose=function(){h.domElement.removeEventListener("contextmenu",ne),h.domElement.removeEventListener("pointerdown",J),h.domElement.removeEventListener("pointercancel",$),h.domElement.removeEventListener("wheel",ee),h.domElement.removeEventListener("pointermove",Z),h.domElement.removeEventListener("pointerup",Q),null!==h._domElementKeyEvents&&h._domElementKeyEvents.removeEventListener("keydown",te)};var h=Object(b.a)(i),f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=f.NONE,v=1e-6,m=new yl,g=new yl,y=1,_=new tt,x=!1,w=new Fe,T=new Fe,S=new Fe,M=new Fe,O=new Fe,E=new Fe,k=new Fe,A=new Fe,C=new Fe,P=[],j={};function L(){return Math.pow(.95,h.zoomSpeed)}function R(e){g.theta-=e}function I(e){g.phi-=e}var D,N=(D=new tt,function(e,t){D.setFromMatrixColumn(t,0),D.multiplyScalar(-e),_.add(D)}),H=function(){var e=new tt;return function(t,n){!0===h.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(h.object.up,e)),e.multiplyScalar(t),_.add(e)}}(),G=function(){var e=new tt;return function(t,n){var r=h.domElement;if(h.object.isPerspectiveCamera){e.copy(h.object.position).sub(h.target);var i=e.length();i*=Math.tan(h.object.fov/2*Math.PI/180),N(2*t*i/r.clientHeight,h.object.matrix),H(2*n*i/r.clientHeight,h.object.matrix)}else h.object.isOrthographicCamera?(N(t*(h.object.right-h.object.left)/h.object.zoom/r.clientWidth,h.object.matrix),H(n*(h.object.top-h.object.bottom)/h.object.zoom/r.clientHeight,h.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),h.enablePan=!1)}}();function B(e){h.object.isPerspectiveCamera?y/=e:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom*e)),h.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function U(e){h.object.isPerspectiveCamera?y*=e:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom/e)),h.object.updateProjectionMatrix(),x=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function F(e){w.set(e.clientX,e.clientY)}function z(e){M.set(e.clientX,e.clientY)}function V(){1===P.length?w.set(P[0].pageX,P[0].pageY):w.set(.5*(P[0].pageX+P[1].pageX),.5*(P[0].pageY+P[1].pageY))}function W(){1===P.length?M.set(P[0].pageX,P[0].pageY):M.set(.5*(P[0].pageX+P[1].pageX),.5*(P[0].pageY+P[1].pageY))}function X(){var e=P[0].pageX-P[1].pageX,t=P[0].pageY-P[1].pageY,n=Math.sqrt(e*e+t*t);k.set(0,n)}function q(e){if(1==P.length)T.set(e.pageX,e.pageY);else{var t=ae(e);T.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}S.subVectors(T,w).multiplyScalar(h.rotateSpeed);var n=h.domElement;R(2*Math.PI*S.x/n.clientHeight),I(2*Math.PI*S.y/n.clientHeight),w.copy(T)}function K(e){if(1===P.length)O.set(e.pageX,e.pageY);else{var t=ae(e);O.set(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}E.subVectors(O,M).multiplyScalar(h.panSpeed),G(E.x,E.y),M.copy(O)}function Y(e){var t=ae(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);A.set(0,i),C.set(0,Math.pow(A.y/k.y,h.zoomSpeed)),B(C.y),k.copy(A)}function J(e){!1!==h.enabled&&(0===P.length&&(h.domElement.setPointerCapture(e.pointerId),h.domElement.addEventListener("pointermove",Z),h.domElement.addEventListener("pointerup",Q)),function(e){P.push(e)}(e),"touch"===e.pointerType?function(e){switch(ie(e),P.length){case 1:switch(h.touches.ONE){case 0:if(!1===h.enableRotate)return;V(),d=f.TOUCH_ROTATE;break;case 1:if(!1===h.enablePan)return;W(),d=f.TOUCH_PAN;break;default:d=f.NONE}break;case 2:switch(h.touches.TWO){case 2:if(!1===h.enableZoom&&!1===h.enablePan)return;h.enableZoom&&X(),h.enablePan&&W(),d=f.TOUCH_DOLLY_PAN;break;case 3:if(!1===h.enableZoom&&!1===h.enableRotate)return;h.enableZoom&&X(),h.enableRotate&&V(),d=f.TOUCH_DOLLY_ROTATE;break;default:d=f.NONE}break;default:d=f.NONE}d!==f.NONE&&h.dispatchEvent(xc)}(e):function(e){var t;switch(e.button){case 0:t=h.mouseButtons.LEFT;break;case 1:t=h.mouseButtons.MIDDLE;break;case 2:t=h.mouseButtons.RIGHT;break;default:t=-1}switch(t){case 1:if(!1===h.enableZoom)return;!function(e){k.set(e.clientX,e.clientY)}(e),d=f.DOLLY;break;case 0:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===h.enablePan)return;z(e),d=f.PAN}else{if(!1===h.enableRotate)return;F(e),d=f.ROTATE}break;case 2:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===h.enableRotate)return;F(e),d=f.ROTATE}else{if(!1===h.enablePan)return;z(e),d=f.PAN}break;default:d=f.NONE}d!==f.NONE&&h.dispatchEvent(xc)}(e))}function Z(e){!1!==h.enabled&&("touch"===e.pointerType?function(e){switch(ie(e),d){case f.TOUCH_ROTATE:if(!1===h.enableRotate)return;q(e),h.update();break;case f.TOUCH_PAN:if(!1===h.enablePan)return;K(e),h.update();break;case f.TOUCH_DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;!function(e){h.enableZoom&&Y(e),h.enablePan&&K(e)}(e),h.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;!function(e){h.enableZoom&&Y(e),h.enableRotate&&q(e)}(e),h.update();break;default:d=f.NONE}}(e):function(e){if(!1!==h.enabled)switch(d){case f.ROTATE:if(!1===h.enableRotate)return;!function(e){T.set(e.clientX,e.clientY),S.subVectors(T,w).multiplyScalar(h.rotateSpeed);var t=h.domElement;R(2*Math.PI*S.x/t.clientHeight),I(2*Math.PI*S.y/t.clientHeight),w.copy(T),h.update()}(e);break;case f.DOLLY:if(!1===h.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),C.subVectors(A,k),C.y>0?B(L()):C.y<0&&U(L()),k.copy(A),h.update()}(e);break;case f.PAN:if(!1===h.enablePan)return;!function(e){O.set(e.clientX,e.clientY),E.subVectors(O,M).multiplyScalar(h.panSpeed),G(E.x,E.y),M.copy(O),h.update()}(e)}}(e))}function Q(e){!1!==h.enabled&&(h.dispatchEvent(wc),d=f.NONE,re(e),0===P.length&&(h.domElement.releasePointerCapture(e.pointerId),h.domElement.removeEventListener("pointermove",Z),h.domElement.removeEventListener("pointerup",Q)))}function $(e){re(e)}function ee(e){!1===h.enabled||!1===h.enableZoom||d!==f.NONE&&d!==f.ROTATE||(e.preventDefault(),h.dispatchEvent(xc),function(e){e.deltaY<0?U(L()):e.deltaY>0&&B(L()),h.update()}(e),h.dispatchEvent(wc))}function te(e){!1!==h.enabled&&!1!==h.enablePan&&function(e){var t=!1;switch(e.code){case h.keys.UP:G(0,h.keyPanSpeed),t=!0;break;case h.keys.BOTTOM:G(0,-h.keyPanSpeed),t=!0;break;case h.keys.LEFT:G(h.keyPanSpeed,0),t=!0;break;case h.keys.RIGHT:G(-h.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),h.update())}(e)}function ne(e){!1!==h.enabled&&e.preventDefault()}function re(e){delete j[e.pointerId];for(var t=0;t<P.length;t++)if(P[t].pointerId==e.pointerId)return void P.splice(t,1)}function ie(e){var t=j[e.pointerId];void 0===t&&(t=new Fe,j[e.pointerId]=t),t.set(e.pageX,e.pageY)}function ae(e){return j[(e.pointerId===P[0].pointerId?P[1]:P[0]).pointerId]}return h.domElement.addEventListener("contextmenu",ne),h.domElement.addEventListener("pointerdown",J),h.domElement.addEventListener("pointercancel",$),h.domElement.addEventListener("wheel",ee,{passive:!1}),i.update(),i}return n}(Ee),Sc=n("h/w8"),Mc=n("fXoL"),Oc=function(){function e(){this.loading=!0,this.reset()}return e.prototype.reset=function(){this.meshes={remen:[],tijelo:[],kozni:[],extreme:[],watchface:[]},this.materials={remen:[],tijelo:[],kozni:[],extreme:[],watchface:[]},this.displayMesh={remen:null,kozni:null,extreme:null},this.displayMaterial={remen:null,tijelo:null,kozni:null,extreme:null,watchface:null}},e.prototype.init=function(){var e=this;this.cameraZ=90,this.camera=new hr(this.cameraZ,this.canvasWidth/this.canvasHeight,.1,10),this.camera.position.z=2,this.scene=new co;var t=new Yu(16777215,1);this.scene.add(t);var n=new Xu(16777215,.8);this.camera.add(n),this.scene.add(this.camera),this.renderer=["windows","android"].indexOf(this.deviceInfo.os.toLowerCase())>-1?new uo({antialias:!0,preserveDrawingBuffer:!0}):new lo({antialias:!0,alpha:!1,preserveDrawingBuffer:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.canvasWidth,this.canvasHeight),this.renderer.localClippingEnabled=!0,this.renderer.setAnimationLoop(function(t){e.texture2D&&(e.texture2D.needsUpdate=!0),e.renderer.render(e.scene,e.camera)}),document.body.appendChild(this.renderer.domElement),this.loading=!1},e.prototype.setDisplayMesh=function(e,t){return"kozni"===t?(this.displayMesh.remen=null,this.displayMesh.extreme=null):"remen"===t?(this.displayMesh.kozni=null,this.displayMesh.extreme=null):"extremen"===t&&(this.displayMesh.kozni=null,this.displayMesh.remen=null),this.displayMesh[t]=e,e},e.prototype.setDisplayMaterial=function(e,t){return this.displayMaterial[t]=e.name,"kozni"===t?(this.displayMaterial.extreme=null,this.displayMaterial.remen=null):"remen"===t?(this.displayMaterial.extreme=null,this.displayMaterial.kozni=null):"extreme"===t&&(this.displayMaterial.remen=null,this.displayMaterial.kozni=null),e},e.prototype.changeMesh=function(e,t){var n=this,r=e.find(function(e){return e instanceof rr});this.displayMesh[t]!==r&&("kozni"===t?(this.disposePartMesh("extreme"),this.disposePartMesh("remen")):"extreme"===t?(this.disposePartMesh("kozni"),this.disposePartMesh("remen")):"remen"===t&&(this.disposePartMesh("extreme"),this.disposePartMesh("kozni")),e.forEach(function(e){n.object.add(e)}),this.setDisplayMesh(r,t))},e.prototype.disposePartMesh=function(e){for(var t=this.object.children.length-1;t>=0;t--){var n=this.object.children[t];n.name.toLowerCase().includes(e)&&(n instanceof rr&&n.geometry.dispose(),this.object.children.splice(t,1))}},e.prototype.changeMaterial=function(e,t){var n=this,r=!1;"kozni"===t?(r=null!==this.displayMaterial.remen||null!==this.displayMaterial.extreme,this.displayMaterial.remen=null,this.displayMaterial.extreme=null):"remen"===t?(r=null!==this.displayMaterial.kozni||null!==this.displayMaterial.extreme,this.displayMaterial.kozni=null,this.displayMaterial.extreme=null):"extreme"===t&&(r=null!==this.displayMaterial.remen||null!==this.displayMaterial.kozni,this.displayMaterial.remen=null,this.displayMaterial.kozni=null),this.displayMaterial[t]!==e&&(r&&this.changeMesh(this.meshes[t],t),this.object.traverse(function(r){r instanceof rr&&r.name.toLowerCase().includes(t)&&(e.clippingPlanes=n.clippingPlane?[n.clippingPlane]:null,r.material=e)}),this.setDisplayMaterial(e,t))},e.prototype.setClippingPlane=function(){var e=this;this.clippingPlane=new br(new tt(0,0,Ue.degToRad(10)),-.3),this.object&&this.object.traverse(function(t){t instanceof rr&&(t.material.clippingPlanes=[e.clippingPlane])})},e.prototype.removeClippingPlane=function(){this.clippingPlane=null,this.object&&this.object.traverse(function(e){e instanceof rr&&void 0!==e.material&&(e.material.clippingPlanes=null)})},e.prototype.resetWatchPosition=function(){this.object&&(this.object.position.set(0,-1,0),this.object.scale.set(.18,.18,.18),this.object.rotation.setFromVector3(new tt(Ue.degToRad(0),Ue.degToRad(0),Ue.degToRad(0)))),this.texture2D&&(this.texture2D=void 0)},e.prototype.updateModelPosition=function(e,t){var n,r,i;if(e=e.toLowerCase(),t){i=t[1];var a=Math.round(100*i.x),o=Math.round(100*i.y);if(this.object&&(this.object.visible=!(a>60||a<35)),Math.abs(this.oldX-a)<2&&Math.abs(this.oldY-o)<2)return;this.oldX=a,this.oldY=o,delete i.visibility;var s=this.watch.setup.object.addonY;n=-1*this.calculateNewRange(0,1,100,-1,a+this.watch.setup.object.addonX),r=this.calculateNewRange(0,-1,100,1,100-o+s)}var u="right"===e?[t[17].x,t[17].y]:[t[5].x,t[5].y],l=[t[0].x,t[0].y],c="right"===e?[t[5].x,t[5].y]:[t[17].x,t[17].y],h=[t[5].x,t[5].y],f=[t[0].x,t[0].y],d=[t[17].x,t[17].y],p=Math.atan2(c[1]-l[1],c[0]-l[0])-Math.atan2(u[1]-l[1],u[0]-l[0])+Ue.degToRad(this.watch.setup.object.rotateXOffset),v=Math.atan2(d[1]-f[1],d[0]-f[0])-Math.atan2(h[1]-f[1],h[0]-f[0])+Ue.degToRad(this.watch.setup.object.rotateYOffset);this.object&&(this.object.position.set(n,r,0),this.object.scale.set(this.watch.setup.object.scale.x,this.watch.setup.object.scale.y,this.watch.setup.object.scale.z),this.object.rotation.setFromVector3(new tt(p,v,Ue.degToRad(this.watch.setup.object.rotateZOffset))))},e.prototype.calculateNewRange=function(e,t,n,r,i){var a=n-e;return 0===a?t:(i-e)*(r-t)/a+t},e.prototype.addMesh=function(e,t){this.meshes[t].indexOf(e)<0&&this.meshes[t].push(e)},e.prototype.addMeshGroup=function(e,t){this.meshes[t].indexOf(e)<0&&this.meshes[t].push(e)},e.prototype.addMaterial=function(e,t){e.clippingPlanes=this.clippingPlane?[this.clippingPlane]:null,this.materials[t].indexOf(e)<0&&this.materials[t].push(e)},e.prototype.getPartFromMeshName=function(e){var t;return e.includes("remen")?t="remen":e.includes("tijelo")?t="tijelo":e.includes("kozni")?t="kozni":e.includes("extreme")?t="extreme":e.includes("watchface")&&(t="watchface"),t},e.prototype.extractMaterials=function(e){for(var t=e.children.length-1;t>=0;t--){var n=e.children[t];if(n instanceof rr){var r=n.material;if(r instanceof gn){var i=r.name;if(i.includes("remen")||i.includes("tijelo")||i.includes("kozni")||i.includes("extreme")||i.includes("watchface")){var a=this.getPartFromMeshName(i);this.addMaterial(n.material,a)}}}}},e.prototype.extractMeshesAndMaterials=function(){for(var e=this.object.children.length-1;e>=0;e--){var t=this.object.children[e],n=t.name.toLowerCase();if(t instanceof no)this.extractMaterials(t),this.object.children.splice(e,1);else if(n.includes("remen")||n.includes("kozni")||n.includes("extreme")){var r=t.name.toLowerCase(),i=this.getPartFromMeshName(r);t instanceof rr?this.addMesh(t,i):t instanceof no&&this.addMeshGroup(t,i),this.object.children.splice(e,1)}}},e.prototype.setDisplayDefaultsByBodyName=function(e){var t=this;if(this.watch){var n=this.watch.defaults.find(function(t){return t.body===e});Object.values(this.materials).forEach(function(e){e.forEach(function(e){var r=e.name.toLowerCase();r===n.strap?(r.includes("kozni")?t.setDisplayMaterial(e,"kozni"):r.includes("extreme")&&t.setDisplayMaterial(e,"extreme"),r.includes("remen")&&t.setDisplayMaterial(e,"remen")):r===n.watchface?t.setDisplayMaterial(e,"watchface"):r===n.body&&t.setDisplayMaterial(e,"tijelo")})});for(var r=this.getDefaultStrapNamespace(),i=this.object.children.length-1;i>=0;i--){var a=this.object.children[i];if(a instanceof rr){var o=a.name.toLowerCase();if(o.includes("tijelo"))this.displayMaterial.tijelo!==a.material.name&&((s=this.materials.tijelo.find(function(e){return e.name===t.displayMaterial.tijelo})).clippingPlanes=this.clippingPlane?[this.clippingPlane]:null,a.material=s);else if(o.includes("watchface"))this.displayMaterial.watchface!==a.material.name&&(s=this.materials.watchface.find(function(e){return e.name===t.displayMaterial.watchface}))&&(s.clippingPlanes=this.clippingPlane?[this.clippingPlane]:null,a.material=s);else if(o.includes(r)){var s;(s=this.materials.tijelo.find(function(e){return e.name===t.displayMaterial.tijelo})).clippingPlanes=this.clippingPlane?[this.clippingPlane]:null,a.material=s}if(o.includes("kozni")||o.includes("remen")||o.includes("extreme")){if(o.includes(r))continue;this.cleanMaterial(a.material),this.object.children.splice(i,1),this.addDefaultStrapMesh()}}}this.setDisplayMeshesByDisplayData()}},e.prototype.getDefaultStrapNamespace=function(){return null!==this.displayMaterial.extreme?"extreme":null!==this.displayMaterial.remen?"remen":null!==this.displayMaterial.kozni?"kozni":null},e.prototype.changeMeshes=function(e){this.setDisplayDefaultsByBodyName(e.name)},e.prototype.setDisplayMeshesByDisplayData=function(){var e=this.getDefaultStrapNamespace();"remen"===e?(this.displayMesh.remen=this.meshes.remen.map(function(e){return e.name}),this.displayMesh.kozni=null,this.displayMesh.extreme=null):"kozni"===e?(this.displayMesh.remen=null,this.displayMesh.kozni=this.meshes.kozni.map(function(e){return e.name}),this.displayMesh.extreme=null):"extreme"===e&&(this.displayMesh.remen=null,this.displayMesh.kozni=null,this.displayMesh.extreme=this.meshes.extreme.map(function(e){return e.name}))},e.prototype.addDefaultStrapMesh=function(){var e=this,t=this.getDefaultStrapNamespace(),n=this.meshes[t],r=this.materials[t].find(function(n){return n.name===e.displayMaterial[t]});n.forEach(function(t){t instanceof rr&&(t.material=r,e.object.add(t))})},e.prototype.loadModel=function(e,t){var n=this;void 0===t&&(t=!1),this.watch=e,this.loading=!0;var r=new Eu(function(){n.extractMeshesAndMaterials(),n.setDisplayDefaultsByBodyName((n.materials.tijelo.length>0?n.materials.tijelo[0]:null).name),n.addDefaultStrapMesh(),n.scene.add(n.object)}),i=new yc;i.setDecoderPath(Sc.a.settings.appRoot+"/draco/");var a=new Pl(r);a.setDRACOLoader(i),a.load(Sc.a.settings.appRoot+"watch-models/"+e.nameUrl+".glb",function(e){e&&(e.scene.scale.set(.18,.18,.18),e.scene.position.set(0,-1,0),e.scene.visible=t,n.object=e.scene,n.loading=!1)},void 0,function(e){console.error(e)})},e.prototype.setBackgroundImage=function(e){var t=this;(new Ru).load(e,function(e){t.scene.background=e})},e.prototype.attachVideoTexture=function(){if(!this.texture2D&&this.videoElement){if(void 0!==this.videoElement.readyState&&0===this.videoElement.readyState)return;4===this.videoElement.readyState&&(this.texture2D=new Ye(this.videoElement),this.texture2D.needsUpdate=!0,["windows","android"].indexOf(this.deviceInfo.os.toLowerCase())<0&&(this.texture2D.minFilter=J),this.texture2D&&(this.scene.background=this.texture2D))}},e.prototype.cleanMaterial=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=e[n[t]];r&&"function"==typeof r.dispose&&r.dispose()}e.dispose()},e.prototype.destroyAll=function(e,t){var n=this;void 0===e&&(e=null),void 0===t&&(t=null);var r=e||this.renderer,i=t||this.scene;this.removeModelControls(),i.traverse(function(e){if(e.isMesh){if(e.geometry&&(e.geometry.dispose(),e.geometry=void 0),e.material.isMaterial)n.cleanMaterial(e.material),e.material=void 0;else for(var t=0,r=e.material;t<r.length;t++)n.cleanMaterial(r[t]),e.material=void 0;i.remove(e,i.children)}}),r.renderLists.dispose(),r.dispose(),this.reset()},e.prototype.addModelControls=function(){this.object&&this.object.position.set(0,-1,0);var e=new Tc(this.camera,this.renderer.domElement);e.autoRotate=!0,e.maxZoom=3,e.minZoom=.5,e.enableDamping=!1,e.update(),this.controls=e},e.prototype.removeModelControls=function(){void 0!==this.controls&&(this.controls.autoRotate=!1,this.controls.dispose(),this.controls=void 0)},e.prototype.animateModel=function(){this.scene&&(this.object&&requestAnimationFrame(L),this.controls&&this.controls.update(),this.renderer.render(this.scene,this.camera))},e.\u0275prov=Mc.Bb({token:e,factory:e.\u0275fac=function(t){return new(t||e)},providedIn:"root"}),e}(),Ec=n("FnrL"),kc=n("I0vh"),Ac=n("FBxB"),Cc={UKNOWN:"Unknown"},Pc={CHROME:"Chrome",FIREFOX:"Firefox",SAFARI:"Safari",OPERA:"Opera",IE:"IE",MS_EDGE:"MS-Edge",MS_EDGE_CHROMIUM:"MS-Edge-Chromium",FB_MESSANGER:"FB-Messanger",SAMSUNG:"Samsung",UCBROWSER:"UC-Browser",UNKNOWN:Cc.UKNOWN},jc={HTC:/HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\bEVO\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel/,NEXUS_PHONE:/Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6/,DELL:/Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\b001DL\b|\b101DL\b|\bGS01\b/,MOTOROLA:new RegExp("Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|\n      A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|\n      MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|\n      ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|\n      WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|\n      XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|\n      XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052"),SAMSUNG:new RegExp("\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|\n      GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|\n      GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|\n      GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|\n      GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|\n      GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|\n      GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|\n      GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|\n      GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|\n      GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|\n      GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|\n      GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|\n      GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|\n      GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|\n      GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|\n      GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|\n      GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|\n      GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|\n      SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|\n      SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|\n      SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|\n      SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|\n      SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|\n      SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|\n      SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|\n      SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|\n      SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|\n      SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|\n      SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|\n      SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|\n      SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|\n      SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|\n      SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|\n      SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|\n      SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|\n      SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|\n      SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|\n      SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|\n      SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|\n      SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|\n      SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|\n      SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|\n      SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|\n      SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|\n      SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|\n      SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|\n      SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|\n      SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|\n      SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|\n      GT-N7105|SCH-I535|SM-N900A|SM-N900T|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|\n      GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|\n      GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|\n      SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|\n      SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|\n      SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F"),LG:new RegExp("\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|\n      LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|\n      C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|\n      LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|\n      VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|\n      MS323|M257)"),SONY:/SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533/,ASUS:/Asus.*Galaxy|PadFone.*Mobile/,NOKIA_LUMIA:/Lumia [0-9]{3,4}/,MICROMAX:/Micromax.*\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\b/,PALM:/PalmSource|Palm/,VERTU:/Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature/,PANTECH:new RegExp("PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|\n        IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|\n        IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|\n        CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|\n        P2000|P7040|P7000|C790"),FLY:/IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250/,WIKO:new RegExp("KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|\n        SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|\n        CINK KING|CINK PEAX|CINK SLIM|SUBLIM"),I_MOBILE:/i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)/,SIMVALLEY:/\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\b/,WOLFGANG:/AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q/,ALCATEL:/Alcatel|Mobile; rv:49.0|Mobile; ALCATEL 4052R; rv:48.0/,NINTENDO:/Nintendo (3DS|Switch)/,AMOI:/Amoi/,INQ:/INQ/,VITA:/\bVita\b/,BLACKBERRY:/\bBlackBerry\b|\bBB10\b|rim[0-9]+/,FIREFOX_OS:/\bFirefox-OS\b/,IPHONE:/\biPhone\b/,iPod:/\biPod\b/,ANDROID:/\bAndroid\b/,WINDOWS_PHONE:/\bWindows-Phone\b/,GENERIC_PHONE:new RegExp("Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|\n        up.link|vodafone|\\bwap\\b|nokia|Nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser")},Lc={iPad:/iPad|iPad.*Mobile/,NexusTablet:/Android.*Nexus[\s]+(7|9|10)/,GoogleTablet:/Android.*Pixel C/,SamsungTablet:new RegExp("SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|\n        GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|\n        SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|\n        GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|\n        SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|\n        GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|\n        SHV-E230S|SHW-M180K|SHW-M180L|SM-T865|SM-T290|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|\n        SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|\n        GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T385M|SM-P585M|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|\n        SM-P601|SM-P605|SM-P615|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|\n        GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|\n        SM-T510|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|\n        SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T500|SM-T330|\n        SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|\n        SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|\n        SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|\n        SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|\n        SM-T719|SM-T813|SM-T819|SM-T580|SM-T590|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|\n        SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-P585Y"),Kindle:new RegExp("Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|\n        KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome        /[0-9.]+ (?!Mobile)"),SurfaceTablet:/Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)/,HPTablet:/HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10/,AsusTablet:new RegExp("^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|\n        TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|\n        Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|\n        ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|\n        ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b"),BlackBerryTablet:/PlayBook|RIM Tablet/,HTCtablet:/HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410/,MotorolaTablet:/xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617/,NookTablet:/Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2/,AcerTablet:new RegExp("Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|\n        W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\n        \\bA3-A20\\b|\\bA3-A30"),ToshibaTablet:/Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO/,LGTablet:/\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\b/,FujitsuTablet:/Android.*\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\b/,PrestigioTablet:new RegExp("PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|\n        PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|\n        PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|\n        PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|\n        PMT5887|PMT5001|PMT5002"),LenovoTablet:new RegExp("Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|\n        YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|\n        B8000|B8080)(-|)(FL|F|HV|H|)|TB-X606F|TB-X103F|TB-X304F|TB-X304L|TB-X704F|TB-8703F|Tab2A7-10F|TB2-X30L|TB-8504F"),DellTablet:/Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7/,YarvikTablet:new RegExp("Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|\n        TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|\n        TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|\n        TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|\n        TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b"),MedionTablet:/Android.*\bOYO\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB/,ArnovaTablet:/97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2/,IntensoTablet:/INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004/,IRUTablet:/M702pro/,MegafonTablet:/MegaFon V9|\bZTE V9\b|Android.*\bMT7A\b/,EbodaTablet:/E-Boda (Supreme|Impresspeed|Izzycomm|Essential)/,AllViewTablet:/Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)/,ArchosTablet:new RegExp("\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10|\n         Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b"),AinolTablet:/NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark/,NokiaLumiaTablet:/Lumia 2520/,SonyTablet:new RegExp("Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|\n        SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|\n        EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|\n        SGP612|SGP712"),PhilipsTablet:/\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\b/,CubeTablet:/Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT/,CobyTablet:new RegExp("MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|\n        MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010"),MIDTablet:new RegExp("M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|\n        MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|\n        MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10"),MSITablet:new RegExp("MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|\n        Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b"),SMiTTablet:/Android.*(\bMID\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)/,RockChipTablet:/Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A/,FlyTablet:/IQ310|Fly Vision/,bqTablet:new RegExp("Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|\n        Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))|Maxwell.*Lite|Maxwell.*Plus"),HuaweiTablet:new RegExp("MediaPad|MediaPad 7 Youth|MediaPad T3 10|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|\n        S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-W09"),NecTablet:/\bN-06D|\bN-08D/,PantechTablet:/Pantech.*P4100/,BronchoTablet:/Broncho.*(N701|N708|N802|a710)/,VersusTablet:/TOUCHPAD.*[78910]|\bTOUCHTAB\b/,ZyncTablet:/z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900/,PositivoTablet:/TB07STA|TB10STA|TB07FTA|TB10FTA/,NabiTablet:/Android.*\bNabi/,KoboTablet:/Kobo Touch|\bK080\b|\bVox\b Build|\bArc\b Build/,DanewTablet:/DSlide.*\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\b/,TexetTablet:new RegExp("NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|\n        TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|\n        TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|\n        TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|\n        TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|\n        TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|\n        TB-436|TB-416|TB-146SE|TB-126SE"),PlaystationTablet:/Playstation.*(Portable|Vita)/,TrekstorTablet:/ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab/,PyleAudioTablet:/\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\b/,AdvanTablet:new RegExp("Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|\n        T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b"),DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|\n        Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:/Android.*\bG1\b(?!\))/,MicromaxTablet:/Funbook|Micromax.*\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\b/,KarbonnTablet:/Android.*\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\b/,AllFineTablet:/Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide/,PROSCANTablet:new RegExp("\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|\n        PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|\n        PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|\n        PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b"),YONESTablet:/BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026/,ChangJiaTablet:new RegExp("TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|\n        TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|\n        TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|\n        TPC10111|TPC10203|TPC10205|TPC10503"),GUTablet:/TX-A1301|TX-M9002|Q702|kf026/,PointOfViewTablet:new RegExp("TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|\n        TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|\n        TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|\n        TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10"),OvermaxTablet:new RegExp("OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|\n        MagicTab|Stream|TB-08|TB-09)|Qualcore 1027"),HCLTablet:/HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync/,DPSTablet:/DPS Dream 9|DPS Dual 7/,VistureTablet:/V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10/,CrestaTablet:/CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989/,MediatekTablet:/\bMT8125|MT8389|MT8135|MT8377\b/,ConcordeTablet:/Concorde([ ]+)?Tab|ConCorde ReadMan/,GoCleverTablet:new RegExp("GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|\n        TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|\n        GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|\n        TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|\n        TAB R104|TAB R83.3|TAB A1042"),ModecomTablet:new RegExp("FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|\n        FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|\n        FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003"),VoninoTablet:new RegExp("\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|\n        Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|\n        Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b"),ECSTablet:/V07OT2|TM105A|S10OT1|TR10CS1/,StorexTablet:/eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab/,VodafoneTablet:/SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497/,EssentielBTablet:/Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2/,RossMoorTablet:/RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711/,iMobileTablet:/i-mobile i-note/,TolinoTablet:/tolino tab [0-9.]+|tolino shine/,AudioSonicTablet:/\bC-22Q|T7-QC|T-17B|T-17P\b/,AMPETablet:/Android.* A78 /,SkkTablet:/Android.* (SKYPAD|PHOENIX|CYCLOPS)/,TecnoTablet:/TECNO P9|TECNO DP8D/,JXDTablet:new RegExp("Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|\n        S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|\n        P1000|P300|S18|S6600|S9100)\\b"),iJoyTablet:new RegExp("Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|\n        Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|\n        Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|\n        Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|\n        Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)"),FX2Tablet:/FX2 PAD7|FX2 PAD10/,XoroTablet:new RegExp("KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|\n        PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|\n        PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|\n        TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151"),ViewsonicTablet:/ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a/,VerizonTablet:/QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1/,OdysTablet:/LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\bXELIO\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10/,CaptivaTablet:/CAPTIVA PAD/,IconbitTablet:new RegExp("NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|\n        NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S"),TeclastTablet:new RegExp("T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\n        \\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\n        \\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\n        \\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\n        \\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\n        \\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\n        \\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\n        \\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\n        \\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi"),OndaTablet:new RegExp("\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|\n        V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|\n        V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|\n        Vi40)\\b[s]+|V10 \\b4G\\b"),JaytechTablet:/TPC-PA762/,BlaupunktTablet:/Endeavour 800NG|Endeavour 1010/,DigmaTablet:/\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\b/,EvolioTablet:/ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\bEvotab\b|\bNeura\b/,LavaTablet:/QPAD E704|\bIvoryS\b|E-TAB IVORY|\bE-TAB\b/,AocTablet:/MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712/,MpmanTablet:new RegExp("MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\n        \\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|\n        MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010"),CelkonTablet:/CT695|CT888|CT[\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\bCT-1\b/,WolderTablet:new RegExp("miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|\n        POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|\n        FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b"),MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:/\bMI PAD\b|\bHM NOTE 1W\b/,NibiruTablet:/Nibiru M1|Nibiru Jupiter One/,NexoTablet:/NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI/,LeaderTablet:new RegExp("TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|\n        TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100"),UbislateTablet:/UbiSlate[\s]?7C/,PocketBookTablet:/Pocketbook/,KocasoTablet:/\b(TB-1207)\b/,HisenseTablet:/\b(F5281|E2371)\b/,Hudl:/Hudl HT7S3|Hudl 2/,TelstraTablet:/T-Hub2/,Honeywell:/RT10A/,GenericTablet:new RegExp("Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|\n        A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|\n        Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107")},Rc={BLACKBERRY:"Blackberry",FIREFOX_OS:"Firefox-OS",CHROME_BOOK:"Chrome-Book",WINDOWS_PHONE:"Windows-Phone",VITA:"Vita",PS4:"PS4",MAC:"Macintosh",CHROMECAST:"Chromecast",APPLE_TV:"Apple-TV",GOOGLE_TV:"Google-TV",ANDROID:"Android",Tesla:"Tesla",iPad:"iPad",IPHONE:"iPhone",iPod:"iPod",UNKNOWN:Cc.UKNOWN,HTC:"HTC",NEXUS_PHONE:"Nexus Phone",NexusTablet:"Nexus Tablet",DELL:"Dell",MOTOROLA:"Motorola",SAMSUNG:"Samsung",LG:"LG",SONY:"Sony",ASUS:"Asus",NOKIA_LUMIA:"Nokia Lumia",MICROMAX:"Micromax",PALM:"Palm",VERTU:"Vertu",PANTECH:"PANTECH",FLY:"Fly",WIKO:"WIKO",I_MOBILE:"i-mobile",SIMVALLEY:"Simvalley",WOLFGANG:"Wolfgang",ALCATEL:"Alcatel",HONEYWELL:"Honeywell",NINTENDO:"Nintendo",AMOI:"Amoi",INQ:"INQ",GENERIC_PHONE:"Generic Phone",MI_SE_9:"Mi SE 9"},Ic=[Rc.PS4,Rc.CHROME_BOOK,Rc.MAC,Rc.DELL,Rc.ASUS,Rc.UNKNOWN],Dc={WINDOWS:"Windows",MAC:"Mac",IOS:"iOS",ANDROID:"Android",LINUX:"Linux",UNIX:"Unix",FIREFOX_OS:"Firefox-OS",CHROME_OS:"Chrome-OS",WINDOWS_PHONE:"Windows-Phone",UNKNOWN:Cc.UKNOWN},Nc={WINDOWS_3_11:"windows-3-11",WINDOWS_95:"windows-95",WINDOWS_ME:"windows-me",WINDOWS_98:"windows-98",WINDOWS_CE:"windows-ce",WINDOWS_2000:"windows-2000",WINDOWS_XP:"windows-xp",WINDOWS_SERVER_2003:"windows-server-2003",WINDOWS_VISTA:"windows-vista",WINDOWS_7:"windows-7",WINDOWS_8_1:"windows-8-1",WINDOWS_8:"windows-8",WINDOWS_10:"windows-10",WINDOWS_PHONE_7_5:"windows-phone-7-5",WINDOWS_PHONE_8_1:"windows-phone-8-1",WINDOWS_PHONE_10:"windows-phone-10",WINDOWS_NT_4_0:"windows-nt-4-0",MACOSX_11_0:"mac-os-x-11-0",MACOSX_16:"mac-os-x-16",MACOSX_15:"mac-os-x-15",MACOSX_14:"mac-os-x-14",MACOSX_13:"mac-os-x-13",MACOSX_12:"mac-os-x-12",MACOSX_11:"mac-os-x-11",MACOSX_10:"mac-os-x-10",MACOSX_9:"mac-os-x-9",MACOSX_8:"mac-os-x-8",MACOSX_7:"mac-os-x-7",MACOSX_6:"mac-os-x-6",MACOSX_5:"mac-os-x-5",MACOSX_4:"mac-os-x-4",MACOSX_3:"mac-os-x-3",MACOSX_2:"mac-os-x-2",MACOSX:"mac-os-x",iOS:"iOS",ANDROID_9:"android-9",UNKNOWN:Cc.UKNOWN.toLowerCase()},Hc={WINDOWS:{and:[{or:[/\bWindows|(Win\d\d)\b/,/\bWin 9x\b/]},{not:/\bWindows Phone\b/}]},MAC:{and:[/\bMac OS\b/,{not:{or:[/\biPhone\b/,/\biPad\b/,/\biPod\b/,/\bWindows Phone\b/]}}]},IOS:{and:[{or:[/\biPad\b/,/\biPhone\b/,/\biPod\b/]},{not:/\bWindows Phone\b/}]},ANDROID:{and:[/\bAndroid\b/,{not:/\bWindows Phone\b/}]},LINUX:/\bLinux\b/,UNIX:/\bUNIX\b/,FIREFOX_OS:{and:[/\bFirefox\b/,/Mobile\b/]},CHROME_OS:/\bCrOS\b/,WINDOWS_PHONE:{or:[/\bIEMobile\b/,/\bWindows Phone\b/]},PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/},Gc=Object.assign(Object.assign(Object.assign(Object.assign({},jc),Lc),Hc),{FIREFOX_OS:{and:[/\bFirefox\b/,/\bMobile\b/]},CHROME_BOOK:/\bCrOS\b/,PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,CHROMECAST:/\bCrKey\b/,APPLE_TV:/^iTunes-AppleTV\/4.1$/,GOOGLE_TV:/\bGoogleTV\b/,Tesla:/Tesla\/([0-9]{4}.[0-9]{1,2}.?[0-9]{0,2}.?[0-9]{0,2})-(.{7})/,MI_SE_9:/\bXiaomi\b/,MAC:{and:[/\bMac OS\b/,{not:{or:[/\biPhone\b/,/\biPad\b/,/\biPod\b/,/\bWindows Phone\b/]}}]}}),Bc={WINDOWS_3_11:/Win16/,WINDOWS_95:/(Windows 95|Win95|Windows_95)/,WINDOWS_ME:/(Win 9x 4.90|Windows ME)/,WINDOWS_98:/(Windows 98|Win98)/,WINDOWS_CE:/Windows CE/,WINDOWS_2000:/(Windows NT 5.0|Windows 2000)/,WINDOWS_XP:/(Windows NT 5.1|Windows XP)/,WINDOWS_SERVER_2003:/Windows NT 5.2/,WINDOWS_VISTA:/Windows NT 6.0/,WINDOWS_7:/(Windows 7|Windows NT 6.1)/,WINDOWS_8_1:/(Windows 8.1|Windows NT 6.3)/,WINDOWS_8:/(Windows 8|Windows NT 6.2)/,WINDOWS_10:/(Windows NT 10.0)/,WINDOWS_PHONE_7_5:/(Windows Phone OS 7.5)/,WINDOWS_PHONE_8_1:/(Windows Phone 8.1)/,WINDOWS_PHONE_10:/(Windows Phone 10)/,WINDOWS_NT_4_0:{and:[/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/,{not:/Windows NT 10.0/}]},MACOSX:/(MAC OS X\s*[^ 0-9])/,MACOSX_3:/(Darwin 10.3|Mac OS X 10.3)/,MACOSX_4:/(Darwin 10.4|Mac OS X 10.4)/,MACOSX_5:/(Mac OS X 10.5)/,MACOSX_6:/(Mac OS X 10.6)/,MACOSX_7:/(Mac OS X 10.7)/,MACOSX_8:/(Mac OS X 10.8)/,MACOSX_9:/(Mac OS X 10.9)/,MACOSX_10:/(Mac OS X 10.10)/,MACOSX_11:/(Mac OS X 10.11)/,MACOSX_12:/(Mac OS X 10.12)/,MACOSX_13:/(Mac OS X 10.13)/,MACOSX_14:/(Mac OS X 10.14)/,MACOSX_15:/(Mac OS X 10.15)/,MACOSX_16:/(Mac OS X 10.16)/,MACOSX_11_0:{or:[/11_0 like Mac OS X/,/Mac OS X 11/]},iOS:/(iPhone OS\s*[0-9_]+)/,ANDROID_9:/(Android 9)/},Uc={CHROME:[/\bChrome\/([\d\.]+)\b/,/\bCriOS\/([\d\.]+)\b/,/\bHeadlessChrome\/([\d\.]+)\b/],FIREFOX:[/\bFirefox\/([\d\.]+)\b/,/\bFxiOS\/([\d\.]+)\b/],SAFARI:[/\bVersion\/([\d\.]+)\b/,/\bSafari\/([\d\.]+)\b/],OPERA:[/\bVersion\/([\d\.]+)\b/,/\bOPR\/([\d\.]+)\b/],IE:[/\bMSIE ([\d\.]+\w?)\b/,/\brv:([\d\.]+\w?)\b/],MS_EDGE:/\bEdg(?:e|A|iOS)\/([\d\.]+)\b/,MS_EDGE_CHROMIUM:/\bEdg\/([\d\.]+)\b/,SAMSUNG:/\bSamsungBrowser\/([\d\.]+)\b/,UCBROWSER:/\bUCBrowser\/([\d\.]+)\b/},Fc=function(e,t){return e[t]=Bc[t],e},zc=Object.keys(Bc).reduce(Fc,{}),Vc=function(e,t){return e[Pc[t]]=Uc[t],e},Wc=Object.keys(Uc).reduce(Vc,{}),Xc=Object.freeze({__proto__:null,GENERAL:Cc,BROWSERS:Pc,MOBILES_RE:jc,TABLETS_RE:Lc,DEVICES:Rc,DESKTOP_DEVICES:Ic,OS:Dc,OS_VERSIONS:Nc,OS_RE:Hc,BROWSERS_RE:{CHROME:{and:[{or:[/\bChrome\b/,/\bCriOS\b/,/\bHeadlessChrome\b/]},{not:{or:[/\bOPR\b/,/\bEdg(e|A|iOS)\b/,/\bEdg\/\b/,/\bSamsungBrowser\b/,/\bUCBrowser\b/]}}]},FIREFOX:{or:[/\bFirefox\b/,/\bFxiOS\b/]},SAFARI:{and:[/^((?!CriOS).)*\Safari\b.*$/,{not:{or:[/\bOPR\b/,/\bEdg(e|A|iOS)\b/,/\bEdg\/\b/,/\bWindows Phone\b/,/\bSamsungBrowser\b/,/\bUCBrowser\b/]}}]},OPERA:{or:[/Opera\b/,/\bOPR\b/]},IE:{or:[/\bMSIE\b/,/\bTrident\b/,/^Mozilla\/5\.0 \(Windows NT 10\.0; Win64; x64\)$/]},MS_EDGE:{or:[/\bEdg(e|A|iOS)\b/]},MS_EDGE_CHROMIUM:/\bEdg\/\b/,PS4:/\bMozilla\/5.0 \(PlayStation 4\b/,VITA:/\bMozilla\/5.0 \(Play(S|s)tation Vita\b/,FB_MESSANGER:/\bFBAN\/MessengerForiOS\b/,SAMSUNG:/\bSamsungBrowser\b/,UCBROWSER:/\bUCBrowser\b/},DEVICES_RE:Gc,OS_VERSIONS_RE_MAP:Bc,BROWSER_VERSIONS_RE_MAP:Uc,OS_VERSIONS_RE:zc,BROWSER_VERSIONS_RE:Wc,"\u02750":Fc,"\u02751":Vc}),qc=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,[{key:"test",value:function(e,t){var n=this;return"string"==typeof t&&(t=new RegExp(t)),t instanceof RegExp?t.test(e):t&&Array.isArray(t.and)?t.and.every(function(t){return n.test(e,t)}):t&&Array.isArray(t.or)?t.or.some(function(t){return n.test(e,t)}):!(!t||!t.not||this.test(e,t.not))}},{key:"exec",value:function(e,t){var n=this;return"string"==typeof t&&(t=new RegExp(t)),t instanceof RegExp?t.exec(e):t&&Array.isArray(t)?t.reduce(function(t,r){return t||n.exec(e,r)},null):null}}]),e}(),Kc=function(e){return e.Mobile="mobile",e.Tablet="tablet",e.Desktop="desktop",e.Unknown="unknown",e}({}),Yc=function(e){return e.Portrait="portrait",e.Landscape="landscape",e}({}),Jc="iPad",Zc=function(){var e=function(){function e(t){Object(p.a)(this,e),this.platformId=t,this.ua="",this.userAgent="",this.os="",this.browser="",this.device="",this.os_version="",this.browser_version="",this.reTree=new qc,this.deviceType="",this.orientation="",Object(r.n)(this.platformId)&&"undefined"!=typeof window&&(this.userAgent=window.navigator.userAgent),this.setDeviceInfo(this.userAgent)}return Object(v.a)(e,[{key:"setDeviceInfo",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userAgent;t!==this.userAgent&&(this.userAgent=t);var n=[{const:"OS",prop:"os"},{const:"BROWSERS",prop:"browser"},{const:"DEVICES",prop:"device"},{const:"OS_VERSIONS",prop:"os_version"}];if(n.forEach(function(n){e[n.prop]=Object.keys(Xc[n.const]).reduce(function(i,a){return"device"===Xc[n.const][a]&&Object(r.n)(e.platformId)&&(e.reTree.test(e.userAgent,Lc.iPad)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)?(i[Xc[n.const][a]]=Jc,Object):(i[Xc[n.const][a]]=e.reTree.test(t,Xc["".concat(n.const,"_RE")][a]),i)},{})}),n.forEach(function(t){e[t.prop]=Object.keys(Xc[t.const]).map(function(e){return Xc[t.const][e]}).reduce(function(n,r){return"device"===t.prop&&n===Xc[t.const].ANDROID?e[t.prop][r]?r:n:n===Xc[t.const].UNKNOWN&&e[t.prop][r]?r:n},Xc[t.const].UNKNOWN)}),this.browser_version="0",this.browser!==Pc.UNKNOWN){var i=Wc[this.browser],a=this.reTree.exec(t,i);a&&(this.browser_version=a[1])}this.orientation="undefined"!=typeof window&&window.matchMedia?window.matchMedia("(orientation: landscape)").matches?Yc.Landscape:Yc.Portrait:Cc.UKNOWN,this.deviceType=this.isTablet()?Kc.Tablet:this.isMobile(this.userAgent)?Kc.Mobile:this.isDesktop(this.userAgent)?Kc.Desktop:Kc.Unknown}},{key:"getDeviceInfo",value:function(){return{userAgent:this.userAgent,os:this.os,browser:this.browser,device:this.device,os_version:this.os_version,browser_version:this.browser_version,deviceType:this.deviceType,orientation:this.orientation}}},{key:"isMobile",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userAgent;if(this.isTablet(t))return!1;var n=Object.keys(jc).find(function(n){return e.reTree.test(t,jc[n])});return!!n}},{key:"isTablet",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userAgent;if(Object(r.n)(this.platformId)&&(this.reTree.test(this.userAgent,Lc.iPad)||"undefined"!=typeof navigator&&"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1))return!0;var n=Object.keys(Lc).find(function(n){return!!e.reTree.test(t,Lc[n])});return!!n}},{key:"isDesktop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userAgent;return(this.device!==Rc.UNKNOWN||!this.isMobile(e)&&!this.isTablet(e))&&Ic.indexOf(this.device)>-1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Mc.Qb(Mc.C))},e.\u0275prov=Mc.Bb({factory:function(){return new e(Mc.Qb(Mc.C))},token:e,providedIn:"root"}),e}(),Qc=["inputVideo"];function $c(e,t){1&e&&(Mc.Ib(0),Mc.Gb(1,"div",5),Mc.Kb(2,"div",6),Mc.Kb(3,"div",7),Mc.kc(4,"Usmjerite kameru prema ruci te namjestite ruku unutar maske."),Mc.Jb(),Mc.Jb(),Mc.Hb())}function eh(e,t){if(1&e){var n=Mc.Lb();Mc.Kb(0,"div",8),Mc.Kb(1,"div",9),Mc.Kb(2,"i",10),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().closeCameraShare()}),Mc.Jb(),Mc.Jb(),Mc.Gb(3,"hr",11),Mc.Kb(4,"div",12),Mc.Kb(5,"span",13),Mc.Nb(6,14),Mc.Jb(),Mc.Kb(7,"button",15),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().shareInstagram()}),Mc.Pb(8,16),Mc.Gb(9,"i",17),Mc.Ob(),Mc.Jb(),Mc.Kb(10,"button",15),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().shareFacebook()}),Mc.Pb(11,18),Mc.Gb(12,"i",19),Mc.Ob(),Mc.Jb(),Mc.Kb(13,"button",15),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().shareEmail()}),Mc.Pb(14,20),Mc.Gb(15,"i",21),Mc.Ob(),Mc.Jb(),Mc.Kb(16,"button",15),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().downloadScreen()}),Mc.Pb(17,22),Mc.Gb(18,"i",23),Mc.Ob(),Mc.Jb(),Mc.Jb(),Mc.Jb()}}var th,nh,rh,ih,ah,oh=function(){function e(e,t){this.webGLService=e,this.device=t,this.closeShare=new Mc.n,this.showCameraModal=!1,this.disabledCamera=!1,this.device&&(this.disabledCamera=!0)}return e.prototype.ngAfterViewInit=function(){this.webGLService.videoElement=this.videoElement=this.inputVideo.nativeElement,this.startCamera(),this.startMediaPipe()},e.prototype.startCamera=function(){var e=this;if(this.videoElement){var t=new Ac.Camera(this.videoElement,{facingMode:"environment",onFrame:function(){return Object(a.a)(e,void 0,void 0,function(){var e;return Object(a.b)(this,function(t){switch(t.label){case 0:return e=this.videoElement.videoWidth/this.videoElement.videoHeight,this.videoElement.videoWidth!==this.webGLService.canvasWidth&&(this.webGLService.canvasWidth=window.innerWidth<this.videoElement.videoWidth?window.innerWidth:this.videoElement.videoWidth,this.webGLService.canvasHeight=Math.round(this.webGLService.canvasWidth/e)),this.webGLService.attachVideoTexture(),this.holistic?[4,this.holistic.send({image:this.videoElement})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}});t.start(),this.camera=t}},e.prototype.shareFacebook=function(){this.webGLService.renderer.domElement.toBlob(function(e){})},e.prototype.shareInstagram=function(){},e.prototype.shareEmail=function(){},e.prototype.downloadScreen=function(){},e.prototype.fbPost=function(){},e.prototype.openCameraShare=function(){this.showCameraModal=!0},e.prototype.closeCameraShare=function(){this.showCameraModal=!1,this.closeShare.emit(!0)},e.prototype.startMediaPipe=function(){var e=this;this.holistic=new kc.Hands({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/hands@0.3.1634603088/"+e}}),this.holistic.setOptions({maxNumHands:1,modelComplexity:1,minDetectionConfidence:.5,minTrackingConfidence:.5}),this.holistic.onResults(function(t){var n,r=null;if(t.multiHandedness&&t.multiHandedness.length>0){n=t.multiHandedness[0].label;var i=0;if(t.multiHandedness.length>1){var a=t.multiHandedness.find(function(e){return"Left"===e.label});a&&void 0!==a.label&&(n=a.label,i=t.multiHandedness.indexOf(a))}r=t.multiHandLandmarks[i]}n&&r?e.webGLService.updateModelPosition(n,r):e.webGLService.object&&(e.webGLService.object.visible=!1)})},e.prototype.ngOnDestroy=function(){if(this.camera){var e=this.videoElement;e.pause(),e.srcObject&&(e.srcObject.getTracks().forEach(function(e){return e.stop()}),e.srcObject=null)}this.webGLService.texture2D&&(this.webGLService.texture2D=void 0)},e.\u0275fac=function(t){return new(t||e)(Mc.Fb(Oc),Mc.Fb(Zc))},e.\u0275cmp=Mc.zb({type:e,selectors:[["app-camera"]],viewQuery:function(e,t){var n;1&e&&Mc.nc(Qc,1),2&e&&Mc.bc(n=Mc.Ub())&&(t.inputVideo=n.first)},inputs:{watch:"watch"},outputs:{closeShare:"closeShare"},decls:5,vars:2,consts:function(){return[["width","500","height","500","muted","","playsinline","","autoplay","",1,"input_video"],["inputVideo",""],[1,"container"],[4,"ngIf"],["class","modal rounded-top p-2",4,"ngIf"],[1,"arm"],[1,"helper"],[1,"text"],[1,"modal","rounded-top","p-2"],[1,"p-2","d-flex","justify-content-end"],[1,"close-icon-grey",3,"click"],[1,"divider","mb-4"],[1,"d-flex","justify-content-around"],[1,"d-inline-block","mr-2","font-weight-bold"],"Podijelite:",["type","button",1,"btn","border-0","transparent",3,"click"],"" + "\ufffd#9\ufffd" + "" + "\ufffd/#9\ufffd" + "",[1,"instagram-button"],"" + "\ufffd#12\ufffd" + "" + "\ufffd/#12\ufffd" + "",[1,"fb-button"],"" + "\ufffd#15\ufffd" + "" + "\ufffd/#15\ufffd" + "",[1,"email-button"],"" + "\ufffd#18\ufffd" + "" + "\ufffd/#18\ufffd" + "",[1,"download-button"]]},template:function(e,t){1&e&&(Mc.Gb(0,"video",0,1),Mc.Kb(2,"div",2),Mc.ic(3,$c,5,0,"ng-container",3),Mc.Jb(),Mc.ic(4,eh,19,0,"div",4)),2&e&&(Mc.wb(3),Mc.Wb("ngIf",!(null!=t.webGLService.object&&t.webGLService.object.visible||t.webGLService.loading)),Mc.wb(1),Mc.Wb("ngIf",t.showCameraModal))},directives:[r.j],encapsulation:2}),e}(),sh=["meshButton"],uh=function(e){return{active:e}},lh=function(){function e(e){this.webGLService=e}return e.prototype.getColor=function(e){return this.material instanceof lu?255*this.material.color[e]:null},e.\u0275fac=function(t){return new(t||e)(Mc.Fb(Oc))},e.\u0275cmp=Mc.zb({type:e,selectors:[["app-material"]],viewQuery:function(e,t){var n;1&e&&Mc.nc(sh,1),2&e&&Mc.bc(n=Mc.Ub())&&(t.meshButton=n.first)},inputs:{material:"material",mesh:"mesh",part:"part"},decls:2,vars:5,consts:[[1,"btn","btn-circle","border-white","ov-hidden","relative","material",3,"ngClass","click"],["meshButton",""]],template:function(e,t){1&e&&(Mc.Kb(0,"div",0,1),Mc.Tb("click",function(){return t.webGLService.changeMaterial(t.material,t.part)}),Mc.Jb()),2&e&&(Mc.hc("background-color","rgb("+t.getColor("r")+", "+t.getColor("g")+", "+t.getColor("b")+")"),Mc.Wb("ngClass",Mc.ac(3,uh,t.webGLService.displayMaterial[t.part]===t.material.name)))},directives:[r.h],encapsulation:2}),e}(),ch=function(e){return{active:e}};function hh(e,t){if(1&e){var n=Mc.Lb();Mc.Kb(0,"li"),Mc.Kb(1,"button",14),Mc.Tb("click",function(){Mc.dc(n);var e=t.$implicit;return Mc.Vb(3).webGLService.changeMeshes(e)}),Mc.kc(2),Mc.Jb(),Mc.Jb()}if(2&e){var r=t.$implicit,i=Mc.Vb(3);Mc.wb(1),Mc.Wb("ngClass",Mc.ac(2,ch,i.webGLService.displayMaterial.tijelo===r.name)),Mc.wb(1),Mc.lc(r.name)}}function fh(e,t){if(1&e&&(Mc.Kb(0,"ul",12),Mc.ic(1,hh,3,4,"li",13),Mc.Jb()),2&e){var n=Mc.Vb(2);Mc.wb(1),Mc.Wb("ngForOf",n.webGLService.materials.tijelo)}}function dh(e,t){if(1&e&&(Mc.Kb(0,"span",19),Mc.kc(1),Mc.Jb()),2&e){var n=Mc.Vb().$implicit,r=Mc.Vb(3);Mc.wb(1),Mc.mc("",r.getDisplayMeshName(r.webGLService.meshes.remen),"_",n.name,"")}}function ph(e,t){if(1&e&&(Mc.Kb(0,"li",16),Mc.Gb(1,"app-material",17),Mc.ic(2,dh,2,2,"span",18),Mc.Jb()),2&e){var n=t.$implicit,r=Mc.Vb(3);Mc.wb(1),Mc.Wb("mesh",r.getDisplayMesh(r.webGLService.meshes.remen))("material",n)("part","remen"),Mc.wb(1),Mc.Wb("ngIf",r.webGLService.displayMesh.remen===r.getDisplayMesh(r.webGLService.meshes.remen)&&r.webGLService.displayMaterial.remen===n)}}function vh(e,t){if(1&e&&(Mc.Ib(0),Mc.ic(1,ph,3,4,"li",15),Mc.Hb()),2&e){var n=Mc.Vb(2);Mc.wb(1),Mc.Wb("ngForOf",n.webGLService.materials.remen)}}function mh(e,t){if(1&e&&(Mc.Kb(0,"span",19),Mc.kc(1),Mc.Jb()),2&e){var n=Mc.Vb().$implicit,r=Mc.Vb(3);Mc.wb(1),Mc.mc("",r.getDisplayMeshName(r.webGLService.meshes.kozni),"_",n.name,"")}}function gh(e,t){if(1&e&&(Mc.Kb(0,"li",16),Mc.Gb(1,"app-material",17),Mc.ic(2,mh,2,2,"span",18),Mc.Jb()),2&e){var n=t.$implicit,r=Mc.Vb(3);Mc.wb(1),Mc.Wb("mesh",r.getDisplayMesh(r.webGLService.meshes.kozni))("material",n)("part","kozni"),Mc.wb(1),Mc.Wb("ngIf",r.webGLService.displayMesh.kozni===r.getDisplayMesh(r.webGLService.meshes.kozni)&&r.webGLService.displayMaterial.kozni===n)}}function yh(e,t){if(1&e&&(Mc.Ib(0),Mc.ic(1,gh,3,4,"li",15),Mc.Hb()),2&e){var n=Mc.Vb(2);Mc.wb(1),Mc.Wb("ngForOf",n.webGLService.materials.kozni)}}function bh(e,t){if(1&e&&(Mc.Kb(0,"span",19),Mc.kc(1),Mc.Jb()),2&e){var n=Mc.Vb().$implicit,r=Mc.Vb(3);Mc.wb(1),Mc.mc("",r.getDisplayMeshName(r.webGLService.meshes.extreme),"_",n.name,"")}}function _h(e,t){if(1&e&&(Mc.Kb(0,"li",16),Mc.Gb(1,"app-material",17),Mc.ic(2,bh,2,2,"span",18),Mc.Jb()),2&e){var n=t.$implicit,r=Mc.Vb(3);Mc.wb(1),Mc.Wb("mesh",r.getDisplayMesh(r.webGLService.meshes.extreme))("material",n)("part","extreme"),Mc.wb(1),Mc.Wb("ngIf",r.webGLService.displayMesh.extreme===r.getDisplayMesh(r.webGLService.meshes.extreme)&&r.webGLService.displayMaterial.extreme===n)}}function xh(e,t){if(1&e&&(Mc.Ib(0),Mc.ic(1,_h,3,4,"li",15),Mc.Hb()),2&e){var n=Mc.Vb(2);Mc.wb(1),Mc.Wb("ngForOf",n.webGLService.materials.extreme)}}function wh(e,t){if(1&e&&(Mc.Ib(0),Mc.ic(1,fh,2,1,"ul",2),Mc.Kb(2,"div",3),Mc.Kb(3,"div",4),Mc.Kb(4,"h3",5),Mc.Nb(5,6),Mc.Jb(),Mc.Kb(6,"div",7),Mc.Nb(7,8),Mc.Jb(),Mc.Jb(),Mc.Kb(8,"ul",9),Mc.ic(9,vh,2,1,"ng-container",0),Mc.ic(10,yh,2,1,"ng-container",0),Mc.ic(11,xh,2,1,"ng-container",0),Mc.Jb(),Mc.Kb(12,"div",10),Mc.Gb(13,"i",11),Mc.Jb(),Mc.Jb(),Mc.Hb()),2&e){var n=Mc.Vb();Mc.wb(1),Mc.Wb("ngIf",n.webGLService.materials.tijelo.length>0),Mc.wb(8),Mc.Wb("ngIf",n.webGLService.meshes.remen&&n.webGLService.meshes.remen.length>0),Mc.wb(1),Mc.Wb("ngIf",n.webGLService.meshes.kozni&&n.webGLService.meshes.kozni.length>0),Mc.wb(1),Mc.Wb("ngIf",n.webGLService.meshes.extreme&&n.webGLService.meshes.extreme.length>0)}}function Th(e,t){1&e&&Mc.Gb(0,"div",20)}var Sh,Mh,Oh=function(){function e(e){this.webGLService=e}return e.prototype.ngAfterViewInit=function(){this.webGLService.loadModel(this.watch,!0)},e.prototype.getDisplayMesh=function(e){return e.find(function(e){return e instanceof rr})},e.prototype.getDisplayMeshName=function(e){var t=e.find(function(e){return e instanceof rr});return t?t.name:""},e.prototype.ngOnDestroy=function(){this.webGLService&&this.webGLService.reset()},e.\u0275fac=function(t){return new(t||e)(Mc.Fb(Oc))},e.\u0275cmp=Mc.zb({type:e,selectors:[["app-watch-model"]],inputs:{watch:"watch",tryOn:"tryOn"},decls:2,vars:2,consts:function(){return[[4,"ngIf"],["class","loader loading",4,"ngIf"],["class","unstyled sticky top center justify-content-center d-flex p-2",4,"ngIf"],[1,"sticky","right","d-flex","flex-column","align-items-end"],[1,"p-2","mb-3"],[1,"text-white","m-0","text-center"],"Remeni",[1,"text-white","text-center","f-small"],"(dodatna oprema)",[1,"unstyled","materials","mb-3"],[1,"d-flex","justify-content-end"],[1,"down-icon","mr-3"],[1,"unstyled","sticky","top","center","justify-content-center","d-flex","p-2"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-rounded","transparent","bd-white","mr-2","text-white",3,"ngClass","click"],["class","mb-3 mr-2",4,"ngFor","ngForOf"],[1,"mb-3","mr-2"],[3,"mesh","material","part"],["class","text-white fz-12 mt-1",4,"ngIf"],[1,"text-white","fz-12","mt-1"],[1,"loader","loading"]]},template:function(e,t){1&e&&(Mc.ic(0,wh,14,4,"ng-container",0),Mc.ic(1,Th,1,0,"div",1)),2&e&&(Mc.Wb("ngIf",t.webGLService.meshes),Mc.wb(1),Mc.Wb("ngIf",!t.webGLService.meshes))},directives:[r.j,r.i,r.h,lh],encapsulation:2}),e}(),Eh=["cameraComp"];function kh(e,t){if(1&e&&Mc.Gb(0,"app-watch-model",15),2&e){var n=Mc.Vb();Mc.Wb("watch",n.watch)("tryOn",n.tryOn)}}function Ah(e,t){if(1&e){var n=Mc.Lb();Mc.Kb(0,"app-camera",16,17),Mc.Tb("closeShare",function(){return Mc.dc(n),Mc.Vb().closeCameraShare()}),Mc.Jb()}if(2&e){var r=Mc.Vb();Mc.Wb("watch",r.watch)}}function Ch(e,t){if(1&e){var n=Mc.Lb();Mc.Kb(0,"button",22),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb(2).openCameraShare()}),Mc.Gb(1,"i",26),Mc.Jb()}}function Ph(e,t){if(1&e){var n=Mc.Lb();Mc.Kb(0,"div",18),Mc.Kb(1,"div",19),Mc.Kb(2,"button",20),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().openShare()}),Mc.Gb(3,"i",21),Mc.Jb(),Mc.Kb(4,"button",22),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().showInfoModal=!0}),Mc.Gb(5,"i",23),Mc.Jb(),Mc.Jb(),Mc.ic(6,Ch,2,0,"button",24),Mc.Kb(7,"button",25),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().buyNow()}),Mc.kc(8,"Kupite odmah"),Mc.Jb(),Mc.Jb()}if(2&e){var r=Mc.Vb();Mc.wb(6),Mc.Wb("ngIf",r.tryOn)}}function jh(e,t){if(1&e){var n=Mc.Lb();Mc.Kb(0,"div",27),Mc.Kb(1,"div",28),Mc.Kb(2,"i",29),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().showInfoModal=!1}),Mc.Jb(),Mc.Jb(),Mc.Gb(3,"hr",30),Mc.Kb(4,"div"),Mc.Kb(5,"h3",31),Mc.Nb(6,32),Mc.Jb(),Mc.Kb(7,"div",33),Mc.Gb(8,"img",34),Mc.Jb(),Mc.Kb(9,"div",35),Mc.Gb(10,"h2",36),Mc.Kb(11,"h3"),Mc.Nb(12,37),Mc.Jb(),Mc.Kb(13,"div",38),Mc.Nb(14,39),Mc.Jb(),Mc.Kb(15,"div",40),Mc.Nb(16,41),Mc.Jb(),Mc.Jb(),Mc.Kb(17,"div",42),Mc.Kb(18,"button",43),Mc.Nb(19,44),Mc.Jb(),Mc.Kb(20,"button",45),Mc.Tb("click",function(){return Mc.dc(n),Mc.Vb().buyNow()}),Mc.Nb(21,46),Mc.Jb(),Mc.Jb(),Mc.Jb(),Mc.Jb()}if(2&e){var r=Mc.Vb();Mc.wb(8),Mc.Wb("src",r.getWatchGifUrl(),Mc.fc),Mc.wb(2),Mc.Wb("innerHTML",r.watch.name,Mc.ec)}}var Lh,Rh,Ih,Dh,Nh,Hh,Gh,Bh,Uh=function(e){return{active:e}},Fh=function(){return{tryOn:!0}},zh=function(){function e(e,t,n,r){var i=this;this.deviceService=e,this.webGLService=t,this.route=n,this.router=r,this.subscription=new o.a,this.bgSrc=Sc.a.settings.appRoot+"/images/bckg-image@2x.jpg",this.title="samsung-watch",this.watches=Ec,this.gifUrl=Sc.a.settings.appRoot+"/images/watch4",this.showShareModal=!1,this.showInfoModal=!1,this.subscription.add(this.route.params.subscribe(function(e){if(i.watch=Ec.find(function(t){return t.nameUrl===e.id}),i.gifUrl+=i.watch.name.toLowerCase().includes("classic")?"-classic.gif":".gif",!i.watch)return i.router.navigate(["/list"])})),this.webGLService.deviceInfo=this.deviceService.getDeviceInfo(),this.resizeObservable$=f(window,"resize").pipe(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return function(n){return n.lift(new k(e,t))}}(200),function(e){return e.lift(new P(void 0,void 0))}),this.subscription.add(this.resizeObservable$.subscribe(function(e){i.webGLService.camera.aspect=i.webGLService.canvasWidth/i.webGLService.canvasHeight,i.webGLService.camera.updateProjectionMatrix(),i.webGLService.renderer.setSize(i.webGLService.canvasWidth,i.webGLService.canvasHeight)}))}return Object.defineProperty(e.prototype,"content",{set:function(e){e&&(this.cameraComp=e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.webGLService.canvasWidth=window.innerWidth,this.webGLService.canvasHeight=window.innerHeight,this.webGLService.init(),this.subscription.add(this.route.queryParams.subscribe(function(t){e.tryOn=void 0!==t.tryOn,e.tryOn?(e.webGLService.removeModelControls(),e.webGLService.setClippingPlane()):(e.webGLService.texture2D=null,e.webGLService.removeClippingPlane(),e.webGLService.setBackgroundImage(e.bgSrc),e.webGLService.resetWatchPosition(),e.webGLService.addModelControls(),e.subscription.add(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return S(t)?r=Number(t)<1?1:Number(t):Object(M.a)(t)&&(n=t),Object(M.a)(n)||(n=T),new u.a(function(t){var i=S(e)?e:+e-n.now();return n.schedule(O,i,{index:0,period:r,subscriber:t})})}(0,50).subscribe(function(t){return e.webGLService.animateModel()}))),e.webGLService.object&&(e.webGLService.object.visible=!e.tryOn)}))},e.prototype.getWatchGifUrl=function(){return this.gifUrl},e.prototype.showActions=function(){this.showShareModal=!0},e.prototype.openCameraShare=function(){this.showInfoModal=!1,this.showShareModal=!0,this.cameraComp.openCameraShare()},e.prototype.closeCameraShare=function(){this.showInfoModal=!1,this.showShareModal=!1},e.prototype.openShare=function(){navigator.share&&navigator.share({title:this.watch.name.replace(/(\r\n|\n|\r|<br\/>)/gm," "),url:this.watch.shareUrl?this.watch.shareUrl:document.location.href})},e.prototype.buyNow=function(){console.log("buyNow")},e.prototype.ngOnDestroy=function(){if(this.subscription&&this.subscription.unsubscribe(),this.webGLService.renderer){this.webGLService.destroyAll();var e=document.getElementsByTagName("canvas");if(e.length>0)for(var t=0,n=Array.from(e);t<n.length;t++)n[t].remove()}},e.\u0275fac=function(t){return new(t||e)(Mc.Fb(Zc),Mc.Fb(Oc),Mc.Fb(i.a),Mc.Fb(i.c))},e.\u0275cmp=Mc.zb({type:e,selectors:[["app-watch-viewer"]],viewQuery:function(e,t){var n;1&e&&Mc.nc(Eh,1),2&e&&Mc.bc(n=Mc.Ub())&&(t.content=n.first)},decls:18,vars:13,consts:function(){return[[1,"mb-3"],[1,"samsung-logo"],[1,"d-flex","justify-content-between"],["routerLink","/list",1,"back-icon"],[1,"mt-0","text-center","text-white","m-0",3,"innerHTML"],[1,"unstyled","sticky","left"],[1,"mb-3","p-2"],["routerLink","./",3,"ngClass"],"3D PRIKAZ",["routerLink","./",3,"ngClass","queryParams"],"ISPROBAJTE",[3,"watch","tryOn",4,"ngIf"],[3,"watch","closeShare",4,"ngIf"],["class","sticky bottom d-flex justify-content-between px-3 mb-2 height-100px",4,"ngIf"],["class","modal rounded-top p-0",4,"ngIf"],[3,"watch","tryOn"],[3,"watch","closeShare"],["cameraComp",""],[1,"sticky","bottom","d-flex","justify-content-between","px-3","mb-2","height-100px"],[1,"d-flex"],["type","button",1,"bg-none","border-0","mr-3",3,"click"],[1,"share-button"],["type","button",1,"bg-none","border-0",3,"click"],[1,"info-button"],["type","button","class","bg-none border-0",3,"click",4,"ngIf"],["type","button",1,"btn","btn-rounded","btn-rounded-lg","transparent","bd-white","text-white",3,"click"],[1,"camera-button"],[1,"modal","rounded-top","p-0"],[1,"m-2","d-flex","justify-content-end"],[1,"close-icon-grey",3,"click"],[1,"divider","mb-4"],[1,"px-3"],"Svakog dana odaberite novo lice sata",[1,"d-flex","justify-content-center"],["alt","Samgung watch",1,"mx-auto","watch-gif",3,"src"],[1,"px-3","mb-4"],[3,"innerHTML"],"Sat koji Vas najbolje poznaje",[1,"mb-2","font-size-1"],"Ve\u0107ina nas \u017Eeli znati vi\u0161e o samima sebi kako bismo mogli biti najbolja verzija sebe. Zato smo osmislili potpuno novi Galaxy Watch4 kako bi Vam bio suputnik na Va\u0161em putovanju prema zdravijoj verziji sebe.",[1,"f-small"],"Dostupnost boja, veli\u010Dina, modela i remena mo\u017Ee ovisiti o zemlji ili regiji. * Korisni\u010Dko su\u010Delje podlo\u017Eno je promjenama. * Dostupne zna\u010Dajke i aplikacije mogu ovisiti o regiji, povezanom ure\u0111aju, operativnom sustavu ili mobilnom operatoru. * Sve slike na ovoj stranici simulirane su u ilustracijske svrhe.",[1,"px-3","d-flex","justify-content-around","mb-3"],["type","button",1,"btn","btn-lg","btn-link","font-weight-bold","px-0"],"Doznajte vi\u0161e",["type","button",1,"btn","btn-lg","btn-rounded-m","btn-black",3,"click"],"Kupite odmah"]},template:function(e,t){1&e&&(Mc.Kb(0,"div"),Mc.Kb(1,"div",0),Mc.Gb(2,"i",1),Mc.Jb(),Mc.Kb(3,"div",2),Mc.Gb(4,"a",3),Mc.Gb(5,"h2",4),Mc.Gb(6,"i"),Mc.Jb(),Mc.Kb(7,"ul",5),Mc.Kb(8,"li",6),Mc.Kb(9,"a",7),Mc.Nb(10,8),Mc.Jb(),Mc.Jb(),Mc.Kb(11,"li",6),Mc.Kb(12,"a",9),Mc.Nb(13,10),Mc.Jb(),Mc.Jb(),Mc.Jb(),Mc.ic(14,kh,1,2,"app-watch-model",11),Mc.ic(15,Ah,2,1,"app-camera",12),Mc.Jb(),Mc.ic(16,Ph,9,1,"div",13),Mc.ic(17,jh,22,2,"div",14)),2&e&&(Mc.wb(5),Mc.Wb("innerHTML",null==t.watch?null:t.watch.name,Mc.ec),Mc.wb(4),Mc.Wb("ngClass",Mc.ac(8,Uh,!t.tryOn)),Mc.wb(3),Mc.Wb("ngClass",Mc.ac(10,Uh,t.tryOn))("queryParams",Mc.Zb(12,Fh)),Mc.wb(2),Mc.Wb("ngIf",t.watch),Mc.wb(1),Mc.Wb("ngIf",t.tryOn),Mc.wb(1),Mc.Wb("ngIf",!t.showShareModal),Mc.wb(1),Mc.Wb("ngIf",t.showInfoModal))},directives:[i.e,r.h,r.j,Oh,oh],encapsulation:2}),e}(),Vh=[{path:"",component:zh},{path:":id",component:zh}],Wh=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mc.Db({type:e}),e.\u0275inj=Mc.Cb({imports:[[i.f.forChild(Vh)],i.f]}),e}(),Xh=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=Mc.Db({type:e}),e.\u0275inj=Mc.Cb({imports:[[r.b,Wh]]}),e}()},ReuC:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("foSv");function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.a)(e)););return e}(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}},SeVD:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("ngJS"),i=n("NJ4a"),a=n("Lhse"),o=n("kJWO"),s=n("I55L"),u=n("c2HN"),l=n("XoHu"),c=function(e){if(e&&"function"==typeof e[o.a])return c=e,function(e){var t=c[o.a]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Object(s.a)(e))return Object(r.a)(e);if(Object(u.a)(e))return n=e,function(e){return n.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,i.a),e};if(e&&"function"==typeof e[a.a])return t=e,function(e){for(var n=t[a.a]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e};var t,n,c,h=Object(l.a)(e)?"an invalid object":"'".concat(e,"'"),f="You provided ".concat(h," where a stream was expected.")+" You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(f)}},SpAZ:function(e,t,n){"use strict";function r(e){return e}n.d(t,"a",function(){return r})},UWY7:function(e,t,n){"use strict";n.r(t),n.d(t,"WatchListModule",function(){return _});var r=n("ofXK"),i=n("tyNb"),a=n("mrSG"),o=n("FnrL"),s=n("h/w8"),u=n("fXoL");function l(e,t){if(1&e&&(u.Kb(0,"a",8),u.Kb(1,"div",9),u.Gb(2,"h3",10),u.Kb(3,"div",11),u.Kb(4,"span",12),u.Nb(5,13),u.Jb(),u.Kb(6,"div",14),u.Gb(7,"i",15),u.Kb(8,"span",16),u.Nb(9,17),u.Jb(),u.Jb(),u.Jb(),u.Jb(),u.Gb(10,"img",18),u.Jb()),2&e){var n=t.$implicit,r=u.Vb(2);u.Yb("routerLink","/watch/",n.nameUrl,""),u.wb(2),u.Wb("innerHTML",n.name,u.ec),u.wb(8),u.Xb("alt",n.name),u.Wb("src",r.assetsUrl+n.imageUrl,u.fc)}}function c(e,t){if(1&e&&(u.Ib(0),u.Kb(1,"h2",5),u.Pb(2,6),u.Gb(3,"br"),u.Ob(),u.Jb(),u.ic(4,l,11,4,"a",7),u.Hb()),2&e){var n=u.Vb();u.wb(4),u.Wb("ngForOf",n.watches)}}function h(e,t){1&e&&(u.Kb(0,"div"),u.Nb(1,20),u.Jb())}function f(e,t){if(1&e&&u.ic(0,h,2,0,"div",19),2&e){var n=u.Vb();u.Wb("ngIf",!n.loading.list)}}var d,p,v,m,g=function(){function e(){this.watches=o,this.assetsUrl="/",this.loading={list:!1},this.assetsUrl=""+s.a.settings.appRoot}return e.prototype.closeWindow=function(){window.close()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.zb({type:e,selectors:[["app-watch-list"]],decls:6,vars:2,consts:function(){return[[1,"bg-bckg"],[1,"mb-3"],[1,"samsung-logo"],[4,"ngIf","ngIfElse"],["noWatches",""],[1,"mt-0","text-center","text-white"],"Kreirajte i isprobajte" + "\ufffd#3\ufffd\ufffd/#3\ufffd" + "Galaxy Watch4",["class","list-watch d-flex relative",3,"routerLink",4,"ngFor","ngForOf"],[1,"list-watch","d-flex","relative",3,"routerLink"],[1,"d-flex","flex-column","w-100"],[1,"mt-0",3,"innerHTML"],[1,"d-flex","justify-content-between"],[1,"btn","btn-black","mr-2"],"Isprobajte",[1,"d-flex"],[1,"ar-experience"],[1,"f-small"],"AR iskustvo",[1,"img",3,"src","alt"],[4,"ngIf"],"Gre\u0161ka prilikom u\u010Ditavanja satova"]},template:function(e,t){if(1&e&&(u.Kb(0,"div",0),u.Kb(1,"div",1),u.Gb(2,"i",2),u.Jb(),u.ic(3,c,5,1,"ng-container",3),u.Jb(),u.ic(4,f,1,1,"ng-template",null,4,u.jc)),2&e){var n=u.cc(5);u.wb(3),u.Wb("ngIf",(null==t.watches?null:t.watches.length)>0)("ngIfElse",n)}},directives:[r.j,r.i,i.e],encapsulation:2}),e}(),y=[{path:"",component:g,children:[{path:"",redirectTo:"/list",pathMatch:"full"},{path:"list",component:g}]}],b=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Db({type:e}),e.\u0275inj=u.Cb({imports:[[i.f.forChild(y)],i.f]}),e}(),_=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.Db({type:e}),e.\u0275inj=u.Cb({imports:[[r.b,i.f,b]]}),e}()},XNiG:function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return m});var r=n("vuIU"),i=n("ReuC"),a=n("foSv"),o=n("1OyB"),s=n("Ji7U"),u=n("LK+K"),l=n("HDdC"),c=n("7o/Q"),h=n("quSY"),f=n("9ppp"),d=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,r){var i;return Object(o.a)(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return Object(r.a)(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(h.a),p=n("2QA8"),v=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).destination=e,r}return n}(c.a),m=function(){var e=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return Object(r.a)(n,[{key:p.a,value:function(){return new v(this)}},{key:"lift",value:function(e){var t=new g(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new f.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new f.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new f.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new f.a;return Object(i.a)(Object(a.a)(n.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new f.a;return this.hasError?(e.error(this.thrownError),h.a.EMPTY):this.isStopped?(e.complete(),h.a.EMPTY):(this.observers.push(e),new d(this,e))}},{key:"asObservable",value:function(){var e=new l.a;return e.source=this,e}}]),n}(l.a);return e.create=function(e,t){return new g(e,t)},e}(),g=function(e){Object(s.a)(n,e);var t=Object(u.a)(n);function n(e,r){var i;return Object(o.a)(this,n),(i=t.call(this)).destination=e,i.source=r,i}return Object(r.a)(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):h.a.EMPTY}}]),n}(m)},XoHu:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,"a",function(){return r})},ZUHj:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("51Dv"),i=n("SeVD"),a=n("HDdC");function o(e,t,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new r.a(e,n,o);if(!s.closed)return t instanceof a.a?t.subscribe(s):Object(i.a)(t)(s)}},a3WO:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",function(){return r})},bHdf:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("5+tZ"),i=n("SpAZ");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return Object(r.a)(i.a,e)}},bOdf:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("5+tZ");function i(e,t){return Object(r.a)(e,t,1)}},c2HN:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",function(){return r})},fXoL:function(e,t,n){"use strict";n.d(t,"a",function(){return Tn}),n.d(t,"b",function(){return vl}),n.d(t,"c",function(){return cl}),n.d(t,"d",function(){return ul}),n.d(t,"e",function(){return ll}),n.d(t,"f",function(){return lc}),n.d(t,"g",function(){return $l}),n.d(t,"h",function(){return hu}),n.d(t,"i",function(){return Ol}),n.d(t,"j",function(){return Is}),n.d(t,"k",function(){return yl}),n.d(t,"l",function(){return Gs}),n.d(t,"m",function(){return Ur}),n.d(t,"n",function(){return Uu}),n.d(t,"o",function(){return ja}),n.d(t,"p",function(){return Vn}),n.d(t,"q",function(){return q}),n.d(t,"r",function(){return wn}),n.d(t,"s",function(){return Ka}),n.d(t,"t",function(){return iu}),n.d(t,"u",function(){return ou}),n.d(t,"v",function(){return gl}),n.d(t,"w",function(){return wu}),n.d(t,"x",function(){return tc}),n.d(t,"y",function(){return xu}),n.d(t,"z",function(){return Xl}),n.d(t,"A",function(){return Al}),n.d(t,"B",function(){return Wn}),n.d(t,"C",function(){return pl}),n.d(t,"D",function(){return dl}),n.d(t,"E",function(){return Fs}),n.d(t,"F",function(){return Us}),n.d(t,"G",function(){return Xr}),n.d(t,"H",function(){return Vs}),n.d(t,"I",function(){return Rr}),n.d(t,"J",function(){return Xn}),n.d(t,"K",function(){return ic}),n.d(t,"L",function(){return yu}),n.d(t,"M",function(){return Dl}),n.d(t,"N",function(){return Sn}),n.d(t,"O",function(){return Ws}),n.d(t,"P",function(){return Su}),n.d(t,"Q",function(){return $}),n.d(t,"R",function(){return Kl}),n.d(t,"S",function(){return zl}),n.d(t,"T",function(){return sc}),n.d(t,"U",function(){return Hl}),n.d(t,"V",function(){return ml}),n.d(t,"W",function(){return Ra}),n.d(t,"X",function(){return qo}),n.d(t,"Y",function(){return j}),n.d(t,"Z",function(){return jr}),n.d(t,"ab",function(){return pr}),n.d(t,"bb",function(){return nr}),n.d(t,"cb",function(){return ir}),n.d(t,"db",function(){return ur}),n.d(t,"eb",function(){return or}),n.d(t,"fb",function(){return ar}),n.d(t,"gb",function(){return sr}),n.d(t,"hb",function(){return zo}),n.d(t,"ib",function(){return oc}),n.d(t,"jb",function(){return Vo}),n.d(t,"kb",function(){return Wo}),n.d(t,"lb",function(){return rr}),n.d(t,"mb",function(){return ie}),n.d(t,"nb",function(){return Qa}),n.d(t,"ob",function(){return yo}),n.d(t,"pb",function(){return mo}),n.d(t,"qb",function(){return go}),n.d(t,"rb",function(){return Fo}),n.d(t,"sb",function(){return ze}),n.d(t,"tb",function(){return E}),n.d(t,"ub",function(){return tr}),n.d(t,"vb",function(){return Ne}),n.d(t,"wb",function(){return Ii}),n.d(t,"xb",function(){return no}),n.d(t,"yb",function(){return tl}),n.d(t,"zb",function(){return me}),n.d(t,"Ab",function(){return Te}),n.d(t,"Bb",function(){return N}),n.d(t,"Cb",function(){return H}),n.d(t,"Db",function(){return _e}),n.d(t,"Eb",function(){return Se}),n.d(t,"Fb",function(){return oo}),n.d(t,"Gb",function(){return ho}),n.d(t,"Hb",function(){return po}),n.d(t,"Ib",function(){return fo}),n.d(t,"Jb",function(){return co}),n.d(t,"Kb",function(){return lo}),n.d(t,"Lb",function(){return vo}),n.d(t,"Mb",function(){return Ho}),n.d(t,"Nb",function(){return Ps}),n.d(t,"Ob",function(){return Cs}),n.d(t,"Pb",function(){return As}),n.d(t,"Qb",function(){return Hn}),n.d(t,"Rb",function(){return bn}),n.d(t,"Sb",function(){return sl}),n.d(t,"Tb",function(){return bo}),n.d(t,"Ub",function(){return nl}),n.d(t,"Vb",function(){return So}),n.d(t,"Wb",function(){return so}),n.d(t,"Xb",function(){return Mo}),n.d(t,"Yb",function(){return Oo}),n.d(t,"Zb",function(){return Hu}),n.d(t,"ac",function(){return Gu}),n.d(t,"bc",function(){return $u}),n.d(t,"cc",function(){return ao}),n.d(t,"dc",function(){return ut}),n.d(t,"ec",function(){return Ir}),n.d(t,"fc",function(){return Dr}),n.d(t,"gc",function(){return xe}),n.d(t,"hc",function(){return Ao}),n.d(t,"ic",function(){return io}),n.d(t,"jc",function(){return ol}),n.d(t,"kc",function(){return Ro}),n.d(t,"lc",function(){return Io}),n.d(t,"mc",function(){return No}),n.d(t,"nc",function(){return el});var r=n("ReuC"),i=n("foSv"),a=n("JX7q"),o=n("ODXe");n("rePB"),n("DSFK"),n("25BE"),n("BsWD"),n("PYwp");var s=n("uFwe"),u=n("KQm4"),l=n("s4An"),c=n("2WcH");function h(e,t,n){return(h=Object(c.a)()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Object(l.a)(i,n.prototype),i}).apply(null,arguments)}var f=n("vuIU"),d=n("1OyB"),p=n("Ji7U"),v=n("LK+K");function m(e){var t="function"==typeof Map?new Map:void 0;return(m=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,Object(i.a)(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Object(l.a)(n,e)})(e)}var g=n("quSY"),y=n("XNiG"),b=n("HDdC"),_=n("z+Ro"),x=n("bHdf"),w=n("yCtX"),T=n("EQ5u"),S=n("x+ZX");function M(){return new y.a}function O(e){for(var t in e)if(e[t]===O)return t;throw Error("Could not find renamed property on target object.")}function E(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(E).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function k(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var A=O({__forward_ref__:O});function C(e){return e.__forward_ref__=C,e.toString=function(){return E(this())},e}function P(e){return"function"==typeof(t=e)&&t.hasOwnProperty(A)&&t.__forward_ref__===C?e():e;var t}var j=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e,r){var i;return Object(d.a)(this,n),(i=t.call(this,function(e,t){var n=e?"NG0".concat(e,": "):"";return"".concat(n).concat(t)}(e,r))).code=e,i}return n}(m(Error));function L(e){return"string"==typeof e?e:null==e?"":String(e)}function R(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():L(e)}function I(e,t){var n=t?" in ".concat(t):"";throw new j("201","No provider for ".concat(R(e)," found").concat(n))}function D(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat(e)+(null==r?"":" [Expected=> ".concat(n," ").concat(r," ").concat(t," <=Actual]")))}function N(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function H(e){return{providers:e.providers||[],imports:e.imports||[]}}function G(e){return B(e,z)||B(e,W)}function B(e,t){return e.hasOwnProperty(t)?e[t]:null}function U(e){return e&&(e.hasOwnProperty(V)||e.hasOwnProperty(X))?e[V]:null}var F,z=O({"\u0275prov":O}),V=O({"\u0275inj":O}),W=O({ngInjectableDef:O}),X=O({ngInjectorDef:O}),q=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function K(){return F}function Y(e){var t=F;return F=e,t}function J(e,t,n){var r=G(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&q.Optional?null:void 0!==t?t:void I(E(e),"Injector")}function Z(e){return{toString:e}.toString()}var Q=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),$=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({}),ee="undefined"!=typeof globalThis&&globalThis,te="undefined"!=typeof window&&window,ne="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,re="undefined"!=typeof global&&global,ie=ee||re||te||ne,ae={},oe=[],se=[],ue=O({"\u0275cmp":O}),le=O({"\u0275dir":O}),ce=O({"\u0275pipe":O}),he=O({"\u0275mod":O}),fe=O({"\u0275loc":O}),de=O({"\u0275fac":O}),pe=O({__NG_ELEMENT_ID__:O}),ve=0;function me(e){return Z(function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===Q.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||se,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||$.Emulated,id:"c",styles:e.styles||se,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,a=e.pipes;return n.id+=ve++,n.inputs=we(e.inputs,t),n.outputs=we(e.outputs),i&&i.forEach(function(e){return e(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(ge)}:null,n.pipeDefs=a?function(){return("function"==typeof a?a():a).map(ye)}:null,n})}function ge(e){return Me(e)||function(e){return e[le]||null}(e)}function ye(e){return function(e){return e[ce]||null}(e)}var be={};function _e(e){var t={type:e.type,bootstrap:e.bootstrap||se,declarations:e.declarations||se,imports:e.imports||se,exports:e.exports||se,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&Z(function(){be[e.id]=e.type}),t}function xe(e,t){return Z(function(){var n=Oe(e,!0);n.declarations=t.declarations||se,n.imports=t.imports||se,n.exports=t.exports||se})}function we(e,t){if(null==e)return ae;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],a=i;Array.isArray(i)&&(a=i[1],i=i[0]),n[i]=r,t&&(t[i]=a)}return n}var Te=me;function Se(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Me(e){return e[ue]||null}function Oe(e,t){var n=e[he]||null;if(!n&&!0===t)throw new Error("Type ".concat(E(e)," does not have '\u0275mod' property."));return n}var Ee=20,ke=10;function Ae(e){return Array.isArray(e)&&"object"==typeof e[1]}function Ce(e){return Array.isArray(e)&&!0===e[1]}function Pe(e){return 0!=(8&e.flags)}function je(e){return 2==(2&e.flags)}function Le(e){return 1==(1&e.flags)}function Re(e){return null!==e.template}function Ie(e,t){return e.hasOwnProperty(de)?e[de]:null}var De=function(){function e(t,n,r){Object(d.a)(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return Object(f.a)(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Ne(){return He}function He(e){return e.type.prototype.ngOnChanges&&(e.setInput=Be),Ge}function Ge(){var e=Ue(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===ae)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Be(e,t,n,r){var i=Ue(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:ae,current:null}),a=i.current||(i.current={}),o=i.previous,s=this.declaredInputs[n],u=o[s];a[s]=new De(u&&u.currentValue,t,o===ae),e[r]=t}function Ue(e){return e.__ngSimpleChanges__||null}Ne.ngInherit=!0;var Fe=void 0;function ze(e){Fe=e}function Ve(){return void 0!==Fe?Fe:"undefined"!=typeof document?document:void 0}function We(e){return!!e.listen}var Xe={createRenderer:function(e,t){return Ve()}};function qe(e){for(;Array.isArray(e);)e=e[0];return e}function Ke(e,t){return qe(t[e])}function Ye(e,t){return qe(t[e.index])}function Je(e,t){return e.data[t]}function Ze(e,t){var n=t[e];return Ae(n)?n:n[0]}function Qe(e){var t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function $e(e){return 4==(4&e[2])}function et(e){return 128==(128&e[2])}function tt(e,t){return null==t?null:e[t]}function nt(e){e[18]=0}function rt(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var it={lFrame:kt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function at(){return it.bindingsEnabled}function ot(){return it.lFrame.lView}function st(){return it.lFrame.tView}function ut(e){it.lFrame.contextLView=e}function lt(){for(var e=ct();null!==e&&64===e.type;)e=e.parent;return e}function ct(){return it.lFrame.currentTNode}function ht(){var e=it.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function ft(e,t){var n=it.lFrame;n.currentTNode=e,n.isParent=t}function dt(){return it.lFrame.isParent}function pt(){it.lFrame.isParent=!1}function vt(){return it.isInCheckNoChangesMode}function mt(e){it.isInCheckNoChangesMode=e}function gt(){var e=it.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function yt(){return it.lFrame.bindingIndex++}function bt(e){var t=it.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function _t(e){it.lFrame.inI18n=e}function xt(e){it.lFrame.currentDirectiveIndex=e}function wt(){return it.lFrame.currentQueryIndex}function Tt(e){it.lFrame.currentQueryIndex=e}function St(e){var t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Mt(e,t,n){if(n&q.SkipSelf){for(var r=t,i=e;!(null!==(r=r.parent)||n&q.Host||null===(r=St(i))||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}var a=it.lFrame=Et();return a.currentTNode=t,a.lView=e,!0}function Ot(e){var t=Et(),n=e[1];it.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Et(){var e=it.lFrame,t=null===e?null:e.child;return null===t?kt(e):t}function kt(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function At(){var e=it.lFrame;return it.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ct=At;function Pt(){var e=At();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function jt(e){return(it.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,it.lFrame.contextLView))[8]}function Lt(){return it.lFrame.selectedIndex}function Rt(e){it.lFrame.selectedIndex=e}function It(){var e=it.lFrame;return Je(e.tView,e.selectedIndex)}function Dt(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n].type.prototype,a=i.ngAfterContentInit,o=i.ngAfterContentChecked,s=i.ngAfterViewInit,u=i.ngAfterViewChecked,l=i.ngOnDestroy;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),o&&((e.contentHooks||(e.contentHooks=[])).push(n,o),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,o)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),u&&((e.viewHooks||(e.viewHooks=[])).push(n,u),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,u)),null!=l&&(e.destroyHooks||(e.destroyHooks=[])).push(n,l)}}function Nt(e,t,n){Bt(e,t,3,n)}function Ht(e,t,n,r){(3&e[2])===n&&Bt(e,t,n,r)}function Gt(e,t){var n=e[2];(3&n)===t&&(n&=2047,e[2]=n+=1)}function Bt(e,t,n,r){for(var i=null!=r?r:-1,a=t.length-1,o=0,s=void 0!==r?65535&e[18]:0;s<a;s++)if("number"==typeof t[s+1]){if(o=t[s],null!=r&&o>=r)break}else t[s]<0&&(e[18]+=65536),(o<i||-1==i)&&(Ut(e,n,t,s),e[18]=(4294901760&e[18])+s+2),s++}function Ut(e,t,n,r){var i=n[r]<0,a=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{a.call(o)}finally{}}}else try{a.call(o)}finally{}}var Ft=-1,zt=function e(t,n,r){Object(d.a)(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Vt(e,t,n){for(var r=We(e),i=0;i<n.length;){var a=n[i];if("number"==typeof a){if(0!==a)break;i++;var o=n[i++],s=n[i++],u=n[i++];r?e.setAttribute(t,s,u,o):t.setAttributeNS(o,s,u)}else{var l=a,c=n[++i];Xt(l)?r&&e.setProperty(t,l,c):r?e.setAttribute(t,l,c):t.setAttribute(l,c),i++}}return i}function Wt(e){return 3===e||4===e||6===e}function Xt(e){return 64===e.charCodeAt(0)}function qt(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||Kt(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function Kt(e,t,n,r,i){var a=0,o=e.length;if(-1===t)o=-1;else for(;a<e.length;){var s=e[a++];if("number"==typeof s){if(s===t){o=-1;break}if(s>t){o=a-1;break}}}for(;a<e.length;){var u=e[a];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[a+1]=i));if(r===e[a+1])return void(e[a+2]=i)}a++,null!==r&&a++,null!==i&&a++}-1!==o&&(e.splice(o,0,t),a=o+1),e.splice(a++,0,n),null!==r&&e.splice(a++,0,r),null!==i&&e.splice(a++,0,i)}function Yt(e){return e!==Ft}function Jt(e){return 32767&e}function Zt(e,t){for(var n=e>>16,r=t;n>0;)r=r[15],n--;return r}var Qt=!0;function $t(e){var t=Qt;return Qt=e,t}var en=0;function tn(e,t){var n=rn(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,nn(r.data,e),nn(t,null),nn(r.blueprint,null));var i=an(e,t),a=e.injectorIndex;if(Yt(i))for(var o=Jt(i),s=Zt(i,t),u=s[1].data,l=0;l<8;l++)t[a+l]=s[o+l]|u[o+l];return t[a+8]=i,a}function nn(e,t){e.push(0,0,0,0,0,0,0,0,t)}function rn(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function an(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,r=null,i=t;null!==i;){var a=i[1],o=a.type;if(null===(r=2===o?a.declTNode:1===o?i[6]:null))return Ft;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ft}function on(e,t,n){!function(e,t,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(pe)&&(r=n[pe]),null==r&&(r=n[pe]=en++);var i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function sn(e,t,n){if(n&q.Optional)return e;I(t,"NodeInjector")}function un(e,t,n,r){if(n&q.Optional&&void 0===r&&(r=null),0==(n&(q.Self|q.Host))){var i=e[9],a=Y(void 0);try{return i?i.get(t,r,n&q.Optional):J(t,r,n&q.Optional)}finally{Y(a)}}return sn(r,t,n)}function ln(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:q.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var a=vn(n);if("function"==typeof a){if(!Mt(t,e,r))return r&q.Host?sn(i,n,r):un(t,n,r,i);try{var o=a();if(null!=o||r&q.Optional)return o;I(n)}finally{Ct()}}else if("number"==typeof a){var s=null,u=rn(e,t),l=Ft,c=r&q.Host?t[16][6]:null;for((-1===u||r&q.SkipSelf)&&((l=-1===u?an(e,t):t[u+8])!==Ft&&gn(r,!1)?(s=t[1],u=Jt(l),t=Zt(l,t)):u=-1);-1!==u;){var h=t[1];if(mn(a,u,h.data)){var f=fn(u,t,n,s,r,c);if(f!==cn)return f}(l=t[u+8])!==Ft&&gn(r,t[1].data[u+8]===c)&&mn(a,u,t)?(s=h,u=Jt(l),t=Zt(l,t)):u=-1}}}return un(t,n,r,i)}var cn={};function hn(){return new yn(lt(),ot())}function fn(e,t,n,r,i,a){var o=t[1],s=o.data[e+8],u=dn(s,o,n,null==r?je(s)&&Qt:r!=o&&0!=(3&s.type),i&q.Host&&a===s);return null!==u?pn(t,o,u,s):cn}function dn(e,t,n,r,i){for(var a=e.providerIndexes,o=t.data,s=1048575&a,u=e.directiveStart,l=a>>20,c=i?s+l:e.directiveEnd,h=r?s:s+l;h<c;h++){var f=o[h];if(h<u&&n===f||h>=u&&f.type===n)return h}if(i){var d=o[u];if(d&&Re(d)&&d.type===n)return u}return null}function pn(e,t,n,r){var i=e[n],a=t.data;if(i instanceof zt){var o=i;o.resolving&&function(e,t){throw new j("200","Circular dependency in DI detected for ".concat(e).concat(""))}(R(a[n]));var s=$t(o.canSeeViewProviders);o.resolving=!0;var u=o.injectImpl?Y(o.injectImpl):null;Mt(e,r,q.Default);try{i=e[n]=o.factory(void 0,a,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.type.prototype,i=r.ngOnInit,a=r.ngDoCheck;if(r.ngOnChanges){var o=He(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a))}(n,a[n],t)}finally{null!==u&&Y(u),$t(s),o.resolving=!1,Ct()}}return i}function vn(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(pe)?e[pe]:void 0;return"number"==typeof t?t>=0?255&t:hn:t}function mn(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function gn(e,t){return!(e&q.Self||e&q.Host&&t)}var yn=function(){function e(t,n){Object(d.a)(this,e),this._tNode=t,this._lView=n}return Object(f.a)(e,[{key:"get",value:function(e,t){return ln(this._tNode,this._lView,e,void 0,t)}}]),e}();function bn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var a=n[i];if(Wt(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(a===t)return n[i+1];i+=2}}return null}(lt(),e)}var _n="__parameters__";function xn(e,t,n){return Z(function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var a=h(i,t);return o.annotation=a,o;function o(e,t,n){for(var r=e.hasOwnProperty(_n)?e[_n]:Object.defineProperty(e,_n,{value:[]})[_n];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var wn=function(){function e(t,n){Object(d.a)(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=N({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return Object(f.a)(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),Tn=new wn("AnalyzeForEntryComponents"),Sn=Function;function Mn(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),Mn(r,t)):t!==e&&t.push(r)}return t}function On(e,t){e.forEach(function(e){return Array.isArray(e)?On(e,t):t(e)})}function En(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function kn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function An(e,t){var n=Cn(e,t);if(n>=0)return e[1|n]}function Cn(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var a=r+(i-r>>1),o=e[a<<1];if(t===o)return a<<1;o>t?i=a:r=a+1}return~(i<<1)}(e,t)}var Pn={},jn=/\n/gm,Ln="__source",Rn=O({provide:String,useValue:O}),In=void 0;function Dn(e){var t=In;return In=e,t}function Nn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q.Default;if(void 0===In)throw new Error("inject() must be called from an injection context");return null===In?J(e,void 0,t):In.get(e,t&q.Optional?null:void 0,t)}function Hn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q.Default;return(K()||Nn)(P(e),t)}function Gn(e){for(var t=[],n=0;n<e.length;n++){var r=P(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,a=q.Default,o=0;o<r.length;o++){var s=r[o],u=s.__NG_DI_FLAG__;"number"==typeof u?-1===u?i=s.token:a|=u:i=s}t.push(Hn(i,a))}else t.push(Hn(r))}return t}function Bn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}function Un(e,t,n,r){var i=e.ngTempTokenPath;throw t[Ln]&&i.unshift(t[Ln]),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=E(t);if(Array.isArray(t))i=t.map(E).join(" -> ");else if("object"==typeof t){var a=[];for(var o in t)if(t.hasOwnProperty(o)){var s=t[o];a.push(o+":"+("string"==typeof s?JSON.stringify(s):E(s)))}i="{".concat(a.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(jn,"\n  "))}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}var Fn,zn,Vn=Bn(xn("Inject",function(e){return{token:e}}),-1),Wn=Bn(xn("Optional"),8),Xn=Bn(xn("SkipSelf"),4);function qn(e){var t;return(null===(t=function(){if(void 0===Fn&&(Fn=null,ie.trustedTypes))try{Fn=ie.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(t){}return Fn}())||void 0===t?void 0:t.createHTML(e))||e}function Kn(e){var t;return(null===(t=function(){if(void 0===zn&&(zn=null,ie.trustedTypes))try{zn=ie.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(t){}return zn}())||void 0===t?void 0:t.createHTML(e))||e}var Yn=function(){function e(t){Object(d.a)(this,e),this.changingThisBreaksApplicationSecurity=t}return Object(f.a)(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see https://g.co/ng/security#xss)"}}]),e}(),Jn=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Yn),Zn=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Yn),Qn=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Yn),$n=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Yn),er=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Yn);function tr(e){return e instanceof Yn?e.changingThisBreaksApplicationSecurity:e}function nr(e,t){var n=rr(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===t}function rr(e){return e instanceof Yn&&e.getTypeName()||null}function ir(e){return new Jn(e)}function ar(e){return new Zn(e)}function or(e){return new Qn(e)}function sr(e){return new $n(e)}function ur(e){return new er(e)}function lr(e){var t=new hr(e);return function(){try{return!!(new window.DOMParser).parseFromString(qn(""),"text/html")}catch(e){return!1}}()?new cr(t):t}var cr=function(){function e(t){Object(d.a)(this,e),this.inertDocumentHelper=t}return Object(f.a)(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(qn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(n){return null}}}]),e}(),hr=function(){function e(t){if(Object(d.a)(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return Object(f.a)(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=qn(e),t;var n=this.inertDocument.createElement("body");return n.innerHTML=qn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),fr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,dr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function pr(e){return(e=String(e)).match(fr)||e.match(dr)?e:"unsafe:"+e}function vr(e){return(e=String(e)).split(",").map(function(e){return pr(e.trim())}).join(", ")}function mr(e){var t,n={},r=Object(s.a)(e.split(","));try{for(r.s();!(t=r.n()).done;)n[t.value]=!0}catch(i){r.e(i)}finally{r.f()}return n}function gr(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)o.hasOwnProperty(s)&&(e[s]=!0)}return e}var yr,br=mr("area,br,col,hr,img,wbr"),_r=mr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xr=mr("rp,rt"),wr=gr(xr,_r),Tr=gr(br,gr(_r,mr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gr(xr,mr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wr),Sr=mr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Mr=mr("srcset"),Or=gr(Sr,Mr,mr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),mr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Er=mr("script,style,template"),kr=function(){function e(){Object(d.a)(this,e),this.sanitizedSomething=!1,this.buf=[]}return Object(f.a)(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!Tr.hasOwnProperty(t))return this.sanitizedSomething=!0,!Er.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n=e.attributes,r=0;r<n.length;r++){var i=n.item(r),a=i.name,o=a.toLowerCase();if(Or.hasOwnProperty(o)){var s=i.value;Sr[o]&&(s=pr(s)),Mr[o]&&(s=vr(s)),this.buf.push(" ",a,'="',Pr(s),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();Tr.hasOwnProperty(t)&&!br.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(Pr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),Ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Cr=/([^\#-~ |!])/g;function Pr(e){return e.replace(/&/g,"&amp;").replace(Ar,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Cr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function jr(e,t){var n=null;try{yr=yr||lr(e);var r=t?String(t):"";n=yr.getInertBodyElement(r);var i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=n.innerHTML,n=yr.getInertBodyElement(r)}while(r!==a);return qn((new kr).sanitizeChildren(Lr(n)||n))}finally{if(n)for(var o=Lr(n)||n;o.firstChild;)o.removeChild(o.firstChild)}}function Lr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Rr=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({});function Ir(e){var t=Nr();return t?Kn(t.sanitize(Rr.HTML,e)||""):nr(e,"HTML")?Kn(tr(e)):jr(Ve(),L(e))}function Dr(e){var t=Nr();return t?t.sanitize(Rr.URL,e)||"":nr(e,"URL")?tr(e):pr(L(e))}function Nr(){var e=ot();return e&&e[12]}function Hr(e){return e.ngDebugContext}function Gr(e){return e.ngOriginalError}function Br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Ur=function(){function e(){Object(d.a)(this,e),this._console=console}return Object(f.a)(e,[{key:"handleError",value:function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e.ngErrorLogger||Br}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}},{key:"_findContext",value:function(e){return e?Hr(e)?Hr(e):this._findContext(Gr(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=Gr(e);t&&Gr(t);)t=Gr(t);return t}}]),e}();function Fr(e,t){e.__ngContext__=t}var zr=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(ie)}();function Vr(e){return e instanceof Function?e():e}var Wr,Xr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function qr(e,t){return Wr(e,t)}function Kr(e){var t=e[3];return Ce(t)?t[3]:t}function Yr(e){return Zr(e[13])}function Jr(e){return Zr(e[4])}function Zr(e){for(;null!==e&&!Ce(e);)e=e[4];return e}function Qr(e,t,n,r,i){if(null!=r){var a,o=!1;Ce(r)?a=r:Ae(r)&&(o=!0,r=r[0]);var s=qe(r);0===e&&null!==n?null==i?si(t,n,s):oi(t,n,s,i||null,!0):1===e&&null!==n?oi(t,n,s,i||null,!0):2===e?function(e,t,n){var r=li(e,t);r&&function(e,t,n,r){We(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,s,o):3===e&&t.destroyNode(s),null!=a&&function(e,t,n,r,i){var a=n[7];a!==qe(n)&&Qr(t,e,r,a,i);for(var o=ke;o<n.length;o++){var s=n[o];bi(s[1],s,e,t,r,a)}}(t,e,a,n,i)}}function $r(e,t){return We(e)?e.createText(t):e.createTextNode(t)}function ei(e,t,n){return We(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function ti(e,t){var n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,rt(i,-1)),n.splice(r,1)}function ni(e,t){if(!(e.length<=ke)){var n,r=ke+t,i=e[r];if(i){var a=i[17];null!==a&&a!==e&&ti(a,i),t>0&&(e[r-1][4]=i[4]);var o=kn(e,ke+t);bi(i[1],n=i,n[11],2,null,null),n[0]=null,n[6]=null;var s=o[19];null!==s&&s.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}return i}}function ri(e,t){if(!(256&t[2])){var n=t[11];We(n)&&n.destroyNode&&bi(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return ii(e[1],e);for(;t;){var n=null;if(Ae(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)Ae(t)&&ii(t[1],t),t=t[3];null===t&&(t=e),Ae(t)&&ii(t[1],t),n=t&&t[4]}t=n}}(t)}}function ii(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof zt)){var a=n[r+1];if(Array.isArray(a))for(var o=0;o<a.length;o+=2){var s=i[a[o]],u=a[o+1];try{u.call(s)}finally{}}else try{a.call(i)}finally{}}}}(e,t),function(e,t){var n=e.cleanup,r=t[7],i=-1;if(null!==n)for(var a=0;a<n.length-1;a+=2)if("string"==typeof n[a]){var o=n[a+1],s="function"==typeof o?o(t):qe(t[o]),u=r[i=n[a+2]],l=n[a+3];"boolean"==typeof l?s.removeEventListener(n[a],u,l):l>=0?r[i=l]():r[i=-l].unsubscribe(),a+=2}else{var c=r[i=n[a+1]];n[a].call(c)}if(null!==r){for(var h=i+1;h<r.length;h++)(0,r[h])();t[7]=null}}(e,t),1===t[1].type&&We(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&Ce(t[3])){n!==t[3]&&ti(n,t);var r=t[19];null!==r&&r.detachView(e)}}}function ai(e,t,n){for(var r=t;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){var i=e.data[r.directiveStart].encapsulation;if(i===$.None||i===$.Emulated)return null}return Ye(r,n)}function oi(e,t,n,r,i){We(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function si(e,t,n){We(e)?e.appendChild(t,n):t.appendChild(n)}function ui(e,t,n,r,i){null!==r?oi(e,t,n,r,i):si(e,t,n)}function li(e,t){return We(e)?e.parentNode(t):t.parentNode}function ci(e,t,n){return 40&e.type?Ye(e,n):null}var hi,fi=ci;function di(e,t){fi=e,hi=t}function pi(e,t,n,r){var i=function(e,t,n){return ai(e,t.parent,n)}(e,r,t),a=t[11],o=function(e,t,n){return fi(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(var s=0;s<n.length;s++)ui(a,i,n[s],o,!1);else ui(a,i,n,o,!1);void 0!==hi&&hi(a,r,t,n,i)}function vi(e,t){if(null!==t){var n=t.type;if(3&n)return Ye(t,e);if(4&n)return gi(-1,e[t.index]);if(8&n){var r=t.child;if(null!==r)return vi(e,r);var i=e[t.index];return Ce(i)?gi(-1,i):qe(i)}if(32&n)return qr(t,e)()||qe(e[t.index]);var a=mi(e,t);return null!==a?Array.isArray(a)?a[0]:vi(Kr(e[16]),a):vi(e,t.next)}return null}function mi(e,t){return null!==t?e[16][6].projection[t.projection]:null}function gi(e,t){var n=ke+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return vi(r,i)}return t[7]}function yi(e,t,n,r,i,a,o){for(;null!=n;){var s=r[n.index],u=n.type;if(o&&0===t&&(s&&Fr(qe(s),r),n.flags|=4),64!=(64&n.flags))if(8&u)yi(e,t,n.child,r,i,a,!1),Qr(t,e,i,s,a);else if(32&u){for(var l=qr(n,r),c=void 0;c=l();)Qr(t,e,i,c,a);Qr(t,e,i,s,a)}else 16&u?_i(e,t,r,n,i,a):Qr(t,e,i,s,a);n=o?n.projectionNext:n.next}}function bi(e,t,n,r,i,a){yi(n,r,e.firstChild,t,i,a,!1)}function _i(e,t,n,r,i,a){var o=n[16],s=o[6].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Qr(t,e,i,s[u],a);else yi(e,t,s,o[3],i,a,!0)}function xi(e,t,n){We(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function wi(e,t,n){We(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Ti(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var a=t.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}n=i+1}}var Si="ng-template";function Mi(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==Ti((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Oi(e){return 4===e.type&&e.value!==Si}function Ei(e,t,n){return t===(4!==e.type||n?e.value:Si)}function ki(e,t,n){for(var r=4,i=e.attrs||[],a=function(e){for(var t=0;t<e.length;t++)if(Wt(e[t]))return t;return e.length}(i),o=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!Ei(e,u,n)||""===u&&1===t.length){if(Ai(r))return!1;o=!0}}else{var l=8&r?u:t[++s];if(8&r&&null!==e.attrs){if(!Mi(e.attrs,l,n)){if(Ai(r))return!1;o=!0}continue}var c=Ci(8&r?"class":u,i,Oi(e),n);if(-1===c){if(Ai(r))return!1;o=!0;continue}if(""!==l){var h;h=c>a?"":i[c+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Ti(f,l,0)||2&r&&l!==h){if(Ai(r))return!1;o=!0}}}}else{if(!o&&!Ai(r)&&!Ai(u))return!1;if(o&&Ai(u))continue;o=!1,r=u|1&r}}return Ai(r)||o}function Ai(e){return 0==(1&e)}function Ci(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var a=!1;i<t.length;){var o=t[i];if(o===e)return i;if(3===o||6===o)a=!0;else{if(1===o||2===o){for(var s=t[++i];"string"==typeof s;)s=t[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=a?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Pi(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(ki(e,t[r],n))return!0;return!1}function ji(e,t){return e?":not("+t.trim()+")":t}function Li(e){for(var t=e[0],n=1,r=2,i="",a=!1;n<e.length;){var o=e[n];if("string"==typeof o)if(2&r){var s=e[++n];i+="["+o+(s.length>0?'="'+s+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||Ai(o)||(t+=ji(a,i),i=""),r=o,a=a||!Ai(r);n++}return""!==i&&(t+=ji(a,i)),t}var Ri={};function Ii(e){Di(st(),ot(),Lt()+e,vt())}function Di(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&Nt(t,i,n)}else{var a=e.preOrderHooks;null!==a&&Ht(t,a,0,n)}Rt(n)}function Ni(e,t){return e<<17|t<<2}function Hi(e){return e>>17&32767}function Gi(e){return 2|e}function Bi(e){return(131068&e)>>2}function Ui(e,t){return-131069&e|t<<2}function Fi(e){return 1|e}function zi(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r+1];if(-1!==i){var a=e.data[i];Tt(n[r]),a.contentQueries(2,t[i],i)}}}function Vi(e,t,n,r,i,a,o,s,u,l){var c=t.blueprint.slice();return c[0]=i,c[2]=140|r,nt(c),c[3]=c[15]=e,c[8]=n,c[10]=o||e&&e[10],c[11]=s||e&&e[11],c[12]=u||e&&e[12]||null,c[9]=l||e&&e[9]||null,c[6]=a,c[16]=2==t.type?e[16]:c,c}function Wi(e,t,n,r,i){var a=e.data[t];if(null===a)a=Xi(e,t,n,r,i),it.lFrame.inI18n&&(a.flags|=64);else if(64&a.type){a.type=n,a.value=r,a.attrs=i;var o=ht();a.injectorIndex=null===o?-1:o.injectorIndex}return ft(a,!0),a}function Xi(e,t,n,r,i){var a=ct(),o=dt(),s=e.data[t]=function(e,t,n,r,i,a){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?a:a&&a.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=s),null!==a&&(o?null==a.child&&null!==s.parent&&(a.child=s):null===a.next&&(a.next=s)),s}function qi(e,t,n,r){if(0===n)return-1;for(var i=t.length,a=0;a<n;a++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Ki(e,t,n){Ot(t);try{var r=e.viewQuery;null!==r&&Sa(1,r,n);var i=e.template;null!==i&&Zi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&zi(e,t),e.staticViewQueries&&Sa(2,e.viewQuery,n);var a=e.components;null!==a&&function(e,t){for(var n=0;n<t.length;n++)ba(e,t[n])}(t,a)}catch(o){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),o}finally{t[2]&=-5,Pt()}}function Yi(e,t,n,r){var i=t[2];if(256!=(256&i)){Ot(t);var a=vt();try{nt(t),it.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&Zi(e,t,n,2,r);var o=3==(3&i);if(!a)if(o){var s=e.preOrderCheckHooks;null!==s&&Nt(t,s,null)}else{var u=e.preOrderHooks;null!==u&&Ht(t,u,0,null),Gt(t,0)}if(function(e){for(var t=Yr(e);null!==t;t=Jr(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r];0==(1024&i[2])&&rt(i[3],1),i[2]|=1024}}(t),function(e){for(var t=Yr(e);null!==t;t=Jr(t))for(var n=ke;n<t.length;n++){var r=t[n],i=r[1];et(r)&&Yi(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&zi(e,t),!a)if(o){var l=e.contentCheckHooks;null!==l&&Nt(t,l)}else{var c=e.contentHooks;null!==c&&Ht(t,c,1),Gt(t,1)}!function(e,t){var n,r,i=e.hostBindingOpCodes;if(null!==i)try{for(var a=0;a<i.length;a++){var o=i[a];if(o<0)Rt(~o);else{var s=o,u=i[++a],l=i[++a];n=s,r=void 0,(r=it.lFrame).bindingIndex=r.bindingRootIndex=u,xt(n),l(2,t[s])}}}finally{Rt(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)ga(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&Sa(2,f,r),!a)if(o){var d=e.viewCheckHooks;null!==d&&Nt(t,d)}else{var p=e.viewHooks;null!==p&&Ht(t,p,2),Gt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),a||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,rt(t[3],-1))}finally{Pt()}}}function Ji(e,t,n,r){var i=t[10],a=!vt(),o=$e(t);try{a&&!o&&i.begin&&i.begin(),o&&Ki(e,t,r),Yi(e,t,n,r)}finally{a&&!o&&i.end&&i.end()}}function Zi(e,t,n,r,i){var a=Lt(),o=2&r;try{Rt(-1),o&&t.length>Ee&&Di(e,t,Ee,vt()),n(r,i)}finally{Rt(a)}}function Qi(e,t,n){if(Pe(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var a=e.data[i];a.contentQueries&&a.contentQueries(1,n[i],i)}}function $i(e,t,n){at()&&(function(e,t,n,r){var i=n.directiveStart,a=n.directiveEnd;e.firstCreatePass||tn(n,t),Fr(r,t);for(var o=n.initialInputs,s=i;s<a;s++){var u=e.data[s],l=Re(u);l&&da(t,n,u);var c=pn(t,e,s,n);Fr(c,t),null!==o&&pa(0,s-i,c,u,0,o),l&&(Ze(n.index,t)[8]=c)}}(e,t,n,Ye(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,a=n.index,o=it.lFrame.currentDirectiveIndex;try{Rt(a);for(var s=r;s<i;s++){var u=e.data[s],l=t[s];xt(s),null===u.hostBindings&&0===u.hostVars&&null===u.hostAttrs||ua(u,l)}}finally{Rt(-1),xt(o)}}(e,t,n))}function ea(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ye,r=t.localNames;if(null!==r)for(var i=t.index+1,a=0;a<r.length;a+=2){var o=r[a+1],s=-1===o?n(t,e):e[o];e[i++]=s}}function ta(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=na(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function na(e,t,n,r,i,a,o,s,u,l){var c=Ee+r,h=c+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:Ri);return n}(c,h),d="function"==typeof l?l():l;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:s,declTNode:t,data:f.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function ra(e,t,n,r){var i=Oa(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Ea(e).push(r,i.length-1))}function ia(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function aa(e,t,n,r,i,a,o,s){var u,l,c=Ye(t,n),h=t.inputs;!s&&null!=h&&(u=h[r])?(Aa(e,n,u,r,i),je(t)&&function(e,t){var n=Ze(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(l=r)?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l,i=null!=o?o(i,t.value||"",r):i,We(a)?a.setProperty(c,r,i):Xt(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function oa(e,t,n,r){var i=!1;if(at()){var a=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var a=0;a<r.length;a++){var o=r[a];Pi(n,o.selectors,!1)&&(i||(i=[]),on(tn(n,t),e,o.type),Re(o)?(la(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==a){i=!0,ha(n,e.data.length,a.length);for(var s=0;s<a.length;s++){var u=a[s];u.providersResolver&&u.providersResolver(u)}for(var l=!1,c=!1,h=qi(e,t,a.length,null),f=0;f<a.length;f++){var d=a[f];n.mergedAttrs=qt(n.mergedAttrs,d.hostAttrs),fa(e,n,t,h,d),ca(h,d,o),null!==d.contentQueries&&(n.flags|=8),null===d.hostBindings&&null===d.hostAttrs&&0===d.hostVars||(n.flags|=128);var p=d.type.prototype;!l&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),l=!0),c||!p.ngOnChanges&&!p.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),c=!0),h++}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,a=[],o=null,s=null,u=t.directiveStart;u<n;u++){var l=r[u],c=l.inputs,h=null===i||Oi(t)?null:va(c,i);a.push(h),o=ia(c,u,o),s=ia(l.outputs,u,s)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=o,t.outputs=s}(e,n)}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var a=n[t[i+1]];if(null==a)throw new j("301","Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],a)}}(n,r,o)}return n.mergedAttrs=qt(n.mergedAttrs,n.attrs),i}function sa(e,t,n,r,i,a){var o=a.hostBindings;if(o){var s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);var u=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=u&&s.push(u),s.push(r,i,o)}}function ua(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function la(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function ca(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Re(t)&&(n[""]=e)}}function ha(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function fa(e,t,n,r,i){e.data[r]=i;var a=i.factory||(i.factory=Ie(i.type)),o=new zt(a,Re(i),null);e.blueprint[r]=o,n[r]=o,sa(e,t,0,r,qi(e,n,i.hostVars,Ri),i)}function da(e,t,n){var r=Ye(t,e),i=ta(n),a=e[10],o=_a(e,Vi(e,i,null,n.onPush?64:16,r,t,a,a.createRenderer(r,n),null,null));e[t.index]=o}function pa(e,t,n,r,i,a){var o=a[t];if(null!==o)for(var s=r.setInput,u=0;u<o.length;){var l=o[u++],c=o[u++],h=o[u++];null!==s?r.setInput(n,h,l,c):n[c]=h}}function va(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function ma(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function ga(e,t){var n=Ze(t,e);if(et(n)){var r=n[1];80&n[2]?Yi(r,n,r.template,n[8]):n[5]>0&&ya(n)}}function ya(e){for(var t=Yr(e);null!==t;t=Jr(t))for(var n=ke;n<t.length;n++){var r=t[n];if(1024&r[2]){var i=r[1];Yi(i,r,i.template,r[8])}else r[5]>0&&ya(r)}var a=e[1].components;if(null!==a)for(var o=0;o<a.length;o++){var s=Ze(a[o],e);et(s)&&s[5]>0&&ya(s)}}function ba(e,t){var n=Ze(t,e),r=n[1];!function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Ki(r,n,n[8])}function _a(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function xa(e){for(;e;){e[2]|=64;var t=Kr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function wa(e,t,n){var r=t[10];r.begin&&r.begin();try{Yi(e,t,e.template,n)}catch(i){throw ka(t,i),i}finally{r.end&&r.end()}}function Ta(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Qe(n),i=r[1];Ji(i,r,i.template,n)}}(e[8])}function Sa(e,t,n){Tt(0),t(e,n)}var Ma=function(){return Promise.resolve(null)}();function Oa(e){return e[7]||(e[7]=[])}function Ea(e){return e.cleanup||(e.cleanup=[])}function ka(e,t){var n=e[9],r=n?n.get(Ur,null):null;r&&r.handleError(t)}function Aa(e,t,n,r,i){for(var a=0;a<n.length;){var o=n[a++],s=n[a++],u=t[o],l=e.data[o];null!==l.setInput?l.setInput(u,i,r,s):u[s]=i}}function Ca(e,t,n){var r=Ke(t,e);!function(e,t,n){We(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function Pa(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,a=0;if(null!==t)for(var o=0;o<t.length;o++){var s=t[o];"number"==typeof s?a=s:1==a?i=k(i,s):2==a&&(r=k(r,s+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var ja=new wn("INJECTOR",-1),La=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn;if(t===Pn){var n=new Error("NullInjectorError: No provider for ".concat(E(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),Ra=new wn("Set Injector scope."),Ia={},Da={},Na=[],Ha=void 0;function Ga(){return void 0===Ha&&(Ha=new La),Ha}function Ba(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Ua(e,n,t||Ga(),r)}var Ua=function(){function e(t,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(d.a)(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];n&&On(n,function(e){return i.processProvider(e,t,n)}),On([t],function(e){return i.processInjectorType(e,[],o)}),this.records.set(ja,za(void 0,this));var s=this.records.get(Ra);this.scope=null!=s?s.value:null,this.source=a||("object"==typeof t?null:E(t))}return Object(f.a)(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pn,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q.Default;this.assertNotDestroyed();var r=Dn(this);try{if(!(n&q.SkipSelf)){var i=this.records.get(e);if(void 0===i){var a=Xa(e)&&G(e);i=a&&this.injectableDefInScope(a)?za(Fa(e),Ia):null,this.records.set(e,i)}if(null!=i)return this.hydrate(e,i)}var o=n&q.Self?Ga():this.parent;return o.get(e,t=n&q.Optional&&t===Pn?null:t)}catch(u){if("NullInjectorError"===u.name){var s=u.ngTempTokenPath=u.ngTempTokenPath||[];if(s.unshift(E(e)),r)throw u;return Un(u,e,"R3InjectorError",this.source)}throw u}finally{Dn(r)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(t){return e.get(t)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(t,n){return e.push(E(n))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=P(e)))return!1;var i=U(e),a=null==i&&e.ngModule||void 0,o=void 0===a?e:a,s=-1!==n.indexOf(o);if(void 0!==a&&(i=U(a)),null==i)return!1;if(null!=i.imports&&!s){var u;n.push(o);try{On(i.imports,function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))})}finally{}if(void 0!==u)for(var l=function(e){var t=u[e],n=t.ngModule,i=t.providers;On(i,function(e){return r.processProvider(e,n,i||Na)})},c=0;c<u.length;c++)l(c)}this.injectorDefTypes.add(o);var h=Ie(o)||function(){return new o};this.records.set(o,za(h,Ia));var f=i.providers;if(null!=f&&!s){var d=e;On(f,function(e){return r.processProvider(e,d,f)})}return void 0!==a&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r=Wa(e=P(e))?e:P(e&&e.provide),i=function(e,t,n){return Va(e)?za(void 0,e.useValue):za(function(e,t,n){var r,i=void 0;if(Wa(e)){var a=P(e);return Ie(a)||Fa(a)}if(Va(e))i=function(){return P(e.useValue)};else if((r=e)&&r.useFactory)i=function(){return e.useFactory.apply(e,Object(u.a)(Gn(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))i=function(){return Hn(P(e.useExisting))};else{var o=P(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ie(o)||Fa(o);i=function(){return h(o,Object(u.a)(Gn(e.deps)))}}return i}(e),Ia)}(e);if(Wa(e)||!0!==e.multi)this.records.get(r);else{var a=this.records.get(r);a||((a=za(void 0,Ia,!0)).factory=function(){return Gn(a.multi)},this.records.set(r,a)),r=e,a.multi.push(e)}this.records.set(r,i)}},{key:"hydrate",value:function(e,t){var n;return t.value===Ia&&(t.value=Da,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}},{key:"injectableDefInScope",value:function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||e.providedIn===this.scope:this.injectorDefTypes.has(e.providedIn))}}]),e}();function Fa(e){var t=G(e),n=null!==t?t.factory:Ie(e);if(null!==n)return n;if(e instanceof wn)throw new Error("Token ".concat(E(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=function(e,t){for(var n=[],r=0;r<e;r++)n.push("?");return n}(t);throw new Error("Can't resolve all parameters for ".concat(E(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[z]||e[W]);if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\n')+'This will become an error in a future version of Angular. Please add @Injectable() to the "'.concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function za(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Va(e){return null!==e&&"object"==typeof e&&Rn in e}function Wa(e){return"function"==typeof e}function Xa(e){return"function"==typeof e||"object"==typeof e&&e instanceof wn}var qa=function(e,t,n){return function(e){var t=Ba(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3?arguments[3]:void 0);return t._resolveInjectorDefTypes(),t}({name:n},t,e,n)},Ka=function(){var e=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?qa(e,t,""):qa(e.providers,e.parent,e.name||"")}}]),e}();return e.THROW_IF_NOT_FOUND=Pn,e.NULL=new La,e.\u0275prov=N({token:e,providedIn:"any",factory:function(){return Hn(ja)}}),e.__NG_ELEMENT_ID__=-1,e}();function Ya(e,t){Dt(Qe(e)[1],lt())}var Ja=null;function Za(){if(!Ja){var e=ie.Symbol;if(e&&e.iterator)Ja=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ja=r)}}return Ja}function Qa(e){return!!$a(e)&&(Array.isArray(e)||!(e instanceof Map)&&Za()in e)}function $a(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function eo(e,t,n){return e[t]=n}function to(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function no(e,t,n,r){var i=ot();return to(i,yt(),t)&&(st(),function(e,t,n,r,i,a){var o=Ye(e,t);!function(e,t,n,r,i,a,o){if(null==a)We(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{var s=null==o?L(a):o(a,r||"",i);We(e)?e.setAttribute(t,i,s,n):n?t.setAttributeNS(n,i,s):t.setAttribute(i,s)}}(t[11],o,a,e.value,n,r,i)}(It(),i,e,t,n,r)),no}function ro(e,t,n,r){return to(e,yt(),n)?t+L(n)+r:Ri}function io(e,t,n,r,i,a,o,s){var u=ot(),l=st(),c=e+Ee,h=l.firstCreatePass?function(e,t,n,r,i,a,o,s,u){var l=t.consts,c=Wi(t,e,4,o||null,tt(l,s));oa(t,n,c,tt(l,u)),Dt(t,c);var h=c.tViews=na(2,c,r,i,a,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l);return null!==t.queries&&(t.queries.template(t,c),h.queries=t.queries.embeddedTView(c)),c}(c,l,u,t,n,r,i,a,o):l.data[c];ft(h,!1);var f=u[11].createComment("");pi(l,u,f,h),Fr(f,u),_a(u,u[c]=ma(f,u,f,h)),Le(h)&&$i(l,u,h),null!=o&&ea(u,h,s)}function ao(e){return function(e,t){return e[t]}(it.lFrame.contextLView,Ee+e)}function oo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q.Default,n=ot();if(null===n)return Hn(e,t);var r=lt();return ln(r,n,P(e),t)}function so(e,t,n){var r=ot();return to(r,yt(),t)&&aa(st(),It(),r,e,t,r[11],n,!1),so}function uo(e,t,n,r,i){var a=i?"class":"style";Aa(e,n,t.inputs[a],a,r)}function lo(e,t,n,r){var i=ot(),a=st(),o=Ee+e,s=i[11],u=i[o]=ei(s,t,it.lFrame.currentNamespace),l=a.firstCreatePass?function(e,t,n,r,i,a,o){var s=t.consts,u=Wi(t,e,2,i,tt(s,a));return oa(t,n,u,tt(s,o)),null!==u.attrs&&Pa(u,u.attrs,!1),null!==u.mergedAttrs&&Pa(u,u.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,u),u}(o,a,i,0,t,n,r):a.data[o];ft(l,!0);var c=l.mergedAttrs;null!==c&&Vt(s,u,c);var h=l.classes;null!==h&&wi(s,u,h);var f=l.styles;null!==f&&xi(s,u,f),64!=(64&l.flags)&&pi(a,i,u,l),0===it.lFrame.elementDepthCount&&Fr(u,i),it.lFrame.elementDepthCount++,Le(l)&&($i(a,i,l),Qi(a,l,i)),null!==r&&ea(i,l)}function co(){var e=lt();dt()?pt():ft(e=e.parent,!1);var t=e;it.lFrame.elementDepthCount--;var n=st();n.firstCreatePass&&(Dt(n,e),Pe(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&uo(n,t,ot(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&uo(n,t,ot(),t.stylesWithoutHost,!1)}function ho(e,t,n,r){lo(e,t,n,r),co()}function fo(e,t,n){var r=ot(),i=st(),a=e+Ee,o=i.firstCreatePass?function(e,t,n,r,i){var a=t.consts,o=tt(a,r),s=Wi(t,e,8,"ng-container",o);return null!==o&&Pa(s,o,!0),oa(t,n,s,tt(a,i)),null!==t.queries&&t.queries.elementStart(t,s),s}(a,i,r,t,n):i.data[a];ft(o,!0);var s=r[a]=r[11].createComment("");pi(i,r,s,o),Fr(s,r),Le(o)&&($i(i,r,o),Qi(i,o,r)),null!=n&&ea(r,o)}function po(){var e=lt(),t=st();dt()?pt():ft(e=e.parent,!1),t.firstCreatePass&&(Dt(t,e),Pe(e)&&t.queries.elementEnd(e))}function vo(){return ot()}function mo(e){return!!e&&"function"==typeof e.then}function go(e){return!!e&&"function"==typeof e.subscribe}var yo=go;function bo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=ot(),a=st(),o=lt();return xo(a,i,i[11],o,e,t,n,r),bo}function _o(e,t,n,r){var i=e.cleanup;if(null!=i)for(var a=0;a<i.length-1;a+=2){var o=i[a];if(o===n&&i[a+1]===r){var s=t[7],u=i[a+2];return s.length>u?s[u]:null}"string"==typeof o&&(a+=2)}return null}function xo(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7?arguments[7]:void 0,u=Le(r),l=e.firstCreatePass,c=l&&Ea(e),h=Oa(t),f=!0;if(3&r.type){var d=Ye(r,t),p=s?s(d):ae,v=p.target||d,m=h.length,g=s?function(e){return s(qe(e[r.index])).target}:r.index;if(We(n)){var y=null;if(!s&&u&&(y=_o(e,t,i,r.index)),null!==y){var b=y.__ngLastListenerFn__||y;b.__ngNextListenerFn__=a,y.__ngLastListenerFn__=a,f=!1}else{a=To(r,t,0,a,!1);var _=n.listen(p.name||v,i,a);h.push(a,_),c&&c.push(i,g,m,m+1)}}else a=To(r,t,0,a,!0),v.addEventListener(i,a,o),h.push(a),c&&c.push(i,g,m,o)}else a=To(r,t,0,a,!1);var x,w=r.outputs;if(f&&null!==w&&(x=w[i])){var T=x.length;if(T)for(var S=0;S<T;S+=2){var M=x[S],O=x[S+1],E=t[M],k=E[O],A=k.subscribe(a),C=h.length;h.push(a,A),c&&c.push(i,r.index,C,-(C+1))}}}function wo(e,t,n,r){try{return!1!==n(r)}catch(i){return ka(e,i),!1}}function To(e,t,n,r,i){return function n(a){if(a===Function)return r;var o=2&e.flags?Ze(e.index,t):t;0==(32&t[2])&&xa(o);for(var s=wo(t,0,r,a),u=n.__ngNextListenerFn__;u;)s=wo(t,0,u,a)&&s,u=u.__ngNextListenerFn__;return i&&!1===s&&(a.preventDefault(),a.returnValue=!1),s}}function So(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return jt(e)}function Mo(e,t,n){return Oo(e,"",t,"",n),Mo}function Oo(e,t,n,r,i){var a=ot(),o=ro(a,t,n,r);return o!==Ri&&aa(st(),It(),a,e,o,a[11],i,!1),Oo}function Eo(e,t,n,r,i){for(var a=e[n+1],o=null===t,s=r?Hi(a):Bi(a),u=!1;0!==s&&(!1===u||o);){var l=e[s+1];ko(e[s],t)&&(u=!0,e[s+1]=r?Fi(l):Gi(l)),s=r?Hi(l):Bi(l)}u&&(e[n+1]=r?Gi(a):Fi(a))}function ko(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Cn(e,t)>=0}function Ao(e,t,n){return function(e,t,n,r){var i=ot(),a=st(),o=bt(2);a.firstUpdatePass&&function(e,t,n,r){var i=e.data;if(null===i[n+1]){var a=i[Lt()],o=function(e,t){return t>=e.expandoStartIndex}(e,n);(function(e,t){return 0!=(32&e.flags)})(a)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){var i=function(e){var t=it.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),a=t.residualStyles;if(null===i)0===t.styleBindings&&(n=Po(n=Co(null,e,t,n,r),t.attrs,r),a=null);else{var o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Co(i,e,t,n,r),null===a){var s=function(e,t,n){var r=t.styleBindings;if(0!==Bi(r))return e[Hi(r)]}(e,t);void 0!==s&&Array.isArray(s)&&function(e,t,n,r){e[Hi(t.styleBindings)]=r}(e,t,0,s=Po(s=Co(null,e,t,s[1],r),t.attrs,r))}else a=function(e,t,n){for(var r=void 0,i=t.directiveEnd,a=1+t.directiveStylingLast;a<i;a++)r=Po(r,e[a].hostAttrs,false);return Po(r,t.attrs,false)}(e,t)}return void 0!==a&&(t.residualStyles=a),n}(i,a,t,r),function(e,t,n,r,i,a){var o=t.styleBindings,s=Hi(o),u=Bi(o);e[r]=n;var l,c=!1;if(Array.isArray(n)?(null===(l=n[1])||Cn(n,l)>0)&&(c=!0):l=n,i)if(0!==u){var h=Hi(e[s+1]);e[r+1]=Ni(h,s),0!==h&&(e[h+1]=Ui(e[h+1],r)),e[s+1]=131071&e[s+1]|r<<17}else e[r+1]=Ni(s,0),0!==s&&(e[s+1]=Ui(e[s+1],r)),s=r;else e[r+1]=Ni(u,0),0===s?s=r:e[u+1]=Ui(e[u+1],r),u=r;c&&(e[r+1]=Gi(e[r+1])),Eo(e,l,r,!0),Eo(e,l,r,!1),function(e,t,n,r,i){var a=e.residualStyles;null!=a&&"string"==typeof t&&Cn(a,t)>=0&&(n[r+1]=Fi(n[r+1]))}(t,l,e,r),o=Ni(s,u),t.styleBindings=o}(i,a,t,n,o)}}(a,e,o,false),t!==Ri&&to(i,o,t)&&function(e,t,n,r,i,a,o,s){if(3&t.type){var u=e.data,l=u[s+1];Lo(1==(1&l)?jo(u,t,n,i,Bi(l),o):void 0)||(Lo(a)||2==(2&l)&&(a=jo(u,null,n,i,s,o)),function(e,t,n,r,i){var a=We(e),o=-1===r.indexOf("-")?void 0:Xr.DashCase;if(null==i)a?e.removeStyle(n,r,o):n.style.removeProperty(r);else{var s="string"==typeof i&&i.endsWith("!important");s&&(i=i.slice(0,-10),o|=Xr.Important),a?e.setStyle(n,r,i,o):n.style.setProperty(r,i,s?"important":"")}}(r,0,Ke(Lt(),n),i,a))}}(a,a.data[Lt()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=E(tr(e)))),e}(t,n),false,o)}(e,t,n),Ao}function Co(e,t,n,r,i){var a=null,o=n.directiveEnd,s=n.directiveStylingLast;for(-1===s?s=n.directiveStart:s++;s<o&&(r=Po(r,(a=t[s]).hostAttrs,i),a!==e);)s++;return null!==e&&(n.directiveStylingLast=s),r}function Po(e,t,n){var r,i,a,o,s=n?1:2,u=-1;if(null!==t)for(var l=0;l<t.length;l++){var c=t[l];"number"==typeof c?u=c:u===s&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),a=!!n||t[++l],o=void 0,(o=Cn(r=e,i=c))>=0?r[1|o]=a:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(r,o=~o,i,a))}return void 0===e?null:e}function jo(e,t,n,r,i,a){for(var o=null===t,s=void 0;i>0;){var u=e[i],l=Array.isArray(u),c=l?u[1]:u,h=null===c,f=n[i+1];f===Ri&&(f=h?oe:void 0);var d=h?An(f,r):c===r?f:void 0;if(l&&!Lo(d)&&(d=An(u,r)),Lo(d)&&(s=d,o))return s;var p=e[i+1];i=o?Hi(p):Bi(p)}if(null!==t){var v=a?t.residualClasses:t.residualStyles;null!=v&&(s=An(v,r))}return s}function Lo(e){return void 0!==e}function Ro(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=ot(),r=st(),i=e+Ee,a=r.firstCreatePass?Wi(r,i,1,t,null):r.data[i],o=n[i]=$r(n[11],t);pi(r,n,o,a),ft(a,!1)}function Io(e){return Do("",e,""),Io}function Do(e,t,n){var r=ot(),i=ro(r,e,t,n);return i!==Ri&&Ca(r,Lt(),i),Do}function No(e,t,n,r,i){var a=ot(),o=function(e,t,n,r,i,a){var o=function(e,t,n,r){var i=to(e,t,n);return to(e,t+1,r)||i}(e,it.lFrame.bindingIndex,n,i);return bt(2),o?t+L(n)+r+L(i)+a:Ri}(a,e,t,n,r,i);return o!==Ri&&Ca(a,Lt(),o),No}function Ho(e,t,n){var r=ot();return to(r,yt(),t)&&aa(st(),It(),r,e,t,r[11],n,!0),Ho}var Go=void 0,Bo=["en",[["a","p"],["AM","PM"],Go],[["AM","PM"],Go,Go],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Go,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Go,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Go,"{1} 'at' {0}",Go],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],Uo={};function Fo(e,t,n){"string"!=typeof t&&(n=t,t=e[qo.LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),Uo[t]=e,n&&(Uo[t][qo.ExtraData]=n)}function zo(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=Xo(t);if(n)return n;var r=t.split("-")[0];if(n=Xo(r))return n;if("en"===r)return Bo;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function Vo(e){return zo(e)[qo.CurrencyCode]||null}function Wo(e){return zo(e)[qo.PluralCase]}function Xo(e){return e in Uo||(Uo[e]=ie.ng&&ie.ng.common&&ie.ng.common.locales&&ie.ng.common.locales[e]),Uo[e]}var qo=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e}({}),Ko="en-US",Yo={marker:"element"},Jo={marker:"ICU"},Zo=function(e){return e[e.SHIFT=2]="SHIFT",e[e.APPEND_EAGERLY=1]="APPEND_EAGERLY",e[e.COMMENT=2]="COMMENT",e}({});function Qo(e){var t;null==(t=e)&&D("Expected localeId to be defined",t,null,"!="),"string"==typeof e&&e.toLowerCase().replace(/_/g,"-")}function $o(e,t,n){var r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?ci(e,0,n):qe(n[i])}function es(e,t,n,r,i){var a=t.insertBeforeIndex;if(Array.isArray(a)){var o=r,s=null;if(3&t.type||(s=o,o=i),null!==o&&0==(2&t.flags))for(var u=1;u<a.length;u++)oi(e,o,n[a[u]],s,!1)}}function ts(e,t){if(e.push(t),e.length>1)for(var n=e.length-2;n>=0;n--){var r=e[n];ns(r)||rs(r,t)&&null===(i=r.insertBeforeIndex,Array.isArray(i)?i[0]:i)&&is(r,t.index)}var i}function ns(e){return!(64&e.type)}function rs(e,t){return ns(t)||e.index>t.index}function is(e,t){var n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(di($o,es),e.insertBeforeIndex=t)}function as(e,t,n){var r=Xi(e,n,64,null,null);return ts(t,r),r}function os(e,t,n,r){for(var i=e[11],a=0;a<t.length;a++){var o=t[a++],s=t[a],u=(o&Zo.APPEND_EAGERLY)===Zo.APPEND_EAGERLY,l=o>>>Zo.SHIFT,c=e[l];null===c&&(c=e[l]=(o&Zo.COMMENT)===Zo.COMMENT?i.createComment(s):$r(i,s)),u&&null!==n&&oi(i,n,c,r,!1)}}var ss=/\ufffd(\d+):?\d*\ufffd/gi,us=/\ufffd(\d+)\ufffd/,ls=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,cs="\ufffd",hs=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,fs=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,ds=/\uE500/g;function ps(e,t,n,r,i,a){for(var o=ht(),s=[],u=[],l=[[]],c=function(e){return e.replace(ds," ")}(i=function(e,t){if(function(e){return-1===e}(t))return bs(e);var n=e.indexOf(":".concat(t).concat(cs))+2+t.toString().length,r=e.search(new RegExp("".concat(cs,"\\/\\*\\d+:").concat(t).concat(cs)));return bs(e.substring(n,r))}(i,a)).split(fs),h=0;h<c.length;h++){var f=c[h];if(0==(1&h))for(var d=ws(f),p=0;p<d.length;p++){var v=d[p];if(0==(1&p))""!==v&&ms(e,o,l[0],s,u,n,v);else{var m=v;if("object"!=typeof m)throw new Error('Unable to parse ICU expression in "'.concat(i,'" message.'));_s(e,n,u,t,m,vs(e,o,l[0],n,s,"",!0).index)}}else{var g=47===f.charCodeAt(0),y=(f.charCodeAt(g?1:0),Ee+Number.parseInt(f.substring(g?2:1)));if(g)l.shift(),ft(ht(),!1);else{var b=as(e,l[0],y);l.unshift([]),ft(b,!0)}}}e.data[r]={create:s,update:u}}function vs(e,t,n,r,i,a,o){var s=qi(e,r,1,null),u=s<<Zo.SHIFT,l=ht();t===l&&(l=null),null===l&&(u|=Zo.APPEND_EAGERLY),o&&(u|=Zo.COMMENT,void 0===Wr&&(Wr=function(){var e,t,n=[],r=-1;function i(e,n){r=0;var i=function(e,t){var n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}(e,n);t=null!==i?e.remove[i]:se}function a(){if(r<t.length){var o=t[r++];return o>0?e[o]:(n.push(r,t),i(e[1].data[~o],e),a())}return 0===n.length?null:(t=n.pop(),r=n.pop(),a())}return function(t,r){for(e=r;n.length;)n.pop();return i(t.value,r),a}}())),i.push(u,null===a?"":a);var c=Xi(e,s,o?32:1,null===a?"":a,null);ts(n,c);var h=c.index;return ft(c,!1),null!==l&&t!==l&&function(e,t){var n,r=e.insertBeforeIndex;null===r?(di($o,es),r=e.insertBeforeIndex=[null,t]):("Expecting array here",(n=Array.isArray(r))!=!0&&D("Expecting array here",n,true,"=="),r.push(t))}(l,h),c}function ms(e,t,n,r,i,a,o){var s=o.match(ss),u=vs(e,t,n,a,r,s?null:o,!1);s&&gs(i,o,u.index,null,0,null)}function gs(e,t,n,r,i,a){var o=e.length,s=o+1;e.push(null,null);for(var u=o+2,l=t.split(ss),c=0,h=0;h<l.length;h++){var f=l[h];if(1&h){var d=i+parseInt(f,10);e.push(-1-d),c|=ys(d)}else""!==f&&e.push(f)}return e.push(n<<2|(r?1:0)),r&&e.push(r,a),e[o]=c,e[s]=e.length-u,c}function ys(e){return 1<<Math.min(e,31)}function bs(e){for(var t,n,r="",i=0,a=!1;null!==(t=hs.exec(e));)a?t[0]==="".concat(cs,"/*").concat(n).concat(cs)&&(i=t.index,a=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],a=!0);return r+e.substr(i)}function _s(e,t,n,r,i,a){var o=0,s={type:i.type,currentCaseLViewIndex:qi(e,t,1,null),anchorIdx:a,cases:[],create:[],remove:[],update:[]};!function(e,t,n){e.push(ys(t.mainBinding),2,-1-t.mainBinding,n<<2|2)}(n,i,a),function(e,t,n){var r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,a,s);for(var u=i.values,l=0;l<u.length;l++){for(var c=u[l],h=[],f=0;f<c.length;f++){var d=c[f];if("string"!=typeof d){var p=h.push(d)-1;c[f]="\x3c!--\ufffd".concat(p,"\ufffd--\x3e")}}o=Ts(e,s,t,n,r,i.cases[l],c.join(""),h)|o}o&&function(e,t,n){e.push(t,1,n<<2|3)}(n,o,a)}function xs(e){for(var t=[],n=[],r=1,i=0,a=ws(e=e.replace(ls,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""})),o=0;o<a.length;){var s=a[o++].trim();1===r&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&t.push(s);var u=ws(a[o++]);t.length>n.length&&n.push(u)}return{type:r,mainBinding:i,cases:t,values:n}}function ws(e){if(!e)return[];var t,n=0,r=[],i=[],a=/[{}]/g;for(a.lastIndex=0;t=a.exec(e);){var o=t.index;if("}"==t[0]){if(r.pop(),0==r.length){var s=e.substring(n,o);ls.test(s)?i.push(xs(s)):i.push(s),n=o+1}}else{if(0==r.length){var u=e.substring(n,o);i.push(u),n=o+1}r.push("{")}}var l=e.substring(n);return i.push(l),i}function Ts(e,t,n,r,i,a,o,s){var u=[],l=[],c=[];t.cases.push(a),t.create.push(u),t.remove.push(l),t.update.push(c);var h=lr(Ve()).getInertBodyElement(o),f=Lr(h)||h;return f?Ss(e,t,n,r,u,l,c,f,i,s,0):0}function Ss(e,t,n,r,i,a,o,s,u,l,c){for(var h=0,f=s.firstChild;f;){var d=qi(e,n,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:var p=f,v=p.tagName.toLowerCase();if(Tr.hasOwnProperty(v)){Es(i,Yo,v,u,d),e.data[d]=v;for(var m=p.attributes,g=0;g<m.length;g++){var y=m.item(g),b=y.name.toLowerCase();y.value.match(ss)?Or.hasOwnProperty(b)&&gs(o,y.value,d,y.name,0,Sr[b]?pr:Mr[b]?vr:null):ks(i,d,y)}h=Ss(e,t,n,r,i,a,o,f,d,l,c+1)|h,Ms(a,d,c)}break;case Node.TEXT_NODE:var _=f.textContent||"",x=_.match(ss);Es(i,null,x?"":_,u,d),Ms(a,d,c),x&&(h=gs(o,_,d,null,0,null)|h);break;case Node.COMMENT_NODE:var w=us.exec(f.textContent||"");if(w){var T=l[parseInt(w[1],10)];Es(i,Jo,"",u,d),_s(e,n,r,u,T,d),Os(a,d,c)}}f=f.nextSibling}return h}function Ms(e,t,n){0===n&&e.push(t)}function Os(e,t,n){0===n&&(e.push(~t),e.push(t))}function Es(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,0|r<<17|i<<1)}function ks(e,t,n){e.push(t<<1|1,n.name,n.value)}function As(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=st(),i=ot(),a=Ee+e,o=tt(r.consts,t),s=ht();r.firstCreatePass&&ps(r,null===s?0:s.index,i,a,o,n);var u=r.data[a],l=s===i[6]?null:s,c=ai(r,l,i),h=s&&8&s.type?i[s.index]:null;os(i,u.create,c,h),_t(!0)}function Cs(){_t(!1)}function Ps(e,t,n){As(e,t,n),Cs()}var js=function e(){Object(d.a)(this,e)},Ls=function e(){Object(d.a)(this,e)},Rs=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(E(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Is=function(){var e=function e(){Object(d.a)(this,e)};return e.NULL=new Rs,e}();function Ds(){}function Ns(e,t){return new Gs(Ye(e,t))}var Hs=function(){return Ns(lt(),ot())},Gs=function(){var e=function e(t){Object(d.a)(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=Hs,e}();function Bs(e){return e instanceof Gs?e.nativeElement:e}var Us=function e(){Object(d.a)(this,e)},Fs=function(){var e=function e(){Object(d.a)(this,e)};return e.__NG_ELEMENT_ID__=function(){return zs()},e}(),zs=function(){var e=ot(),t=Ze(lt().index,e);return function(e){return e[11]}(Ae(t)?t:e)},Vs=function(){var e=function e(){Object(d.a)(this,e)};return e.\u0275prov=N({token:e,providedIn:"root",factory:function(){return null}}),e}(),Ws=function e(t){Object(d.a)(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},Xs=new Ws("11.2.14"),qs=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"supports",value:function(e){return Qa(e)}},{key:"create",value:function(e){return new Ys(e)}}]),e}(),Ks=function(e,t){return t},Ys=function(){function e(t){Object(d.a)(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ks}return Object(f.a)(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var a=!n||t&&t.currentIndex<$s(n,r,i)?t:n,o=$s(a,r,i),s=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{i||(i=[]);var u=o-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,f=h+c;l<=f&&f<u&&(i[c]=h+1)}i[a.previousIndex]=l-u}}o!==s&&e(a,o,s)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!Qa(e))throw new Error("Error trying to diff '".concat(E(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,a=this._itHead,o=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=e[s]),null!==a&&Object.is(a.trackById,i)?(o&&(a=this._verifyReinsertion(a,r,i,s)),Object.is(a.item,r)||this._addIdentityChange(a,r)):(a=this._mismatch(a,r,i,s),o=!0),a=a._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[Za()]();!(r=i.next()).done;)t(r.value)}(e,function(e){i=t._trackByFn(n,e),null!==a&&Object.is(a.trackById,i)?(o&&(a=t._verifyReinsertion(a,e,i,n)),Object.is(a.item,e)||t._addIdentityChange(a,e)):(a=t._mismatch(a,e,i,n),o=!0),a=a._next,n++}),this.length=n;return this._truncate(a),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new Js(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Qs),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qs),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),Js=function e(t,n){Object(d.a)(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},Zs=function(){function e(){Object(d.a)(this,e),this._head=null,this._tail=null}return Object(f.a)(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),Qs=function(){function e(){Object(d.a)(this,e),this.map=new Map}return Object(f.a)(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new Zs,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function $s(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var eu=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"supports",value:function(e){return e instanceof Map||$a(e)}},{key:"create",value:function(){return new tu}}]),e}(),tu=function(){function e(){Object(d.a)(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object(f.a)(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||$a(e)))throw new Error("Error trying to diff '".concat(E(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var a=new nu(e);return this._records.set(e,a),a.currentValue=t,this._addToAdditions(a),a}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})}}]),e}(),nu=function e(t){Object(d.a)(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function ru(){return new iu([new qs])}var iu=function(){var e=function(){function e(t){Object(d.a)(this,e),this.factories=t}return Object(f.a)(e,[{key:"find",value:function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||ru())},deps:[[e,new Xn,new Wn]]}}}]),e}();return e.\u0275prov=N({token:e,providedIn:"root",factory:ru}),e}();function au(){return new ou([new eu])}var ou=function(){var e=function(){function e(t){Object(d.a)(this,e),this.factories=t}return Object(f.a)(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||au())},deps:[[e,new Xn,new Wn]]}}}]),e}();return e.\u0275prov=N({token:e,providedIn:"root",factory:au}),e}();function su(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var a=t[n.index];if(null!==a&&r.push(qe(a)),Ce(a))for(var o=ke;o<a.length;o++){var s=a[o],l=s[1].firstChild;null!==l&&su(s[1],s,l,r)}var c=n.type;if(8&c)su(e,t,n.child,r);else if(32&c)for(var h=qr(n,t),f=void 0;f=h();)r.push(f);else if(16&c){var d=mi(t,n);if(Array.isArray(d))r.push.apply(r,Object(u.a)(d));else{var p=Kr(t[16]);su(p[1],p,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var uu=function(){function e(t,n){Object(d.a)(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return Object(f.a)(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return su(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(Ce(e)){var t=e[8],n=t?t.indexOf(this):-1;n>-1&&(ni(e,n),kn(t,n))}this._attachedToViewContainer=!1}ri(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){ra(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){xa(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){wa(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){mt(!0);try{wa(e,t,n)}finally{mt(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,bi(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),lu=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this,e))._view=e,r}return Object(f.a)(n,[{key:"detectChanges",value:function(){Ta(this._view)}},{key:"checkNoChanges",value:function(){!function(e){mt(!0);try{Ta(e)}finally{mt(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(uu),cu=fu,hu=function(){var e=function e(){Object(d.a)(this,e)};return e.__NG_ELEMENT_ID__=cu,e.__ChangeDetectorRef__=!0,e}();function fu(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return du(lt(),ot(),e)}function du(e,t,n){if(!n&&je(e)){var r=Ze(e.index,t);return new uu(r,r)}return 47&e.type?new uu(t[16],t):null}var pu=[new eu],vu=new iu([new qs]),mu=new ou(pu),gu=function(){return _u(lt(),ot())},yu=function(){var e=function e(){Object(d.a)(this,e)};return e.__NG_ELEMENT_ID__=gu,e}(),bu=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e,r,i){var a;return Object(d.a)(this,n),(a=t.call(this))._declarationLView=e,a._declarationTContainer=r,a.elementRef=i,a}return Object(f.a)(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=Vi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Ki(t,n,e),new uu(n)}}]),n}(yu);function _u(e,t){return 4&e.type?new bu(t,e,Ns(e,t)):null}var xu=function e(){Object(d.a)(this,e)},wu=function e(){Object(d.a)(this,e)},Tu=function(){return ku(lt(),ot())},Su=function(){var e=function e(){Object(d.a)(this,e)};return e.__NG_ELEMENT_ID__=Tu,e}(),Mu=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e,r,i){var a;return Object(d.a)(this,n),(a=t.call(this))._lContainer=e,a._hostTNode=r,a._hostLView=i,a}return Object(f.a)(n,[{key:"element",get:function(){return Ns(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new yn(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=an(this._hostTNode,this._hostLView);if(Yt(e)){var t=Zt(e,this._hostLView),n=Jt(e);return new yn(t[1].data[n+8],t)}return new yn(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=Ou(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-ke}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var a=n||this.parentInjector;if(!i&&null==e.ngModule&&a){var o=a.get(xu,null);o&&(i=o)}var s=e.create(a,r,void 0,i);return this.insert(s.hostView,t),s}},{key:"insert",value:function(e,t){var n=e._lView,r=n[1];if(Ce(n[3])){var i=this.indexOf(e);if(-1!==i)this.detach(i);else{var a=n[3],o=new Mu(a,a[6],a[3]);o.detach(o.indexOf(e))}}var s=this._adjustIndex(t),u=this._lContainer;!function(e,t,n,r){var i=ke+r,a=n.length;r>0&&(n[i-1][4]=t),r<a-ke?(t[4]=n[i],En(n,ke+r,t)):(n.push(t),t[4]=null),t[3]=n;var o=t[17];null!==o&&n!==o&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);var s=t[19];null!==s&&s.insertView(e),t[2]|=128}(r,n,u,s);var l=gi(s,u),c=n[11],h=li(c,u[7]);return null!==h&&function(e,t,n,r,i,a){r[0]=i,r[6]=t,bi(e,r,n,1,i,a)}(r,u[6],c,n,h,l),e.attachToViewContainerRef(),En(Eu(u),s,e),e}},{key:"move",value:function(e,t){return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=Ou(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=ni(this._lContainer,t);n&&(kn(Eu(this._lContainer),t),ri(n[1],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=ni(this._lContainer,t);return n&&null!=kn(Eu(this._lContainer),t)?new uu(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}}]),n}(Su);function Ou(e){return e[8]}function Eu(e){return e[8]||(e[8]=[])}function ku(e,t){var n,r=t[e.index];if(Ce(r))n=r;else{var i;if(8&e.type)i=qe(r);else{var a=t[11];i=a.createComment("");var o=Ye(e,t);oi(a,li(a,o),i,function(e,t){return We(e)?e.nextSibling(t):t.nextSibling}(a,o),!1)}t[e.index]=n=ma(r,t,i,e),_a(t,n)}return new Mu(n,e,t)}var Au={},Cu=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var r;return Object(d.a)(this,n),(r=t.call(this)).ngModule=e,r}return Object(f.a)(n,[{key:"resolveComponentFactory",value:function(e){var t=Me(e);return new Lu(t,this.ngModule)}}]),n}(Is);function Pu(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var ju=new wn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return zr}}),Lu=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e,r){var i;return Object(d.a)(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(Li).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return Object(f.a)(n,[{key:"inputs",get:function(){return Pu(this.componentDef.inputs)}},{key:"outputs",get:function(){return Pu(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,a,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var a=e.get(n,Au,i);return a!==Au||r===Au?a:t.get(n,r,i)}}}(e,r.injector):e,s=o.get(Us,Xe),u=o.get(Vs,null),l=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(We(e))return e.selectRootElement(t,n===$.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(l,n,this.componentDef.encapsulation):ei(s.createRenderer(null,this.componentDef),c,function(e){var t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:zr,clean:Ma,playerHandler:null,flags:0},p=na(0,null,null,1,0,null,null,null,null,null),v=Vi(null,p,d,f,null,null,s,l,u,o);Ot(v);try{var m=function(e,t,n,r,i,a){var o=n[1];n[20]=e;var s=Wi(o,20,2,"#host",null),u=s.mergedAttrs=t.hostAttrs;null!==u&&(Pa(s,u,!0),null!==e&&(Vt(i,e,u),null!==s.classes&&wi(i,e,s.classes),null!==s.styles&&xi(i,e,s.styles)));var l=r.createRenderer(e,t),c=Vi(n,ta(t),null,t.onPush?64:16,n[20],s,r,l,null,null);return o.firstCreatePass&&(on(tn(s,n),o,t.type),la(o,s),ha(s,n.length,1)),_a(n,c),n[20]=c}(h,this.componentDef,v,s,l);if(h)if(n)Vt(l,h,["ng-version",Xs.full]);else{var g=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var a=e[r];if("string"==typeof a)2===i?""!==a&&t.push(a,e[++r]):8===i&&n.push(a);else{if(!Ai(i))break;i=a}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=g.attrs,b=g.classes;y&&Vt(l,h,y),b&&b.length>0&&wi(l,h,b.join(" "))}if(a=Je(p,Ee),void 0!==t)for(var _=a.projection=[],x=0;x<this.ngContentSelectors.length;x++){var w=t[x];_.push(null!=w?Array.from(w):null)}i=function(e,t,n,r,i){var a=n[1],o=function(e,t,n){var r=lt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),fa(e,r,t,qi(e,t,1,null),n));var i=pn(t,e,r.directiveStart,r);Fr(i,t);var a=Ye(r,t);return a&&Fr(a,t),i}(a,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(function(e){return e(o,t)}),t.contentQueries){var s=lt();t.contentQueries(1,o,s.directiveStart)}var u=lt();return!a.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Rt(u.index),sa(n[1],u,0,u.directiveStart,u.directiveEnd,t),ua(t,o)),o}(m,this.componentDef,v,d,[Ya]),Ki(p,v,null)}finally{Pt()}return new Ru(this.componentType,i,Ns(a,v),v,a)}}]),n}(Ls),Ru=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e,r,i,a,o){var s;return Object(d.a)(this,n),(s=t.call(this)).location=i,s._rootLView=a,s._tNode=o,s.instance=r,s.hostView=s.changeDetectorRef=new lu(a),s.componentType=e,s}return Object(f.a)(n,[{key:"injector",get:function(){return new yn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(js),Iu=new Map,Du=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e,r){var i;Object(d.a)(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=Object(a.a)(i),i.destroyCbs=[],i.componentFactoryResolver=new Cu(Object(a.a)(i));var o=Oe(e),s=e[fe]||null;return s&&Qo(s),i._bootstrapComponents=Vr(o.bootstrap),i._r3Injector=Ba(e,r,[{provide:xu,useValue:Object(a.a)(i)},{provide:Is,useValue:i.componentFactoryResolver}],E(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return Object(f.a)(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ka.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:q.Default;return e===Ka||e===xu||e===ja?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(xu),Nu=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(e){var r,i,a;return Object(d.a)(this,n),(r=t.call(this)).moduleType=e,null!==Oe(e)&&(i=e,a=new Set,function e(t){var n=Oe(t,!0),r=n.id;null!==r&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(E(t)," vs ").concat(E(t.name)))}(r,Iu.get(r),t),Iu.set(r,t));var i,o=Vr(n.imports),u=Object(s.a)(o);try{for(u.s();!(i=u.n()).done;){var l=i.value;a.has(l)||(a.add(l),e(l))}}catch(c){u.e(c)}finally{u.f()}}(i)),r}return Object(f.a)(n,[{key:"create",value:function(e){return new Du(this.moduleType,e)}}]),n}(wu);function Hu(e,t,n){var r=gt()+e,i=ot();return i[r]===Ri?eo(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function Gu(e,t,n,r){return function(e,t,n,r,i,a){var o=t+n;return to(e,o,i)?eo(e,o+1,a?r.call(a,i):r(i)):function(e,t){var n=e[t];return n===Ri?void 0:n}(e,o+1)}(ot(),gt(),e,t,n,r)}function Bu(e){return function(t){setTimeout(e,void 0,t)}}var Uu=function(e){Object(p.a)(n,e);var t=Object(v.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(d.a)(this,n),(e=t.call(this)).__isAsync=r,e}return Object(f.a)(n,[{key:"emit",value:function(e){Object(r.a)(Object(i.a)(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,a){var o,s,u,l=e,c=t||function(){return null},h=a;if(e&&"object"==typeof e){var f=e;l=null===(o=f.next)||void 0===o?void 0:o.bind(f),c=null===(s=f.error)||void 0===s?void 0:s.bind(f),h=null===(u=f.complete)||void 0===u?void 0:u.bind(f)}this.__isAsync&&(c=Bu(c),l&&(l=Bu(l)),h&&(h=Bu(h)));var d=Object(r.a)(Object(i.a)(n.prototype),"subscribe",this).call(this,{next:l,error:c,complete:h});return e instanceof g.a&&e.add(d),d}}]),n}(y.a);function Fu(){return this._results[Za()]()}var zu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Object(d.a)(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=Za(),r=e.prototype;r[n]||(r[n]=Fu)}return Object(f.a)(e,[{key:"changes",get:function(){return this._changes||(this._changes=new Uu)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){var n=this;n.dirty=!1;var r=Mn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],a=t[r];if(n&&(i=n(i),a=n(a)),a!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}},{key:"notifyOnChanges",value:function(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}(),Vu=function(){function e(t){Object(d.a)(this,e),this.queryList=t,this.matches=null}return Object(f.a)(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),Wu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(d.a)(this,e),this.queries=t}return Object(f.a)(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],a=0;a<r;a++){var o=n.getByIndex(a);i.push(this.queries[o.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==al(e,t).matches&&this.queries[t].setDirty()}}]),e}(),Xu=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Object(d.a)(this,e),this.predicate=t,this.flags=n,this.read=r},qu=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(d.a)(this,e),this.queries=t}return Object(f.a)(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,a=this.getByIndex(r).embeddedTView(t,i);a&&(a.indexInDeclarationView=r,null!==n?n.push(a):n=[a])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),Ku=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Object(d.a)(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return Object(f.a)(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(e,t,Yu(t,i)),this.matchTNodeWithReadOption(e,t,dn(t,e,i,!1,!1))}else n===yu?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,dn(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Gs||r===Su||r===yu&&4&t.type)this.addMatch(t.index,-2);else{var i=dn(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function Yu(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Ju(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Ns(e,t):4&e.type?_u(e,t):null}(t,e):-2===n?function(e,t,n){return n===Gs?Ns(t,e):n===yu?_u(t,e):n===Su?ku(t,e):void 0}(e,t,r):pn(e,e[1],n,t)}function Zu(e,t,n,r){var i=t[19].queries[r];if(null===i.matches){for(var a=e.data,o=n.matches,s=[],u=0;u<o.length;u+=2){var l=o[u];s.push(l<0?null:Ju(t,a[l],o[u+1],n.metadata.read))}i.matches=s}return i.matches}function Qu(e,t,n,r){var i=e.queries.getByIndex(n),a=i.matches;if(null!==a)for(var o=Zu(e,t,i,n),s=0;s<a.length;s+=2){var u=a[s];if(u>0)r.push(o[s/2]);else{for(var l=a[s+1],c=t[-u],h=ke;h<c.length;h++){var f=c[h];f[17]===f[3]&&Qu(f[1],f,l,r)}if(null!==c[9])for(var d=c[9],p=0;p<d.length;p++){var v=d[p];Qu(v[1],v,l,r)}}}return r}function $u(e){var t=ot(),n=st(),r=wt();Tt(r+1);var i=al(n,r);if(e.dirty&&$e(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{var a=i.crossesNgTemplate?Qu(n,t,r,[]):Zu(n,t,i,r);e.reset(a,Bs),e.notifyOnChanges()}return!0}return!1}function el(e,t,n){var r=st();r.firstCreatePass&&(il(r,new Xu(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),rl(r,ot(),t)}function tl(e,t,n,r){var i=st();if(i.firstCreatePass){var a=lt();il(i,new Xu(t,n,r),a.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}rl(i,ot(),n)}function nl(){return e=ot(),t=wt(),e[19].queries[t].queryList;var e,t}function rl(e,t,n){var r=new zu(4==(4&n));ra(e,t,r,r.destroy),null===t[19]&&(t[19]=new Wu),t[19].queries.push(new Vu(r))}function il(e,t,n){null===e.queries&&(e.queries=new qu),e.queries.track(new Ku(t,n))}function al(e,t){return e.queries.getByIndex(t)}function ol(e,t){return _u(e,t)}function sl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q.Default,t=fu(!0);if(null!=t||e&q.Optional)return t;I("ChangeDetectorRef")}var ul=new wn("Application Initializer"),ll=function(){var e=function(){function e(t){var n=this;Object(d.a)(this,e),this.appInits=t,this.resolve=Ds,this.reject=Ds,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return Object(f.a)(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();mo(i)&&t.push(i)}Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Hn(ul,8))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}(),cl=new wn("AppId"),hl={provide:cl,useFactory:function(){return"".concat(fl()).concat(fl()).concat(fl())},deps:[]};function fl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var dl=new wn("Platform Initializer"),pl=new wn("Platform ID"),vl=new wn("appBootstrapListener"),ml=function(){var e=function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}(),gl=new wn("LocaleId"),yl=new wn("DefaultCurrencyCode"),bl=function e(t,n){Object(d.a)(this,e),this.ngModuleFactory=t,this.componentFactories=n},_l=function(e){return new Nu(e)},xl=_l,wl=function(e){return Promise.resolve(_l(e))},Tl=function(e){var t=_l(e),n=Vr(Oe(e).declarations).reduce(function(e,t){var n=Me(t);return n&&e.push(new Lu(n)),e},[]);return new bl(t,n)},Sl=Tl,Ml=function(e){return Promise.resolve(Tl(e))},Ol=function(){var e=function(){function e(){Object(d.a)(this,e),this.compileModuleSync=xl,this.compileModuleAsync=wl,this.compileModuleAndAllComponentsSync=Sl,this.compileModuleAndAllComponentsAsync=Ml}return Object(f.a)(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}(),El=function(){return Promise.resolve(0)}();function kl(e){"undefined"==typeof Zone?El.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Al=function(){function e(t){var n=t.enableLongStackTrace,r=void 0!==n&&n,i=t.shouldCoalesceEventChangeDetection,a=void 0!==i&&i,o=t.shouldCoalesceRunChangeDetection,s=void 0!==o&&o;if(Object(d.a)(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Uu(!1),this.onMicrotaskEmpty=new Uu(!1),this.onStable=new Uu(!1),this.onError=new Uu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var u,l,c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!s&&a,c.shouldCoalesceRunChangeDetection=s,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){var e=ie.requestAnimationFrame,t=ie.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,l=function(){!function(e){-1===e.lastRequestAnimationFrameId&&(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ie,function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){e.lastRequestAnimationFrameId=-1,jl(e),Pl(e)},void 0,function(){},function(){})),e.fakeTopEventTask.invoke()}),jl(e))}(u)},(u=c)._inner=u._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,t,n,r,i,a){try{return Ll(u),e.invokeTask(n,r,i,a)}finally{(u.shouldCoalesceEventChangeDetection&&"eventTask"===r.type||u.shouldCoalesceRunChangeDetection)&&l(),Rl(u)}},onInvoke:function(e,t,n,r,i,a,o){try{return Ll(u),e.invoke(n,r,i,a,o)}finally{u.shouldCoalesceRunChangeDetection&&l(),Rl(u)}},onHasTask:function(e,t,n,r){e.hasTask(n,r),t===n&&("microTask"==r.change?(u._hasPendingMicrotasks=r.microTask,jl(u),Pl(u)):"macroTask"==r.change&&(u.hasPendingMacrotasks=r.macroTask))},onHandleError:function(e,t,n,r){return e.handleError(n,r),u.runOutsideAngular(function(){return u.onError.emit(r)}),!1}})}return Object(f.a)(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,a=i.scheduleEventTask("NgZoneEvent: "+r,e,Cl,Ds,Ds);try{return i.runTask(a,t,n)}finally{i.cancelTask(a)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}(),Cl={};function Pl(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function jl(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Ll(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Rl(e){e._nesting--,Pl(e)}var Il=function(){function e(){Object(d.a)(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Uu,this.onMicrotaskEmpty=new Uu,this.onStable=new Uu,this.onError=new Uu}return Object(f.a)(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),Dl=function(){var e=function(){function e(t){var n=this;Object(d.a)(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return Object(f.a)(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){Al.assertNotInAngularZone(),kl(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())kl(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Hn(Al))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}(),Nl=function(){var e=function(){function e(){Object(d.a)(this,e),this._applications=new Map,Bl.addToWindow(this)}return Object(f.a)(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Bl.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}();function Hl(e){Bl=e}var Gl,Bl=new(function(){function e(){Object(d.a)(this,e)}return Object(f.a)(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Ul=!0,Fl=!1;function zl(){if(Fl)throw new Error("Cannot enable prod mode after platform setup.");Ul=!1}var Vl=function(e,t,n){var r=new Nu(n);return Promise.resolve(r)},Wl=new wn("AllowMultipleToken"),Xl=function e(t,n){Object(d.a)(this,e),this.name=t,this.token=n};function ql(e){if(Gl&&!Gl.destroyed&&!Gl.injector.get(Wl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Gl=e.get(Zl);var t=e.get(dl,null);return t&&t.forEach(function(e){return e()}),Gl}function Kl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new wn(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=Jl();if(!a||a.injector.get(Wl,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var o=n.concat(t).concat({provide:i,useValue:!0},{provide:Ra,useValue:"platform"});ql(Ka.create({providers:o,name:r}))}return Yl(i)}}function Yl(e){var t=Jl();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}function Jl(){return Gl&&!Gl.destroyed?Gl:null}var Zl=function(){var e=function(){function e(t){Object(d.a)(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return Object(f.a)(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n,r,i=this,a=(r={ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1},"noop"===(n=t?t.ngZone:void 0)?new Il:("zone.js"===n?void 0:n)||new Al({enableLongStackTrace:(Fl=!0,Ul),shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)})),o=[{provide:Al,useValue:a}];return a.run(function(){var t=Ka.create({providers:o,parent:i.injector,name:e.moduleType.name}),n=e.create(t),r=n.injector.get(Ur,null);if(!r)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(function(){var e=a.onError.subscribe({next:function(e){r.handleError(e)}});n.onDestroy(function(){ec(i._modules,n),e.unsubscribe()})}),function(e,t,r){try{var a=((o=n.injector.get(ll)).runInitializers(),o.donePromise.then(function(){return Qo(n.injector.get(gl,Ko)||Ko),i._moduleDoBootstrap(n),n}));return mo(a)?a.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):a}catch(s){throw t.runOutsideAngular(function(){return e.handleError(s)}),s}var o}(r,a)})}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Ql({},n);return Vl(0,0,e).then(function(e){return t.bootstrapModuleFactory(e,r)})}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get($l);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(E(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. ')+"Please define one of these.");e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Hn(Ka))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}();function Ql(e,t){return Array.isArray(t)?t.reduce(Ql,e):Object.assign(Object.assign({},e),t)}var $l=function(){var e=function(){function e(t,n,r,i,a){var o=this;Object(d.a)(this,e),this._zone=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=a,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){o._zone.run(function(){o.tick()})}});var s=new b.a(function(e){o._stable=o._zone.isStable&&!o._zone.hasPendingMacrotasks&&!o._zone.hasPendingMicrotasks,o._zone.runOutsideAngular(function(){e.next(o._stable),e.complete()})}),u=new b.a(function(e){var t;o._zone.runOutsideAngular(function(){t=o._zone.onStable.subscribe(function(){Al.assertNotInAngularZone(),kl(function(){o._stable||o._zone.hasPendingMacrotasks||o._zone.hasPendingMicrotasks||(o._stable=!0,e.next(!0))})})});var n=o._zone.onUnstable.subscribe(function(){Al.assertInAngularZone(),o._stable&&(o._stable=!1,o._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var e=Number.POSITIVE_INFINITY,t=null,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r[r.length-1];return Object(_.a)(a)?(t=r.pop(),r.length>1&&"number"==typeof r[r.length-1]&&(e=r.pop())):"number"==typeof a&&(e=r.pop()),null===t&&1===r.length&&r[0]instanceof b.a?r[0]:Object(x.a)(e)(Object(w.a)(r,t))}(s,u.pipe(function(e){return Object(S.a)()((t=M,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,T.b);return r.source=e,r.subjectFactory=n,r})(e));var t}))}return Object(f.a)(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof Ls?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n.isBoundToModule?void 0:this._injector.get(xu),a=n.create(Ka.NULL,[],t||n.selector,i),o=a.location.nativeElement,s=a.injector.get(Dl,null),u=s&&a.injector.get(Nl);return s&&u&&u.registerApplication(o,s),a.onDestroy(function(){r.detachView(a.hostView),ec(r.components,a),u&&u.unregisterApplication(o)}),this._loadComponent(a),a}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=Object(s.a)(this._views);try{for(n.s();!(t=n.n()).done;)t.value.detectChanges()}catch(r){n.e(r)}finally{n.f()}}catch(i){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(i)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;ec(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(vl,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(e){return e.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Hn(Al),Hn(Ka),Hn(Ur),Hn(Is),Hn(ll))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}();function ec(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var tc=function e(){Object(d.a)(this,e)},nc=function e(){Object(d.a)(this,e)},rc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},ic=function(){var e=function(){function e(t,n){Object(d.a)(this,e),this._compiler=t,this._config=n||rc}return Object(f.a)(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var t=this,r=e.split("#"),i=Object(o.a)(r,2),a=i[0],s=i[1];return void 0===s&&(s="default"),n("zn8P")(a).then(function(e){return e[s]}).then(function(e){return ac(e,a,s)}).then(function(e){return t._compiler.compileModuleAsync(e)})}},{key:"loadFactory",value:function(e){var t=e.split("#"),r=Object(o.a)(t,2),i=r[0],a=r[1],s="NgFactory";return void 0===a&&(a="default",s=""),n("zn8P")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[a+s]}).then(function(e){return ac(e,i,a)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Hn(Ol),Hn(nc,8))},e.\u0275prov=N({token:e,factory:e.\u0275fac}),e}();function ac(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var oc=function(e){return null},sc=Kl(null,"core",[{provide:pl,useValue:"unknown"},{provide:Zl,deps:[Ka]},{provide:Nl,deps:[]},{provide:ml,deps:[]}]),uc=[{provide:$l,useClass:$l,deps:[Al,Ka,Ur,Is,ll]},{provide:ju,deps:[Al],useFactory:function(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:ll,useClass:ll,deps:[[new Wn,ul]]},{provide:Ol,useClass:Ol,deps:[]},hl,{provide:iu,useFactory:function(){return vu},deps:[]},{provide:ou,useFactory:function(){return mu},deps:[]},{provide:gl,useFactory:function(e){return Qo(e=e||"undefined"!=typeof $localize&&$localize.locale||Ko),e},deps:[[new Vn(gl),new Wn,new Xn]]},{provide:yl,useValue:"USD"}],lc=function(){var e=function e(t){Object(d.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)(Hn($l))},e.\u0275mod=_e({type:e}),e.\u0275inj=H({providers:uc}),e}()},foSv:function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},gRHU:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("2fFW"),i=n("NJ4a"),a={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},"h/w8":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("AytR"),i=n("fXoL"),a=n("tk/3"),o=function(){function e(e){this.http=e}return e.prototype.load=function(){var t=this,n="assets/config/config."+(r.a.production?"prod":"local")+".json";return new Promise(function(r,i){t.http.get(n).toPromise().then(function(t){e.settings=t,r(t)}).catch(function(e){i("Could not load file '"+n+"': "+JSON.stringify(e))})})},e.\u0275fac=function(t){return new(t||e)(i.Qb(a.a))},e.\u0275prov=i.Bb({token:e,factory:e.\u0275fac}),e}()},jZKg:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("HDdC"),i=n("quSY");function a(e,t){return new r.a(function(n){var r=new i.a,a=0;return r.add(t.schedule(function(){a!==e.length?(n.next(e[a++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},l7GE:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n("1OyB"),i=n("vuIU"),a=n("Ji7U"),o=n("LK+K"),s=function(e){Object(a.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(n("7o/Q").a)},lJxs:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("JX7q"),i=n("Ji7U"),a=n("LK+K"),o=n("1OyB"),s=n("vuIU"),u=n("7o/Q");function l(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new c(e,t))}}var c=function(){function e(t,n){Object(o.a)(this,e),this.project=t,this.thisArg=n}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new h(e,this.project,this.thisArg))}}]),e}(),h=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e,i,a){var s;return Object(o.a)(this,n),(s=t.call(this,e)).project=i,s.count=0,s.thisArg=a||Object(r.a)(s),s}return Object(s.a)(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(u.a)},mLhc:function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(P){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=Object.create((t&&t.prototype instanceof m?t:m).prototype),a=new k(r||[]);return i._invoke=function(e,t,n){var r=h;return function(i,a){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=M(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=c(e,t,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=l;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function m(){}function g(){}function y(){}var b={};u(b,a,function(){return this});var _=Object.getPrototypeOf,x=_&&_(_(A([])));x&&x!==n&&r.call(x,a)&&(b=x);var w=y.prototype=m.prototype=Object.create(b);function T(e){["next","throw","return"].forEach(function(t){u(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){function n(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then(function(e){n("next",e,o,s)},function(e){n("throw",e,o,s)}):t.resolve(h).then(function(e){l.value=e,o(l)},function(e){return n("throw",e,o,s)})}s(u.arg)}var i;this._invoke=function(e,r){function a(){return new t(function(t,i){n(e,r,t,i)})}return i=i?i.then(a,a):a()}}function M(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=c(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:C}}function C(){return{value:t,done:!0}}return g.prototype=y,u(w,"constructor",y),u(y,"constructor",g),g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},T(S.prototype),u(S.prototype,o,function(){return this}),e.AsyncIterator=S,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new S(l(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},T(w),u(w,s,"Generator"),u(w,a,function(){return this}),u(w,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;E(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(i){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},md7G:function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",function(){return a});var i=n("JX7q");function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?Object(i.a)(e):t}},mrSG:function(e,t,n){"use strict";function r(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{u(r.next(e))}catch(t){a(t)}}function s(e){try{u(r.throw(e))}catch(t){a(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,s)}u((r=r.apply(e,t||[])).next())})}function i(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function a(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a})},n6bG:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",function(){return r})},ngJS:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},o0o1:function(e,t,n){e.exports=n("mLhc")},ofXK:function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"b",function(){return V}),n.d(t,"c",function(){return p}),n.d(t,"d",function(){return k}),n.d(t,"e",function(){return g}),n.d(t,"f",function(){return A}),n.d(t,"g",function(){return S}),n.d(t,"h",function(){return N}),n.d(t,"i",function(){return G}),n.d(t,"j",function(){return U}),n.d(t,"k",function(){return E}),n.d(t,"l",function(){return v}),n.d(t,"m",function(){return q}),n.d(t,"n",function(){return X}),n.d(t,"o",function(){return d}),n.d(t,"p",function(){return W}),n.d(t,"q",function(){return h}),n.d(t,"r",function(){return D}),n.d(t,"s",function(){return f});var r=n("uFwe"),i=n("ODXe"),a=n("vuIU"),o=n("Ji7U"),s=n("LK+K"),u=n("1OyB"),l=n("fXoL"),c=null;function h(){return c}function f(e){c||(c=e)}var d=function e(){Object(u.a)(this,e)},p=new l.r("DocumentToken"),v=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(l.Bb)({factory:m,token:e,providedIn:"platform"}),e}();function m(){return Object(l.Qb)(y)}var g=new l.r("Location Initialized"),y=function(){var e=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this))._doc=e,r._init(),r}return Object(a.a)(n,[{key:"_init",value:function(){this.location=h().getLocation(),this._history=h().getHistory()}},{key:"getBaseHrefFromDOM",value:function(){return h().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){h().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)}},{key:"onHashChange",value:function(e){h().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){b()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){b()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"getState",value:function(){return this._history.state}}]),n}(v);return e.\u0275fac=function(t){return new(t||e)(l.Qb(p))},e.\u0275prov=Object(l.Bb)({factory:_,token:e,providedIn:"platform"}),e}();function b(){return!!window.history.pushState}function _(){return new y(Object(l.Qb)(p))}function x(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function w(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function T(e){return e&&"?"!==e[0]?"?"+e:e}var S=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(l.Bb)({factory:M,token:e,providedIn:"root"}),e}();function M(e){var t=Object(l.Qb)(p).location;return new E(Object(l.Qb)(v),t&&t.origin||"")}var O=new l.r("appBaseHref"),E=function(){var e=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var i;if(Object(u.a)(this,n),(i=t.call(this))._platformLocation=e,null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,i}return Object(a.a)(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return x(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+T(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+T(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+T(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(S);return e.\u0275fac=function(t){return new(t||e)(l.Qb(v),l.Qb(O,8))},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}(),k=function(){var e=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e,r){var i;return Object(u.a)(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",null!=r&&(i._baseHref=r),i}return Object(a.a)(n,[{key:"onPopState",value:function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=x(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+T(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+T(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}}]),n}(S);return e.\u0275fac=function(t){return new(t||e)(l.Qb(v),l.Qb(O,8))},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}(),A=function(){var e=function(){function e(t,n){var r=this;Object(u.a)(this,e),this._subject=new l.n,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=w(P(i)),this._platformStrategy.onPopState(function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})})}return Object(a.a)(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+T(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,P(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+T(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+T(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(e,t)})}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Qb(S),l.Qb(v))},e.normalizeQueryParams=T,e.joinWithSlash=x,e.stripTrailingSlash=w,e.\u0275prov=Object(l.Bb)({factory:C,token:e,providedIn:"root"}),e}();function C(){return new A(Object(l.Qb)(S),Object(l.Qb)(v))}function P(e){return e.replace(/\/index.html$/,"")}var j=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),L=l.kb,R=function e(){Object(u.a)(this,e)},I=function(){var e=function(e){Object(o.a)(n,e);var t=Object(s.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this)).locale=e,r}return Object(a.a)(n,[{key:"getPluralCategory",value:function(e,t){switch(L(t||this.locale)(e)){case j.Zero:return"zero";case j.One:return"one";case j.Two:return"two";case j.Few:return"few";case j.Many:return"many";default:return"other"}}}]),n}(R);return e.\u0275fac=function(t){return new(t||e)(l.Qb(l.v))},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}();function D(e,t){t=encodeURIComponent(t);var n,a=Object(r.a)(e.split(";"));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.indexOf("="),u=-1==s?[o,""]:[o.slice(0,s),o.slice(s+1)],l=Object(i.a)(u,2),c=l[1];if(l[0].trim()===t)return decodeURIComponent(c)}}catch(h){a.e(h)}finally{a.f()}return null}var N=function(){var e=function(){function e(t,n,r,i){Object(u.a)(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return Object(a.a)(e,[{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Object(l.nb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&t._toggleClass(e.key,!1)})}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat(Object(l.tb)(e.item)));t._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return t._toggleClass(e.item,!1)})}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!0)}):Object.keys(e).forEach(function(n){return t._toggleClass(n,!!e[n])}))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return t._toggleClass(e,!1)}))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Fb(l.t),l.Fb(l.u),l.Fb(l.l),l.Fb(l.E))},e.\u0275dir=l.Ab({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e}(),H=function(){function e(t,n,r,i){Object(u.a)(this,e),this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}return Object(a.a)(e,[{key:"first",get:function(){return 0===this.index}},{key:"last",get:function(){return this.index===this.count-1}},{key:"even",get:function(){return this.index%2==0}},{key:"odd",get:function(){return!this.even}}]),e}(),G=function(){var e=function(){function e(t,n,r){Object(u.a)(this,e),this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}return Object(a.a)(e,[{key:"ngForOf",set:function(e){this._ngForOf=e,this._ngForOfDirty=!0}},{key:"ngForTrackBy",get:function(){return this._trackByFn},set:function(e){this._trackByFn=e}},{key:"ngForTemplate",set:function(e){e&&(this._template=e)}},{key:"ngDoCheck",value:function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat((t=e).name||typeof t,"'. NgFor only supports binding to Iterables such as Arrays."))}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}},{key:"_applyChanges",value:function(e){var t=this,n=[];e.forEachOperation(function(e,r,i){if(null==e.previousIndex){var a=t._viewContainer.createEmbeddedView(t._template,new H(null,t._ngForOf,-1,-1),null===i?void 0:i),o=new B(e,a);n.push(o)}else if(null==i)t._viewContainer.remove(null===r?void 0:r);else if(null!==r){var s=t._viewContainer.get(r);t._viewContainer.move(s,i);var u=new B(e,s);n.push(u)}});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);for(var i=0,a=this._viewContainer.length;i<a;i++){var o=this._viewContainer.get(i);o.context.index=i,o.context.count=a,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})}},{key:"_perViewChange",value:function(e,t){e.context.$implicit=t.item}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Fb(l.P),l.Fb(l.L),l.Fb(l.t))},e.\u0275dir=l.Ab({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e}(),B=function e(t,n){Object(u.a)(this,e),this.record=t,this.view=n},U=function(){var e=function(){function e(t,n){Object(u.a)(this,e),this._viewContainer=t,this._context=new F,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return Object(a.a)(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){z("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){z("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Fb(l.P),l.Fb(l.L))},e.\u0275dir=l.Ab({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e}(),F=function e(){Object(u.a)(this,e),this.$implicit=null,this.ngIf=null};function z(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat(Object(l.tb)(t),"'."))}var V=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Db({type:e}),e.\u0275inj=l.Cb({providers:[{provide:R,useClass:I}]}),e}(),W="browser";function X(e){return e===W}var q=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275prov=Object(l.Bb)({token:e,providedIn:"root",factory:function(){return new K(Object(l.Qb)(p),window)}}),e}(),K=function(){function e(t,n){Object(u.a)(this,e),this.document=t,this.window=n,this.offset=function(){return[0,0]}}return Object(a.a)(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=function(e,t){var n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow))for(var r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var a=i.shadowRoot;if(a){var o=a.getElementById(t)||a.querySelector('[name="'.concat(t,'"]'));if(o)return o}i=r.nextNode()}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=Y(this.window.history)||Y(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(t){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}]),e}();function Y(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}},pLZG:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("7o/Q");function u(e,t){return function(n){return n.lift(new l(e,t))}}var l=function(){function e(t,n){Object(a.a)(this,e),this.predicate=t,this.thisArg=n}return Object(o.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new c(e,this.predicate,this.thisArg))}}]),e}(),c=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r,i){var o;return Object(a.a)(this,n),(o=t.call(this,e)).predicate=r,o.thisArg=i,o.count=0,o}return Object(o.a)(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(s.a)},quSY:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n("1OyB"),i=n("vuIU"),a=n("DH7j"),o=n("XoHu"),s=n("n6bG"),u=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(e,t){return"".concat(t+1,") ").concat(e.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),l=function(){var e,t=function(){function e(t){Object(r.a)(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return Object(i.a)(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var l=0;l<n.length;++l)n[l].remove(this);if(Object(s.a)(r))try{r.call(this)}catch(p){t=p instanceof u?c(p.errors):[p]}if(Object(a.a)(i))for(var h=-1,f=i.length;++h<f;){var d=i[h];if(Object(o.a)(d))try{d.unsubscribe()}catch(p){t=t||[],p instanceof u?t=t.concat(c(p.errors)):t.push(p)}}if(t)throw new u(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var a=this._subscriptions;return null===a?this._subscriptions=[n]:a.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}();return t.EMPTY=((e=new t).closed=!0,e),t}();function c(e){return e.reduce(function(e,t){return e.concat(t instanceof u?t.errors:t)},[])}},rePB:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r})},s4An:function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",function(){return r})},"tk/3":function(e,t,n){"use strict";n.d(t,"a",function(){return L}),n.d(t,"b",function(){return K});var r=n("Ji7U"),i=n("LK+K"),a=n("ODXe"),o=n("KQm4"),s=n("vuIU"),u=n("1OyB"),l=n("fXoL"),c=n("LRne"),h=n("HDdC"),f=n("bOdf"),d=n("pLZG"),p=n("lJxs"),v=n("ofXK"),m=function e(){Object(u.a)(this,e)},g=function e(){Object(u.a)(this,e)},y=function(){function e(t){var n=this;Object(u.a)(this,e),this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?function(){n.headers=new Map,t.split("\n").forEach(function(e){var t=e.indexOf(":");if(t>0){var r=e.slice(0,t),i=r.toLowerCase(),a=e.slice(t+1).trim();n.maybeSetNormalizedName(r,i),n.headers.has(i)?n.headers.get(i).push(a):n.headers.set(i,[a])}})}:function(){n.headers=new Map,Object.keys(t).forEach(function(e){var r=t[e],i=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(n.headers.set(i,r),n.maybeSetNormalizedName(e,i))})}:this.headers=new Map}return Object(s.a)(e,[{key:"has",value:function(e){return this.init(),this.headers.has(e.toLowerCase())}},{key:"get",value:function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}},{key:"keys",value:function(){return this.init(),Array.from(this.normalizedNames.values())}},{key:"getAll",value:function(e){return this.init(),this.headers.get(e.toLowerCase())||null}},{key:"append",value:function(e,t){return this.clone({name:e,value:t,op:"a"})}},{key:"set",value:function(e,t){return this.clone({name:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({name:e,value:t,op:"d"})}},{key:"maybeSetNormalizedName",value:function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}},{key:"init",value:function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))}},{key:"copyFrom",value:function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})}},{key:"clone",value:function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}},{key:"applyUpdate",value:function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,Object(o.a)(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var a=this.headers.get(t);if(!a)return;0===(a=a.filter(function(e){return-1===i.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}},{key:"forEach",value:function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})}}]),e}(),b=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"encodeKey",value:function(e){return x(e)}},{key:"encodeValue",value:function(e){return x(e)}},{key:"decodeKey",value:function(e){return decodeURIComponent(e)}},{key:"decodeValue",value:function(e){return decodeURIComponent(e)}}]),e}();function _(e,t){var n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(function(e){var r=e.indexOf("="),i=-1==r?[t.decodeKey(e),""]:[t.decodeKey(e.slice(0,r)),t.decodeValue(e.slice(r+1))],o=Object(a.a)(i,2),s=o[0],u=o[1],l=n.get(s)||[];l.push(u),n.set(s,l)}),n}function x(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var w=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.a)(this,e),this.updates=null,this.cloneFrom=null,this.encoder=n.encoder||new b,n.fromString){if(n.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=_(n.fromString,this.encoder)}else n.fromObject?(this.map=new Map,Object.keys(n.fromObject).forEach(function(e){var r=n.fromObject[e];t.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}return Object(s.a)(e,[{key:"has",value:function(e){return this.init(),this.map.has(e)}},{key:"get",value:function(e){this.init();var t=this.map.get(e);return t?t[0]:null}},{key:"getAll",value:function(e){return this.init(),this.map.get(e)||null}},{key:"keys",value:function(){return this.init(),Array.from(this.map.keys())}},{key:"append",value:function(e,t){return this.clone({param:e,value:t,op:"a"})}},{key:"appendAll",value:function(e){var t=[];return Object.keys(e).forEach(function(n){var r=e[n];Array.isArray(r)?r.forEach(function(e){t.push({param:n,value:e,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}},{key:"set",value:function(e,t){return this.clone({param:e,value:t,op:"s"})}},{key:"delete",value:function(e,t){return this.clone({param:e,value:t,op:"d"})}},{key:"toString",value:function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).filter(function(e){return""!==e}).join("&")}},{key:"clone",value:function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}},{key:"init",value:function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}}),this.cloneFrom=this.updates=null)}}]),e}();function T(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function S(e){return"undefined"!=typeof Blob&&e instanceof Blob}function M(e){return"undefined"!=typeof FormData&&e instanceof FormData}var O=function(){function e(t,n,r,i){var a;if(Object(u.a)(this,e),this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.params&&(this.params=a.params)),this.headers||(this.headers=new y),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{var s=n.indexOf("?");this.urlWithParams=n+(-1===s?"?":s<n.length-1?"&":"")+o}}else this.params=new w,this.urlWithParams=n}return Object(s.a)(e,[{key:"serializeBody",value:function(){return null===this.body?null:T(this.body)||S(this.body)||M(this.body)||"string"==typeof this.body?this.body:this.body instanceof w?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}},{key:"detectContentTypeHeader",value:function(){return null===this.body||M(this.body)?null:S(this.body)?this.body.type||null:T(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof w?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}},{key:"clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,a=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce(function(e,n){return e.set(n,t.setHeaders[n])},u)),t.setParams&&(l=Object.keys(t.setParams).reduce(function(e,n){return e.set(n,t.setParams[n])},l)),new e(n,r,a,{params:l,headers:u,reportProgress:s,responseType:i,withCredentials:o})}}]),e}(),E=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),k=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"OK";Object(u.a)(this,e),this.headers=t.headers||new y,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300},A=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,n),(e=t.call(this,r)).type=E.ResponseHeader,e}return Object(s.a)(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(k),C=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(u.a)(this,n),(e=t.call(this,r)).type=E.Response,e.body=void 0!==r.body?r.body:null,e}return Object(s.a)(n,[{key:"clone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new n({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}]),n}(k),P=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e){var r;return Object(u.a)(this,n),(r=t.call(this,e,0,"Unknown Error")).name="HttpErrorResponse",r.ok=!1,r.message=r.status>=200&&r.status<300?"Http failure during parsing for ".concat(e.url||"(unknown url)"):"Http failure response for ".concat(e.url||"(unknown url)",": ").concat(e.status," ").concat(e.statusText),r.error=e.error||null,r}return n}(k);function j(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var L=function(){var e=function(){function e(t){Object(u.a)(this,e),this.handler=t}return Object(s.a)(e,[{key:"request",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof O)n=e;else{var a=void 0;a=i.headers instanceof y?i.headers:new y(i.headers);var o=void 0;i.params&&(o=i.params instanceof w?i.params:new w({fromObject:i.params})),n=new O(e,t,void 0!==i.body?i.body:null,{headers:a,params:o,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}var s=Object(c.a)(n).pipe(Object(f.a)(function(e){return r.handler.handle(e)}));if(e instanceof O||"events"===i.observe)return s;var u=s.pipe(Object(d.a)(function(e){return e instanceof C}));switch(i.observe||"body"){case"body":switch(n.responseType){case"arraybuffer":return u.pipe(Object(p.a)(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return u.pipe(Object(p.a)(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return u.pipe(Object(p.a)(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return u.pipe(Object(p.a)(function(e){return e.body}))}case"response":return u;default:throw new Error("Unreachable: unhandled observe type ".concat(i.observe,"}"))}}},{key:"delete",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("DELETE",e,t)}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("GET",e,t)}},{key:"head",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("HEAD",e,t)}},{key:"jsonp",value:function(e,t){return this.request("JSONP",e,{params:(new w).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}},{key:"options",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request("OPTIONS",e,t)}},{key:"patch",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PATCH",e,j(n,t))}},{key:"post",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("POST",e,j(n,t))}},{key:"put",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request("PUT",e,j(n,t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Qb(m))},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}(),R=function(){function e(t,n){Object(u.a)(this,e),this.next=t,this.interceptor=n}return Object(s.a)(e,[{key:"handle",value:function(e){return this.interceptor.intercept(e,this.next)}}]),e}(),I=new l.r("HTTP_INTERCEPTORS"),D=function(){var e=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"intercept",value:function(e,t){return t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}(),N=/^\)\]\}',?\n/,H=function e(){Object(u.a)(this,e)},G=function(){var e=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}(),B=function(){var e=function(){function e(t){Object(u.a)(this,e),this.xhrFactory=t}return Object(s.a)(e,[{key:"handle",value:function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new h.a(function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach(function(e,t){return r.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var a=e.responseType.toLowerCase();r.responseType="json"!==a?a:"text"}var o=e.serializeBody(),s=null,u=function(){if(null!==s)return s;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new y(r.getAllResponseHeaders()),a=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new A({headers:i,status:t,statusText:n,url:a})},l=function(){var t=u(),i=t.headers,a=t.status,o=t.statusText,s=t.url,l=null;204!==a&&(l=void 0===r.response?r.responseText:r.response),0===a&&(a=l?200:0);var c=a>=200&&a<300;if("json"===e.responseType&&"string"==typeof l){var h=l;l=l.replace(N,"");try{l=""!==l?JSON.parse(l):null}catch(f){l=h,c&&(c=!1,l={error:f,text:l})}}c?(n.next(new C({body:l,headers:i,status:a,statusText:o,url:s||void 0})),n.complete()):n.error(new P({error:l,headers:i,status:a,statusText:o,url:s||void 0}))},c=function(e){var t=u(),i=new P({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t.url||void 0});n.error(i)},h=!1,f=function(t){h||(n.next(u()),h=!0);var i={type:E.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},d=function(e){var t={type:E.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",l),r.addEventListener("error",c),r.addEventListener("timeout",c),r.addEventListener("abort",c),e.reportProgress&&(r.addEventListener("progress",f),null!==o&&r.upload&&r.upload.addEventListener("progress",d)),r.send(o),n.next({type:E.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("abort",c),r.removeEventListener("load",l),r.removeEventListener("timeout",c),e.reportProgress&&(r.removeEventListener("progress",f),null!==o&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Qb(H))},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}(),U=new l.r("XSRF_COOKIE_NAME"),F=new l.r("XSRF_HEADER_NAME"),z=function e(){Object(u.a)(this,e)},V=function(){var e=function(){function e(t,n,r){Object(u.a)(this,e),this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return Object(s.a)(e,[{key:"getToken",value:function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(v.r)(e,this.cookieName),this.lastCookieString=e),this.lastToken}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Qb(v.c),l.Qb(l.C),l.Qb(U))},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}(),W=function(){var e=function(){function e(t,n){Object(u.a)(this,e),this.tokenService=t,this.headerName=n}return Object(s.a)(e,[{key:"intercept",value:function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Qb(z),l.Qb(F))},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}(),X=function(){var e=function(){function e(t,n){Object(u.a)(this,e),this.backend=t,this.injector=n,this.chain=null}return Object(s.a)(e,[{key:"handle",value:function(e){if(null===this.chain){var t=this.injector.get(I,[]);this.chain=t.reduceRight(function(e,t){return new R(e,t)},this.backend)}return this.chain.handle(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Qb(g),l.Qb(l.s))},e.\u0275prov=l.Bb({token:e,factory:e.\u0275fac}),e}(),q=function(){var e=function(){function e(){Object(u.a)(this,e)}return Object(s.a)(e,null,[{key:"disable",value:function(){return{ngModule:e,providers:[{provide:W,useClass:D}]}}},{key:"withOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ngModule:e,providers:[t.cookieName?{provide:U,useValue:t.cookieName}:[],t.headerName?{provide:F,useValue:t.headerName}:[]]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Db({type:e}),e.\u0275inj=l.Cb({providers:[W,{provide:I,useExisting:W,multi:!0},{provide:z,useClass:V},{provide:U,useValue:"XSRF-TOKEN"},{provide:F,useValue:"X-XSRF-TOKEN"}]}),e}(),K=function(){var e=function e(){Object(u.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Db({type:e}),e.\u0275inj=l.Cb({providers:[L,{provide:m,useClass:X},B,{provide:g,useExisting:B},G,{provide:H,useExisting:G}],imports:[[q.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),e}()},tyNb:function(e,t,n){"use strict";n.d(t,"a",function(){return Et}),n.d(t,"b",function(){return Ge}),n.d(t,"c",function(){return er}),n.d(t,"d",function(){return nr}),n.d(t,"e",function(){return rr}),n.d(t,"f",function(){return mr}),n.d(t,"g",function(){return ar}),n.d(t,"h",function(){return cr});var r=n("rePB"),i=n("JX7q"),a=n("uFwe"),o=n("KQm4"),s=n("vuIU"),u=n("Ji7U"),l=n("LK+K"),c=n("1OyB"),h=n("ofXK"),f=n("fXoL"),d=n("Cfvw"),p=n("LRne"),v=n("ReuC"),m=n("foSv"),g=n("XNiG"),y=n("9ppp"),b=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this))._value=e,r}return Object(s.a)(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=Object(v.a)(Object(m.a)(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new y.a;return this._value}},{key:"next",value:function(e){Object(v.a)(Object(m.a)(n.prototype),"next",this).call(this,this._value=e)}}]),n}(g.a),_=n("z+Ro"),x=n("DH7j"),w=n("l7GE"),T=n("ZUHj"),S=n("yCtX"),M={},O=function(){function e(t){Object(c.a)(this,e),this.resultSelector=t}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new E(e,this.resultSelector))}}]),e}(),E=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i;return Object(c.a)(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return Object(s.a)(n,[{key:"_next",value:function(e){this.values.push(M),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++){var r=e[n];this.add(Object(T.a)(this,r,r,n))}}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n,r,i){var a=this.values,o=this.toRespond?a[n]===M?--this.toRespond:this.toRespond:0;a[n]=t,0===o&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(w.a),k=n("HDdC"),A=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),C=n("bHdf");function P(){return Object(C.a)(1)}function j(){return P()(p.a.apply(void 0,arguments))}var L=n("EY2u");function R(e){return new k.a(function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?Object(d.a)(n):Object(L.b)()).subscribe(t)})}var I=n("EQ5u"),D=n("lJxs"),N=n("51Dv");function H(e,t){return"function"==typeof t?function(n){return n.pipe(H(function(n,r){return Object(d.a)(e(n,r)).pipe(Object(D.a)(function(e,i){return t(n,e,r,i)}))}))}:function(t){return t.lift(new G(e))}}var G=function(){function e(t){Object(c.a)(this,e),this.project=t}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new B(e,this.project))}}]),e}(),B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i;return Object(c.a)(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return Object(s.a)(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t,e,n)}},{key:"_innerSub",value:function(e,t,n){var r=this.innerSubscription;r&&r.unsubscribe();var i=new N.a(this,void 0,void 0);this.destination.add(i),this.innerSubscription=Object(T.a)(this,e,t,n,i)}},{key:"_complete",value:function(){var e=this.innerSubscription;e&&!e.closed||Object(v.a)(Object(m.a)(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=null}},{key:"notifyComplete",value:function(e){this.destination.remove(e),this.innerSubscription=null,this.isStopped&&Object(v.a)(Object(m.a)(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}}]),n}(w.a),U=n("7o/Q"),F=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function z(e){return function(t){return 0===e?Object(L.b)():t.lift(new V(e))}}var V=function(){function e(t){if(Object(c.a)(this,e),this.total=t,this.total<0)throw new F}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new W(e,this.total))}}]),e}(),W=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i;return Object(c.a)(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return Object(s.a)(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(U.a);function X(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new q(e,t,n))}}var q=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(c.a)(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new K(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),K=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a){var o;return Object(c.a)(this,n),(o=t.call(this,e)).accumulator=r,o._seed=i,o.hasSeed=a,o.index=0,o}return Object(s.a)(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}(U.a),Y=n("pLZG");function J(e){return function(t){var n=new Z(e),r=t.lift(n);return n.caught=r}}var Z=function(){function e(t){Object(c.a)(this,e),this.selector=t}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new Q(e,this.selector,this.caught))}}]),e}(),Q=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i){var a;return Object(c.a)(this,n),(a=t.call(this,e)).selector=r,a.caught=i,a}return Object(s.a)(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(i){return void Object(v.a)(Object(m.a)(n.prototype),"error",this).call(this,i)}this._unsubscribeAndRecycle();var r=new N.a(this,void 0,void 0);this.add(r),Object(T.a)(this,t,void 0,void 0,r)}}}]),n}(w.a),$=n("bOdf");function ee(e){return function(t){return 0===e?Object(L.b)():t.lift(new te(e))}}var te=function(){function e(t){if(Object(c.a)(this,e),this.total=t,this.total<0)throw new F}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new ne(e,this.total))}}]),e}(),ne=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i;return Object(c.a)(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return Object(s.a)(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var a=t++%n;e.next(r[a])}e.complete()}}]),n}(U.a);function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe;return function(t){return t.lift(new ie(e))}}var ie=function(){function e(t){Object(c.a)(this,e),this.errorFactory=t}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new ae(e,this.errorFactory))}}]),e}(),ae=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i;return Object(c.a)(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return Object(s.a)(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(U.a);function oe(){return new A}function se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new ue(e))}}var ue=function(){function e(t){Object(c.a)(this,e),this.defaultValue=t}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new le(e,this.defaultValue))}}]),e}(),le=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i;return Object(c.a)(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return Object(s.a)(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(U.a),ce=n("SpAZ");function he(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Object(Y.a)(function(t,n){return e(t,n,r)}):ce.a,z(1),n?se(t):re(function(){return new A}))}}var fe=n("5+tZ"),de=n("KqfI"),pe=n("n6bG");function ve(e,t,n){return function(r){return r.lift(new me(e,t,n))}}var me=function(){function e(t,n,r){Object(c.a)(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new ge(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),ge=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,a,o){var s;return Object(c.a)(this,n),(s=t.call(this,e))._tapNext=de.a,s._tapError=de.a,s._tapComplete=de.a,s._tapError=a||de.a,s._tapComplete=o||de.a,Object(pe.a)(r)?(s._context=Object(i.a)(s),s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||de.a,s._tapError=r.error||de.a,s._tapComplete=r.complete||de.a),s}return Object(s.a)(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(U.a),ye=n("x+ZX"),be=n("quSY"),_e=function(){function e(t){Object(c.a)(this,e),this.callback=t}return Object(s.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new xe(e,this.callback))}}]),e}(),xe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i;return Object(c.a)(this,n),(i=t.call(this,e)).add(new be.a(r)),i}return n}(U.a),we=function e(t,n){Object(c.a)(this,e),this.id=t,this.url=n},Te=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Object(c.a)(this,n),(i=t.call(this,e,r)).navigationTrigger=a,i.restoredState=o,i}return Object(s.a)(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(we),Se=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i){var a;return Object(c.a)(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a}return Object(s.a)(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(we),Me=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i){var a;return Object(c.a)(this,n),(a=t.call(this,e,r)).reason=i,a}return Object(s.a)(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(we),Oe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i){var a;return Object(c.a)(this,n),(a=t.call(this,e,r)).error=i,a}return Object(s.a)(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(we),Ee=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a){var o;return Object(c.a)(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return Object(s.a)(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(we),ke=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a){var o;return Object(c.a)(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return Object(s.a)(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(we),Ae=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a,o){var s;return Object(c.a)(this,n),(s=t.call(this,e,r)).urlAfterRedirects=i,s.state=a,s.shouldActivate=o,s}return Object(s.a)(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(we),Ce=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a){var o;return Object(c.a)(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return Object(s.a)(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(we),Pe=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a){var o;return Object(c.a)(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o.state=a,o}return Object(s.a)(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(we),je=function(){function e(t){Object(c.a)(this,e),this.route=t}return Object(s.a)(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),Le=function(){function e(t){Object(c.a)(this,e),this.route=t}return Object(s.a)(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Re=function(){function e(t){Object(c.a)(this,e),this.snapshot=t}return Object(s.a)(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Ie=function(){function e(t){Object(c.a)(this,e),this.snapshot=t}return Object(s.a)(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),De=function(){function e(t){Object(c.a)(this,e),this.snapshot=t}return Object(s.a)(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Ne=function(){function e(t){Object(c.a)(this,e),this.snapshot=t}return Object(s.a)(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),He=function(){function e(t,n,r){Object(c.a)(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return Object(s.a)(e,[{key:"toString",value:function(){var e=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(e,"')")}}]),e}(),Ge="primary",Be=function(){function e(t){Object(c.a)(this,e),this.params=t||{}}return Object(s.a)(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function Ue(e){return new Be(e)}function Fe(e){var t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function ze(e,t,n){var r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},a=0;a<r.length;a++){var o=r[a],s=e[a];if(o.startsWith(":"))i[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Ve(e,t){var n,r=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!r||!i||r.length!=i.length)return!1;for(var a=0;a<r.length;a++)if(!We(e[n=r[a]],t[n]))return!1;return!0}function We(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=Object(o.a)(e).sort(),r=Object(o.a)(t).sort();return n.every(function(e,t){return r[t]===e})}return e===t}function Xe(e){return Array.prototype.concat.apply([],e)}function qe(e){return e.length>0?e[e.length-1]:null}function Ke(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Ye(e){return Object(f.ob)(e)?e:Object(f.pb)(e)?Object(d.a)(Promise.resolve(e)):Object(p.a)(e)}function Je(e,t,n){return n?function(e,t){return Ve(e,t)}(e.queryParams,t.queryParams)&&Ze(e.root,t.root):function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return We(e[n],t[n])})}(e.queryParams,t.queryParams)&&Qe(e.root,t.root)}function Ze(e,t){if(!rt(e.segments,t.segments))return!1;if(e.numberOfChildren!==t.numberOfChildren)return!1;for(var n in t.children){if(!e.children[n])return!1;if(!Ze(e.children[n],t.children[n]))return!1}return!0}function Qe(e,t){return $e(e,t,t.segments)}function $e(e,t,n){if(e.segments.length>n.length)return!!rt(e.segments.slice(0,n.length),n)&&!t.hasChildren();if(e.segments.length===n.length){if(!rt(e.segments,n))return!1;for(var r in t.children){if(!e.children[r])return!1;if(!Qe(e.children[r],t.children[r]))return!1}return!0}var i=n.slice(0,e.segments.length),a=n.slice(e.segments.length);return!!rt(e.segments,i)&&!!e.children[Ge]&&$e(e.children[Ge],t,a)}var et=function(){function e(t,n,r){Object(c.a)(this,e),this.root=t,this.queryParams=n,this.fragment=r}return Object(s.a)(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ue(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return ot.serialize(this)}}]),e}(),tt=function(){function e(t,n){var r=this;Object(c.a)(this,e),this.segments=t,this.children=n,this.parent=null,Ke(n,function(e,t){return e.parent=r})}return Object(s.a)(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return st(this)}}]),e}(),nt=function(){function e(t,n){Object(c.a)(this,e),this.path=t,this.parameters=n}return Object(s.a)(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=Ue(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return pt(this)}}]),e}();function rt(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}var it=function e(){Object(c.a)(this,e)},at=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"parse",value:function(e){var t=new bt(e);return new et(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t,n,r="/".concat(ut(e.root,!0)),i=(t=e.queryParams,(n=Object.keys(t).map(function(e){var n=t[e];return Array.isArray(n)?n.map(function(t){return"".concat(ct(e),"=").concat(ct(t))}).join("&"):"".concat(ct(e),"=").concat(ct(n))})).length?"?".concat(n.join("&")):""),a="string"==typeof e.fragment?"#".concat(encodeURI(e.fragment)):"";return"".concat(r).concat(i).concat(a)}}]),e}(),ot=new at;function st(e){return e.segments.map(function(e){return pt(e)}).join("/")}function ut(e,t){if(!e.hasChildren())return st(e);if(t){var n=e.children[Ge]?ut(e.children[Ge],!1):"",r=[];return Ke(e.children,function(e,t){t!==Ge&&r.push("".concat(t,":").concat(ut(e,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(e,t){var n=[];return Ke(e.children,function(e,r){r===Ge&&(n=n.concat(t(e,r)))}),Ke(e.children,function(e,r){r!==Ge&&(n=n.concat(t(e,r)))}),n}(e,function(t,n){return n===Ge?[ut(e.children[Ge],!1)]:["".concat(n,":").concat(ut(t,!1))]});return 1===Object.keys(e.children).length&&null!=e.children[Ge]?"".concat(st(e),"/").concat(i[0]):"".concat(st(e),"/(").concat(i.join("//"),")")}function lt(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ct(e){return lt(e).replace(/%3B/gi,";")}function ht(e){return lt(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ft(e){return decodeURIComponent(e)}function dt(e){return ft(e.replace(/\+/g,"%20"))}function pt(e){return"".concat(ht(e.path)).concat((t=e.parameters,Object.keys(t).map(function(e){return";".concat(ht(e),"=").concat(ht(t[e]))}).join("")));var t}var vt=/^[^\/()?;=#]+/;function mt(e){var t=e.match(vt);return t?t[0]:""}var gt=/^[^=?&#]+/,yt=/^[^?&#]+/,bt=function(){function e(t){Object(c.a)(this,e),this.url=t,this.remaining=t}return Object(s.a)(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new tt([],{}):new tt([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[Ge]=new tt(e,t)),n}},{key:"parseSegment",value:function(){var e=mt(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new nt(ft(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=mt(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=mt(this.remaining);r&&this.capture(n=r)}e[ft(t)]=ft(n)}}},{key:"parseQueryParam",value:function(e){var t,n=(t=this.remaining.match(gt))?t[0]:"";if(n){this.capture(n);var r="";if(this.consumeOptional("=")){var i=function(e){var t=e.match(yt);return t?t[0]:""}(this.remaining);i&&this.capture(r=i)}var a=dt(n),o=dt(r);if(e.hasOwnProperty(a)){var s=e[a];Array.isArray(s)||(e[a]=s=[s]),s.push(o)}else e[a]=o}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=mt(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Ge);var a=this.parseChildren();t[i]=1===Object.keys(a).length?a[Ge]:new tt([],a),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),_t=function(){function e(t){Object(c.a)(this,e),this._root=t}return Object(s.a)(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=xt(e,this._root);return t?t.children.map(function(e){return e.value}):[]}},{key:"firstChild",value:function(e){var t=xt(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=wt(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})}},{key:"pathFromRoot",value:function(e){return wt(e,this._root).map(function(e){return e.value})}}]),e}();function xt(e,t){if(e===t.value)return t;var n,r=Object(a.a)(t.children);try{for(r.s();!(n=r.n()).done;){var i=xt(e,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function wt(e,t){if(e===t.value)return[t];var n,r=Object(a.a)(t.children);try{for(r.s();!(n=r.n()).done;){var i=wt(e,n.value);if(i.length)return i.unshift(t),i}}catch(o){r.e(o)}finally{r.f()}return[]}var Tt=function(){function e(t,n){Object(c.a)(this,e),this.value=t,this.children=n}return Object(s.a)(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function St(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var Mt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this,e)).snapshot=r,jt(Object(i.a)(a),e),a}return Object(s.a)(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(_t);function Ot(e,t){var n=function(e,t){var n=new Ct([],{},{},"",{},Ge,t,null,e.root,-1,{});return new Pt("",new Tt(n,[]))}(e,t),r=new b([new nt("",{})]),i=new b({}),a=new b({}),o=new b({}),s=new b(""),u=new Et(r,i,o,s,a,Ge,t,n.root);return u.snapshot=n.root,new Mt(new Tt(u,[]),n)}var Et=function(){function e(t,n,r,i,a,o,s,u){Object(c.a)(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this._futureSnapshot=u}return Object(s.a)(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe(Object(D.a)(function(e){return Ue(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(D.a)(function(e){return Ue(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],a=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return At(n.slice(r))}function At(e){return e.reduce(function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}var Ct=function(){function e(t,n,r,i,a,o,s,u,l,h,f){Object(c.a)(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this.routeConfig=u,this._urlSegment=l,this._lastPathIndex=h,this._resolve=f}return Object(s.a)(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=Ue(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=Ue(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){var e=this.url.map(function(e){return e.toString()}).join("/"),t=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(e,"', path:'").concat(t,"')")}}]),e}(),Pt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r){var a;return Object(c.a)(this,n),(a=t.call(this,r)).url=e,jt(Object(i.a)(a),r),a}return Object(s.a)(n,[{key:"toString",value:function(){return Lt(this._root)}}]),n}(_t);function jt(e,t){t.value._routerState=e,t.children.forEach(function(t){return jt(e,t)})}function Lt(e){var t=e.children.length>0?" { ".concat(e.children.map(Lt).join(", ")," } "):"";return"".concat(e.value).concat(t)}function Rt(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ve(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Ve(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!Ve(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Ve(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function It(e,t){var n,r;return Ve(e.params,t.params)&&rt(n=e.url,r=t.url)&&n.every(function(e,t){return Ve(e.parameters,r[t].parameters)})&&!(!e.parent!=!t.parent)&&(!e.parent||It(e.parent,t.parent))}function Dt(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=t.value;var i=function(e,t,n){return t.children.map(function(t){var r,i=Object(a.a)(n.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(e.shouldReuseRoute(t.value,o.value.snapshot))return Dt(e,t,o)}}catch(s){i.e(s)}finally{i.f()}return Dt(e,t)})}(e,t,n);return new Tt(r,i)}if(e.shouldAttach(t.value)){var o=e.retrieve(t.value);if(null!==o){var s=o.route;return Nt(t,s),s}}var u,l=new Et(new b((u=t.value).url),new b(u.params),new b(u.queryParams),new b(u.fragment),new b(u.data),u.outlet,u.component,u),c=t.children.map(function(t){return Dt(e,t)});return new Tt(l,c)}function Nt(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(var n=0;n<e.children.length;++n)Nt(e.children[n],t.children[n])}function Ht(e,t,n,r,i){if(0===n.length)return Ut(t.root,t.root,t,r,i);var a=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new zt(!0,0,e);var t=0,n=!1,r=e.reduce(function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var a={};return Ke(r.outlets,function(e,t){a[t]="string"==typeof e?e.split("/"):e}),[].concat(Object(o.a)(e),[{outlets:a}])}if(r.segmentPath)return[].concat(Object(o.a)(e),[r.segmentPath])}return"string"!=typeof r?[].concat(Object(o.a)(e),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[].concat(Object(o.a)(e),[r])},[]);return new zt(n,t,r)}(n);if(a.toRoot())return Ut(t.root,new tt([],{}),t,r,i);var s=function(e,t,n){if(e.isAbsolute)return new Vt(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new Vt(r,r===t.root,0)}var i=Gt(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,a=n;a>i;){if(a-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new Vt(r,!1,i-a)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(a,t,e),u=s.processChildren?Xt(s.segmentGroup,s.index,a.commands):Wt(s.segmentGroup,s.index,a.commands);return Ut(s.segmentGroup,u,t,r,i)}function Gt(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Bt(e){return"object"==typeof e&&null!=e&&e.outlets}function Ut(e,t,n,r,i){var a={};return r&&Ke(r,function(e,t){a[t]=Array.isArray(e)?e.map(function(e){return"".concat(e)}):"".concat(e)}),new et(n.root===e?t:Ft(n.root,e,t),a,i)}function Ft(e,t,n){var r={};return Ke(e.children,function(e,i){r[i]=e===t?n:Ft(e,t,n)}),new tt(e.segments,r)}var zt=function(){function e(t,n,r){if(Object(c.a)(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Gt(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(Bt);if(i&&i!==qe(r))throw new Error("{outlets:{}} has to be the last command")}return Object(s.a)(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),Vt=function e(t,n,r){Object(c.a)(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function Wt(e,t,n){if(e||(e=new tt([],{})),0===e.segments.length&&e.hasChildren())return Xt(e,t,n);var r=function(e,t,n){for(var r=0,i=t,a={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return a;var o=e.segments[i],s=n[r];if(Bt(s))break;var u="".concat(s),l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&l&&"object"==typeof l&&void 0===l.outlets){if(!Jt(u,l,o))return a;r+=2}else{if(!Jt(u,{},o))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var a=new tt(e.segments.slice(0,r.pathIndex),{});return a.children[Ge]=new tt(e.segments.slice(r.pathIndex),e.children),Xt(a,0,i)}return r.match&&0===i.length?new tt(e.segments,{}):r.match&&!e.hasChildren()?qt(e,t,n):r.match?Xt(e,0,i):qt(e,t,n)}function Xt(e,t,n){if(0===n.length)return new tt(e.segments,{});var i=function(e){return Bt(e[0])?e[0].outlets:Object(r.a)({},Ge,e)}(n),a={};return Ke(i,function(n,r){"string"==typeof n&&(n=[n]),null!==n&&(a[r]=Wt(e.children[r],t,n))}),Ke(e.children,function(e,t){void 0===i[t]&&(a[t]=e)}),new tt(e.segments,a)}function qt(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){var a=n[i];if(Bt(a)){var o=Kt(a.outlets);return new tt(r,o)}if(0===i&&Gt(n[0]))r.push(new nt(e.segments[t].path,Yt(n[0]))),i++;else{var s=Bt(a)?a.outlets[Ge]:"".concat(a),u=i<n.length-1?n[i+1]:null;s&&u&&Gt(u)?(r.push(new nt(s,Yt(u))),i+=2):(r.push(new nt(s,{})),i++)}}return new tt(r,{})}function Kt(e){var t={};return Ke(e,function(e,n){"string"==typeof e&&(e=[e]),null!==e&&(t[n]=qt(new tt([],{}),0,e))}),t}function Yt(e){var t={};return Ke(e,function(e,n){return t[n]="".concat(e)}),t}function Jt(e,t,n){return e==n.path&&Ve(t,n.parameters)}var Zt=function(){function e(t,n,r,i){Object(c.a)(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return Object(s.a)(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Rt(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=St(t);e.children.forEach(function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]}),Ke(i,function(e,t){r.deactivateRouteAndItsChildren(e,n)})}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){for(var n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=St(e),a=0,o=Object.keys(i);a<o.length;a++)this.deactivateRouteAndItsChildren(i[o[a]],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=St(t);e.children.forEach(function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new Ne(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Ie(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(Rt(r),r===i)if(r.component){var a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var s=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Qt(s.route)}else{var u=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),l=u?u.module.componentFactoryResolver:null;o.attachRef=null,o.route=r,o.resolver=l,o.outlet&&o.outlet.activateWith(r,l),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function Qt(e){Rt(e.value),e.children.forEach(Qt)}var $t=function e(t,n){Object(c.a)(this,e),this.routes=t,this.module=n};function en(e){return"function"==typeof e}function tn(e){return e instanceof et}var nn=Symbol("INITIAL_VALUE");function rn(){return H(function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=null,i=null;return Object(_.a)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&Object(x.a)(t[0])&&(t=t[0]),Object(S.a)(t,i).lift(new O(r))}(e.map(function(e){return e.pipe(z(1),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return Object(_.a)(r)?(t.pop(),function(e){return j(t,e,r)}):function(e){return j(t,e)}}(nn))})).pipe(X(function(e,t){var n=!1;return t.reduce(function(e,r,i){if(e!==nn)return e;if(r===nn&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||tn(r))return r}return e},e)},nn),Object(Y.a)(function(e){return e!==nn}),Object(D.a)(function(e){return tn(e)?e:!0===e}),z(1))})}var an=function(){var e=function e(){Object(c.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=f.zb({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&f.Gb(0,"router-outlet")},directives:function(){return[ar]},encapsulation:2}),e}();function on(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n],i=un(t,r);sn(r,i)}}function sn(e,t){e.children&&on(e.children,t)}function un(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function ln(e){var t=e.children&&e.children.map(ln),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Ge&&(n.component=an),n}function cn(e){return e.outlet||Ge}function hn(e,t){var n=e.filter(function(e){return cn(e)===t});return n.push.apply(n,Object(o.a)(e.filter(function(e){return cn(e)!==t}))),n}var fn={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function dn(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},fn):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(t.matcher||ze)(n,e,t);if(!i)return Object.assign({},fn);var a={};Ke(i.posParams,function(e,t){a[t]=e.path});var o=i.consumed.length>0?Object.assign(Object.assign({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function pn(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&gn(e,n,r)){var a=new tt(t,mn(e,t,r,new tt(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&yn(e,n,r)){var o=new tt(e.segments,vn(e,t,n,r,e.children,i));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:n}}var s=new tt(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function vn(e,t,n,r,i,o){var s,u={},l=Object(a.a)(r);try{for(l.s();!(s=l.n()).done;){var c=s.value;if(bn(e,n,c)&&!i[cn(c)]){var h=new tt([],{});h._sourceSegment=e,h._segmentIndexShift="legacy"===o?e.segments.length:t.length,u[cn(c)]=h}}}catch(f){l.e(f)}finally{l.f()}return Object.assign(Object.assign({},i),u)}function mn(e,t,n,r){var i={};i[Ge]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var o,s=Object(a.a)(n);try{for(s.s();!(o=s.n()).done;){var u=o.value;if(""===u.path&&cn(u)!==Ge){var l=new tt([],{});l._sourceSegment=e,l._segmentIndexShift=t.length,i[cn(u)]=l}}}catch(c){s.e(c)}finally{s.f()}return i}function gn(e,t,n){return n.some(function(n){return bn(e,t,n)&&cn(n)!==Ge})}function yn(e,t,n){return n.some(function(n){return bn(e,t,n)})}function bn(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function _n(e,t,n,r){return!!(cn(e)===r||r!==Ge&&bn(t,n,e))&&("**"===e.path||dn(t,e,n).matched)}function xn(e,t,n){return 0===t.length&&!e.children[n]}var wn=function e(t){Object(c.a)(this,e),this.segmentGroup=t||null},Tn=function e(t){Object(c.a)(this,e),this.urlTree=t};function Sn(e){return new k.a(function(t){return t.error(new wn(e))})}function Mn(e){return new k.a(function(t){return t.error(new Tn(e))})}function On(e){return new k.a(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))})}var En=function(){function e(t,n,r,i,a){Object(c.a)(this,e),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=t.get(f.y)}return Object(s.a)(e,[{key:"apply",value:function(){var e=this,t=pn(this.urlTree.root,[],[],this.config).segmentGroup,n=new tt(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,Ge).pipe(Object(D.a)(function(t){return e.createUrlTree(kn(t),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(J(function(t){if(t instanceof Tn)return e.allowRedirects=!1,e.match(t.urlTree);if(t instanceof wn)throw e.noMatchError(t);throw t}))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ge).pipe(Object(D.a)(function(n){return t.createUrlTree(kn(n),e.queryParams,e.fragment)})).pipe(J(function(e){if(e instanceof wn)throw t.noMatchError(e);throw e}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(e,t,n){var i=e.segments.length>0?new tt([],Object(r.a)({},Ge,e)):e;return new et(i,t,n)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Object(D.a)(function(e){return new tt([],e)})):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){for(var r=this,i=[],a=0,o=Object.keys(n.children);a<o.length;a++){var s=o[a];"primary"===s?i.unshift(s):i.push(s)}return Object(d.a)(i).pipe(Object($.a)(function(i){var a=n.children[i],o=hn(t,i);return r.expandSegmentGroup(e,o,a,i).pipe(Object(D.a)(function(e){return{segment:e,outlet:i}}))}),X(function(e,t){return e[t.outlet]=t.segment,e},{}),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Object(Y.a)(function(t,n){return e(t,n,r)}):ce.a,ee(1),n?se(t):re(function(){return new A}))}}())}},{key:"expandSegment",value:function(e,t,n,r,i,a){var o=this;return Object(d.a)(n).pipe(Object($.a)(function(s){return o.expandSegmentAgainstRoute(e,t,n,s,r,i,a).pipe(J(function(e){if(e instanceof wn)return Object(p.a)(null);throw e}))}),he(function(e){return!!e}),J(function(e,n){if(e instanceof A||"EmptyError"===e.name){if(xn(t,r,i))return Object(p.a)(new tt([],{}));throw new wn(t)}throw e}))}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,a,o){return _n(r,t,i,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,a):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a):Sn(t):Sn(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,a)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,a=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Mn(a):this.lineralizeSegments(n,a).pipe(Object(fe.a)(function(n){var a=new tt(n,{});return i.expandSegment(e,a,t,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,a){var o=this,s=dn(t,r,i),u=s.consumedSegments,l=s.lastChild,c=s.positionalParamSegments;if(!s.matched)return Sn(t);var h=this.applyRedirectCommands(u,r.redirectTo,c);return r.redirectTo.startsWith("/")?Mn(h):this.lineralizeSegments(r,h).pipe(Object(fe.a)(function(r){return o.expandSegment(e,t,n,r.concat(i.slice(l)),a,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r,i){var a=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(p.a)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe(Object(D.a)(function(e){return n._loadedConfig=e,new tt(r,{})})):Object(p.a)(new tt(r,{}));var o=dn(t,n,r),s=o.consumedSegments,u=o.lastChild;if(!o.matched)return Sn(t);var l=r.slice(u);return this.getChildConfig(e,n,r).pipe(Object(fe.a)(function(e){var r=e.module,o=e.routes,u=pn(t,s,l,o),c=u.segmentGroup,h=u.slicedSegments,f=new tt(c.segments,c.children);if(0===h.length&&f.hasChildren())return a.expandChildren(r,o,f).pipe(Object(D.a)(function(e){return new tt(s,e)}));if(0===o.length&&0===h.length)return Object(p.a)(new tt(s,{}));var d=cn(n)===i;return a.expandSegment(r,f,o,h,d?Ge:i,!0).pipe(Object(D.a)(function(e){return new tt(s.concat(e.segments),e.children)}))}))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?Object(p.a)(new $t(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?Object(p.a)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe(Object(fe.a)(function(n){return n?r.configLoader.load(e.injector,t).pipe(Object(D.a)(function(e){return t._loadedConfig=e,e})):function(e){return new k.a(function(t){return t.error(Fe("Cannot load children because the guard of the route \"path: '".concat(e.path,"'\" returned false")))})}(t)})):Object(p.a)(new $t([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var r=this,i=t.canLoad;if(!i||0===i.length)return Object(p.a)(!0);var a=i.map(function(r){var i,a=e.get(r);if(function(e){return e&&en(e.canLoad)}(a))i=a.canLoad(t,n);else{if(!en(a))throw new Error("Invalid CanLoad guard");i=a(t,n)}return Ye(i)});return Object(p.a)(a).pipe(rn(),ve(function(e){if(tn(e)){var t=Fe('Redirecting to "'.concat(r.urlSerializer.serialize(e),'"'));throw t.url=e,t}}),Object(D.a)(function(e){return!0===e}))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(p.a)(n);if(r.numberOfChildren>1||!r.children[Ge])return On(e.redirectTo);r=r.children[Ge]}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new et(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return Ke(e,function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,a=this.createSegments(e,t.segments,n,r),o={};return Ke(t.children,function(t,a){o[a]=i.createSegmentGroup(e,t,n,r)}),new tt(a,o)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map(function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)})}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=Object(a.a)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===e.path)return t.splice(r),o;r++}}catch(s){i.e(s)}finally{i.f()}return e}}]),e}();function kn(e){for(var t={},n=0,r=Object.keys(e.children);n<r.length;n++){var i=r[n],a=kn(e.children[i]);(a.segments.length>0||a.hasChildren())&&(t[i]=a)}return function(e){if(1===e.numberOfChildren&&e.children[Ge]){var t=e.children[Ge];return new tt(e.segments.concat(t.segments),t.children)}return e}(new tt(e.segments,t))}var An=function e(t){Object(c.a)(this,e),this.path=t,this.route=this.path[this.path.length-1]},Cn=function e(t,n){Object(c.a)(this,e),this.component=t,this.route=n};function Pn(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function jn(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=St(t);return e.children.forEach(function(e){Ln(e,a[e.value.outlet],n,r.concat([e.value]),i),delete a[e.value.outlet]}),Ke(a,function(e,t){return In(e,n.getContext(t),i)}),i}function Ln(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},a=e.value,o=t?t.value:null,s=n?n.getContext(e.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){var u=Rn(o,a,a.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new An(r)):(a.data=o.data,a._resolvedData=o._resolvedData),jn(e,t,a.component?s?s.children:null:n,r,i),u&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new Cn(s.outlet.component,o))}else o&&In(t,s,i),i.canActivateChecks.push(new An(r)),jn(e,null,a.component?s?s.children:null:n,r,i);return i}function Rn(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!rt(e.url,t.url);case"pathParamsOrQueryParamsChange":return!rt(e.url,t.url)||!Ve(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!It(e,t)||!Ve(e.queryParams,t.queryParams);case"paramsChange":default:return!It(e,t)}}function In(e,t,n){var r=St(e),i=e.value;Ke(r,function(e,r){In(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Cn(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var Dn=function e(){Object(c.a)(this,e)};function Nn(e){return new k.a(function(t){return t.error(e)})}var Hn=function(){function e(t,n,r,i,a,o){Object(c.a)(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=o}return Object(s.a)(e,[{key:"recognize",value:function(){var e=pn(this.urlTree.root,[],[],this.config.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ge);if(null===t)return null;var n=new Ct([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ge,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Tt(n,t),i=new Pt(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=kt(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){for(var n=[],r=0,i=Object.keys(t.children);r<i.length;r++){var a=i[r],s=t.children[a],u=hn(e,a),l=this.processSegmentGroup(u,s,a);if(null===l)return null;n.push.apply(n,Object(o.a)(l))}var c=Gn(n);return c.sort(function(e,t){return e.value.outlet===Ge?-1:t.value.outlet===Ge?1:e.value.outlet.localeCompare(t.value.outlet)}),c}},{key:"processSegment",value:function(e,t,n,r){var i,o=Object(a.a)(e);try{for(o.s();!(i=o.n()).done;){var s=this.processSegmentAgainstRoute(i.value,t,n,r);if(null!==s)return s}}catch(u){o.e(u)}finally{o.f()}return xn(t,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo||!_n(e,t,n,r))return null;var i,a=[],o=[];if("**"===e.path){var s=n.length>0?qe(n).parameters:{};i=new Ct(n,s,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Fn(e),cn(e),e.component,e,Bn(t),Un(t)+n.length,zn(e))}else{var u=dn(t,e,n);if(!u.matched)return null;a=u.consumedSegments,o=n.slice(u.lastChild),i=new Ct(a,u.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Fn(e),cn(e),e.component,e,Bn(t),Un(t)+a.length,zn(e))}var l=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),c=pn(t,a,o,l.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution),h=c.segmentGroup,f=c.slicedSegments;if(0===f.length&&h.hasChildren()){var d=this.processChildren(l,h);return null===d?null:[new Tt(i,d)]}if(0===l.length&&0===f.length)return[new Tt(i,[])];var p=cn(e)===r,v=this.processSegment(l,h,f,p?Ge:r);return null===v?null:[new Tt(i,v)]}}]),e}();function Gn(e){var t,n=[],r=new Set,i=Object(a.a)(e);try{var s=function(){var e=t.value;if(!function(e){var t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}(e))return n.push(e),"continue";var i,a=n.find(function(t){return e.value.routeConfig===t.value.routeConfig});void 0!==a?((i=a.children).push.apply(i,Object(o.a)(e.children)),r.add(a)):n.push(e)};for(i.s();!(t=i.n()).done;)s()}catch(f){i.e(f)}finally{i.f()}var u,l=Object(a.a)(r);try{for(l.s();!(u=l.n()).done;){var c=u.value,h=Gn(c.children);n.push(new Tt(c.value,h))}}catch(f){l.e(f)}finally{l.f()}return n.filter(function(e){return!r.has(e)})}function Bn(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function Un(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Fn(e){return e.data||{}}function zn(e){return e.resolve||{}}function Vn(e){return H(function(t){var n=e(t);return n?Object(d.a)(n).pipe(Object(D.a)(function(){return t})):Object(p.a)(t)})}var Wn=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return n}(function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),Xn=new f.r("ROUTES"),qn=function(){function e(t,n,r,i){Object(c.a)(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return Object(s.a)(e,[{key:"load",value:function(e,t){var n=this;if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);var r=this.loadModuleFactory(t.loadChildren).pipe(Object(D.a)(function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new $t(Xe(i.injector.get(Xn,void 0,f.q.Self|f.q.Optional)).map(ln),i)}),J(function(e){throw t._loader$=void 0,e}));return t._loader$=new I.a(r,function(){return new g.a}).pipe(Object(ye.a)()),t._loader$}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?Object(d.a)(this.loader.load(e)):Ye(e()).pipe(Object(fe.a)(function(e){return e instanceof f.w?Object(p.a)(e):Object(d.a)(t.compiler.compileModuleAsync(e))}))}}]),e}(),Kn=function e(){Object(c.a)(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new Yn,this.attachRef=null},Yn=function(){function e(){Object(c.a)(this,e),this.contexts=new Map}return Object(s.a)(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new Kn,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),Jn=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function Zn(e){throw e}function Qn(e,t,n){return t.parse("/")}function $n(e,t){return Object(p.a)(null)}var er=function(){var e=function(){function e(t,n,r,i,a,o,s,u){var l=this;Object(c.a)(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new g.a,this.errorHandler=Zn,this.malformedUriErrorHandler=Qn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$n,afterPreactivation:$n},this.urlHandlingStrategy=new Jn,this.routeReuseStrategy=new Wn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=a.get(f.y),this.console=a.get(f.V);var h=a.get(f.A);this.isNgZoneEnabled=h instanceof f.A&&f.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new et(new tt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new qn(o,s,function(e){return l.triggerEvent(new je(e))},function(e){return l.triggerEvent(new Le(e))}),this.routerState=Ot(this.currentUrlTree,this.rootComponentType),this.transitions=new b({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return Object(s.a)(e,[{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(Object(Y.a)(function(e){return 0!==e.id}),Object(D.a)(function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),H(function(e){var r,i,a,o,s=!1,u=!1;return Object(p.a)(e).pipe(ve(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}}),H(function(e){var r,i,a,o,s=!t.navigated||e.extractedUrl.toString()!==t.browserUrlTree.toString();if(("reload"===t.onSameUrlNavigation||s)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return Object(p.a)(e).pipe(H(function(e){var r=t.transitions.getValue();return n.next(new Te(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?L.a:Promise.resolve(e)}),(r=t.ngModule.injector,i=t.configLoader,a=t.urlSerializer,o=t.config,H(function(e){return function(e,t,n,r,i){return new En(e,t,n,r,i).apply()}(r,i,a,e.extractedUrl,o).pipe(Object(D.a)(function(t){return Object.assign(Object.assign({},e),{urlAfterRedirects:t})}))})),ve(function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,r,i,a){return Object(fe.a)(function(r){return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var o=new Hn(e,t,n,r,i,a).recognize();return null===o?Nn(new Dn):Object(p.a)(o)}catch(s){return Nn(s)}}(e,n,r.urlAfterRedirects,(o=r.urlAfterRedirects,t.serializeUrl(o)),i,a).pipe(Object(D.a)(function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})}));var o})}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),ve(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects);var r=new Ee(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)}));if(s&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var u=e.extractedUrl,l=e.source,c=e.restoredState,h=e.extras,f=new Te(e.id,t.serializeUrl(u),l,c);n.next(f);var d=Ot(u,t.rootComponentType).snapshot;return Object(p.a)(Object.assign(Object.assign({},e),{targetSnapshot:d,urlAfterRedirects:u,extras:Object.assign(Object.assign({},h),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),L.a}),Vn(function(e){var n=e.extras;return t.hooks.beforePreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),ve(function(e){var n=new ke(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),Object(D.a)(function(e){return Object.assign(Object.assign({},e),{guards:(n=e.targetSnapshot,r=e.currentSnapshot,i=t.rootContexts,a=n._root,jn(a,r?r._root:null,i,[a.value]))});var n,r,i,a}),function(e,t){return Object(fe.a)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,a=n.guards,o=a.canActivateChecks,s=a.canDeactivateChecks;return 0===s.length&&0===o.length?Object(p.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return Object(d.a)(e).pipe(Object(fe.a)(function(e){return function(e,t,n,r,i){var a=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!a||0===a.length)return Object(p.a)(!0);var o=a.map(function(a){var o,s=Pn(a,t,i);if(function(e){return e&&en(e.canDeactivate)}(s))o=Ye(s.canDeactivate(e,t,n,r));else{if(!en(s))throw new Error("Invalid CanDeactivate guard");o=Ye(s(e,t,n,r))}return o.pipe(he())});return Object(p.a)(o).pipe(rn())}(e.component,e.route,n,t,r)}),he(function(e){return!0!==e},!0))}(s,r,i,e).pipe(Object(fe.a)(function(n){return n&&"boolean"==typeof n?function(e,t,n,r){return Object(d.a)(t).pipe(Object($.a)(function(t){return j(function(e,t){return null!==e&&t&&t(new Re(e)),Object(p.a)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new De(e)),Object(p.a)(!0)}(t.route,r),function(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return R(function(){var i=t.guards.map(function(i){var a,o=Pn(i,t.node,n);if(function(e){return e&&en(e.canActivateChild)}(o))a=Ye(o.canActivateChild(r,e));else{if(!en(o))throw new Error("Invalid CanActivateChild guard");a=Ye(o(r,e))}return a.pipe(he())});return Object(p.a)(i).pipe(rn())})});return Object(p.a)(i).pipe(rn())}(e,t.path,n),function(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return Object(p.a)(!0);var i=r.map(function(r){return R(function(){var i,a=Pn(r,t,n);if(function(e){return e&&en(e.canActivate)}(a))i=Ye(a.canActivate(t,e));else{if(!en(a))throw new Error("Invalid CanActivate guard");i=Ye(a(t,e))}return i.pipe(he())})});return Object(p.a)(i).pipe(rn())}(e,t.route,n))}),he(function(e){return!0!==e},!0))}(r,o,e,t):Object(p.a)(n)}),Object(D.a)(function(e){return Object.assign(Object.assign({},n),{guardsResult:e})}))})}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),ve(function(e){if(tn(e.guardsResult)){var n=Fe('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}var r=new Ae(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(r)}),Object(Y.a)(function(e){if(!e.guardsResult){t.resetUrlToCurrentUrlTree();var r=new Me(e.id,t.serializeUrl(e.extractedUrl),"");return n.next(r),e.resolve(!1),!1}return!0}),Vn(function(e){if(e.guards.canActivateChecks.length)return Object(p.a)(e).pipe(ve(function(e){var n=new Ce(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),H(function(e){var r,i,a=!1;return Object(p.a)(e).pipe((r=t.paramsInheritanceStrategy,i=t.ngModule.injector,Object(fe.a)(function(e){var t=e.targetSnapshot,n=e.guards.canActivateChecks;if(!n.length)return Object(p.a)(e);var a=0;return Object(d.a)(n).pipe(Object($.a)(function(e){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return Object(p.a)({});var a={};return Object(d.a)(i).pipe(Object(fe.a)(function(i){return function(e,t,n,r){var i=Pn(e,t,r);return Ye(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe(ve(function(e){a[i]=e}))}),ee(1),Object(fe.a)(function(){return Object.keys(a).length===i.length?Object(p.a)(a):L.a}))}(e._resolve,e,t,r).pipe(Object(D.a)(function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),kt(e,n).resolve),null}))}(e.route,t,r,i)}),ve(function(){return a++}),ee(1),Object(fe.a)(function(t){return a===n.length?Object(p.a)(e):L.a}))})),ve({next:function(){return a=!0},complete:function(){if(!a){var r=new Me(e.id,t.serializeUrl(e.extractedUrl),"At least one route resolver didn't emit any value.");n.next(r),e.resolve(!1)}}}))}),ve(function(e){var n=new Pe(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}))}),Vn(function(e){var n=e.extras;return t.hooks.afterPreactivation(e.targetSnapshot,{navigationId:e.id,appliedUrlTree:e.extractedUrl,rawUrlTree:e.rawUrl,skipLocationChange:!!n.skipLocationChange,replaceUrl:!!n.replaceUrl})}),Object(D.a)(function(e){var n,r,i,a=(i=Dt(t.routeReuseStrategy,(n=e.targetSnapshot)._root,(r=e.currentRouterState)?r._root:void 0),new Mt(i,n));return Object.assign(Object.assign({},e),{targetRouterState:a})}),ve(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(t.currentUrlTree,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,!!e.extras.replaceUrl,e.id,e.extras.state),t.browserUrlTree=e.urlAfterRedirects)}),(i=t.rootContexts,a=t.routeReuseStrategy,o=function(e){return t.triggerEvent(e)},Object(D.a)(function(e){return new Zt(a,e.targetRouterState,e.currentRouterState,o).activate(i),e})),ve({next:function(){s=!0},complete:function(){s=!0}}),(r=function(){if(!s&&!u){t.resetUrlToCurrentUrlTree();var r=new Me(e.id,t.serializeUrl(e.extractedUrl),"Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId));n.next(r),e.resolve(!1)}t.currentNavigation=null},function(e){return e.lift(new _e(r))}),J(function(r){if(u=!0,(s=r)&&s.ngNavigationCancelingError){var i=tn(r.url);i||(t.navigated=!0,t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl));var a=new Me(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(a),i?setTimeout(function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree);t.scheduleNavigation(n,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{t.resetStateAndUrl(e.currentRouterState,e.currentUrlTree,e.rawUrl);var o=new Oe(e.id,t.serializeUrl(e.extractedUrl),r);n.next(o);try{e.resolve(t.errorHandler(r))}catch(l){e.reject(l)}}var s;return L.a}))}))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout(function(){var t=n.source,r=n.state,i=n.urlTree,a={replaceUrl:!0};if(r){var o=Object.assign({},r);delete o.navigationId,0!==Object.keys(o).length&&(a.state=o)}e.scheduleNavigation(i,t,r,a)},0),e.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){on(e),this.config=e.map(ln),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,a=t.queryParamsHandling,o=t.preserveFragment,s=n||this.routerState.root,u=o?this.currentUrlTree.fragment:i,l=null;switch(a){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),Ht(s,this.currentUrlTree,e,l,u)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=tn(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return tr(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){if(tn(e))return Je(this.currentUrlTree,e,t);var n=this.parseUrl(e);return Je(this.currentUrlTree,n,t)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return null!=r&&(t[n]=r),t},{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.events.next(new Se(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ")})}},{key:"scheduleNavigation",value:function(e,t,n,r,i){if(this.disposed)return Promise.resolve(!1);var a,o,s,u=this.getTransition(),l="imperative"!==t&&"imperative"===(null==u?void 0:u.source),c=(this.lastSuccessfulId===u.id||this.currentNavigation?u.rawUrl:u.urlAfterRedirects).toString()===e.toString();if(l&&c)return Promise.resolve(!0);i?(a=i.resolve,o=i.reject,s=i.promise):s=new Promise(function(e,t){a=e,o=t});var h=++this.navigationId;return this.setTransition({id:h,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:a,reject:o,promise:s,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),s.catch(function(e){return Promise.reject(e)})}},{key:"setBrowserUrl",value:function(e,t,n,r){var i=this.urlSerializer.serialize(e);r=r||{},this.location.isCurrentPathEqualTo(i)||t?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}},{key:"resetStateAndUrl",value:function(e,t,n){this.routerState=e,this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Qb(f.N),f.Qb(it),f.Qb(Yn),f.Qb(h.f),f.Qb(f.s),f.Qb(f.x),f.Qb(f.i),f.Qb(void 0))},e.\u0275prov=f.Bb({token:e,factory:e.\u0275fac}),e}();function tr(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}var nr=function(){var e=function(){function e(t,n,r,i,a){Object(c.a)(this,e),this.router=t,this.route=n,this.commands=[],this.onChanges=new g.a,null==r&&i.setAttribute(a.nativeElement,"tabindex","0")}return Object(s.a)(e,[{key:"ngOnChanges",value:function(e){this.onChanges.next(this)}},{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"onClick",value:function(){var e={skipLocationChange:ir(this.skipLocationChange),replaceUrl:ir(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ir(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Fb(er),f.Fb(Et),f.Rb("tabindex"),f.Fb(f.E),f.Fb(f.l))},e.\u0275dir=f.Ab({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&f.Tb("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.vb]}),e}(),rr=function(){var e=function(){function e(t,n,r){var i=this;Object(c.a)(this,e),this.router=t,this.route=n,this.locationStrategy=r,this.commands=[],this.onChanges=new g.a,this.subscription=t.events.subscribe(function(e){e instanceof Se&&i.updateTargetUrlAndHref()})}return Object(s.a)(e,[{key:"routerLink",set:function(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}},{key:"ngOnChanges",value:function(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}},{key:"ngOnDestroy",value:function(){this.subscription.unsubscribe()}},{key:"onClick",value:function(e,t,n,r,i){if(0!==e||t||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;var a={skipLocationChange:ir(this.skipLocationChange),replaceUrl:ir(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}},{key:"updateTargetUrlAndHref",value:function(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}},{key:"urlTree",get:function(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ir(this.preserveFragment)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Fb(er),f.Fb(Et),f.Fb(h.g))},e.\u0275dir=f.Ab({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&f.Tb("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(f.Mb("href",t.href,f.fc),f.xb("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[f.vb]}),e}();function ir(e){return""===e||!!e}var ar=function(){var e=function(){function e(t,n,r,i,a){Object(c.a)(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.n,this.deactivateEvents=new f.n,this.name=i||Ge,t.onChildOutletCreated(this.name,this)}return Object(s.a)(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new or(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Fb(Yn),f.Fb(f.P),f.Fb(f.j),f.Rb("name"),f.Fb(f.h))},e.\u0275dir=f.Ab({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),or=function(){function e(t,n,r){Object(c.a)(this,e),this.route=t,this.childContexts=n,this.parent=r}return Object(s.a)(e,[{key:"get",value:function(e,t){return e===Et?this.route:e===Yn?this.childContexts:this.parent.get(e,t)}}]),e}(),sr=function e(){Object(c.a)(this,e)},ur=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"preload",value:function(e,t){return t().pipe(J(function(){return Object(p.a)(null)}))}}]),e}(),lr=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"preload",value:function(e,t){return Object(p.a)(null)}}]),e}(),cr=function(){var e=function(){function e(t,n,r,i,a){Object(c.a)(this,e),this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new qn(n,r,function(e){return t.triggerEvent(new je(e))},function(e){return t.triggerEvent(new Le(e))})}return Object(s.a)(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(Object(Y.a)(function(e){return e instanceof Se}),Object($.a)(function(){return e.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var e=this.injector.get(f.y);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=Object(a.a)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var s=o._loadedConfig;r.push(this.processRoutes(s.module,s.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(e,o)):o.children&&r.push(this.processRoutes(e,o.children))}}catch(u){i.e(u)}finally{i.f()}return Object(d.a)(r).pipe(Object(C.a)(),Object(D.a)(function(e){}))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return(t._loadedConfig?Object(p.a)(t._loadedConfig):n.loader.load(e.injector,t)).pipe(Object(fe.a)(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Qb(er),f.Qb(f.x),f.Qb(f.i),f.Qb(f.s),f.Qb(sr))},e.\u0275prov=f.Bb({token:e,factory:e.\u0275fac}),e}(),hr=function(){var e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(c.a)(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return Object(s.a)(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Te?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Se&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof He&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new He(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Qb(er),f.Qb(h.m),f.Qb(void 0))},e.\u0275prov=f.Bb({token:e,factory:e.\u0275fac}),e}(),fr=new f.r("ROUTER_CONFIGURATION"),dr=new f.r("ROUTER_FORROOT_GUARD"),pr=[h.f,{provide:it,useClass:at},{provide:er,useFactory:function(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},u=arguments.length>8?arguments[8]:void 0,l=arguments.length>9?arguments[9]:void 0,c=new er(null,e,t,n,r,i,a,Xe(o));if(u&&(c.urlHandlingStrategy=u),l&&(c.routeReuseStrategy=l),xr(s,c),s.enableTracing){var f=Object(h.q)();c.events.subscribe(function(e){f.logGroup("Router Event: ".concat(e.constructor.name)),f.log(e.toString()),f.log(e),f.logGroupEnd()})}return c},deps:[it,Yn,h.f,f.s,f.x,f.i,Xn,fr,[function e(){Object(c.a)(this,e)},new f.B],[function e(){Object(c.a)(this,e)},new f.B]]},Yn,{provide:Et,useFactory:function(e){return e.routerState.root},deps:[er]},{provide:f.x,useClass:f.K},cr,lr,ur,{provide:fr,useValue:{enableTracing:!1}}];function vr(){return new f.z("Router",er)}var mr=function(){var e=function(){function e(t,n){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[pr,_r(t),{provide:dr,useFactory:br,deps:[[er,new f.B,new f.J]]},{provide:fr,useValue:n||{}},{provide:h.g,useFactory:yr,deps:[h.l,[new f.p(h.a),new f.B],fr]},{provide:hr,useFactory:gr,deps:[er,h.m,fr]},{provide:sr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:lr},{provide:f.z,multi:!0,useFactory:vr},[wr,{provide:f.d,multi:!0,useFactory:Tr,deps:[wr]},{provide:Mr,useFactory:Sr,deps:[wr]},{provide:f.b,multi:!0,useExisting:Mr}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[_r(t)]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Qb(dr,8),f.Qb(er,8))},e.\u0275mod=f.Db({type:e}),e.\u0275inj=f.Cb({}),e}();function gr(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new hr(e,t,n)}function yr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new h.d(e,t):new h.k(e,t)}function br(e){return"guarded"}function _r(e){return[{provide:f.a,multi:!0,useValue:e},{provide:Xn,multi:!0,useValue:e}]}function xr(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}var wr=function(){var e=function(){function e(t){Object(c.a)(this,e),this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new g.a}return Object(s.a)(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(h.e,Promise.resolve(null)).then(function(){var t=null,n=new Promise(function(e){return t=e}),r=e.injector.get(er),i=e.injector.get(fr);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return e.initNavigation?Object(p.a)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()):t(!0),n})}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(fr),n=this.injector.get(cr),r=this.injector.get(hr),i=this.injector.get(er),a=this.injector.get(f.g);e===a.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(f.Qb(f.s))},e.\u0275prov=f.Bb({token:e,factory:e.\u0275fac}),e}();function Tr(e){return e.appInitializer.bind(e)}function Sr(e){return e.bootstrapListener.bind(e)}var Mr=new f.r("Router Initializer")},uFwe:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("BsWD");function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},vuIU:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},"x+ZX":function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("Ji7U"),i=n("LK+K"),a=n("1OyB"),o=n("vuIU"),s=n("7o/Q");function u(){return function(e){return e.lift(new l(e))}}var l=function(){function e(t){Object(a.a)(this,e),this.connectable=t}return Object(o.a)(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new c(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),c=function(e){Object(r.a)(n,e);var t=Object(i.a)(n);function n(e,r){var i;return Object(a.a)(this,n),(i=t.call(this,e)).connectable=r,i}return Object(o.a)(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null}}]),n}(s.a)},yCtX:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("HDdC"),i=n("ngJS"),a=n("jZKg");function o(e,t){return t?Object(a.a)(e,t):new r.a(Object(i.a)(e))}},"z+Ro":function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",function(){return r})},zUnb:function(e,t,n){"use strict";n.r(t);var r,i=n("ReuC"),a=n("foSv"),o=n("1OyB"),s=n("vuIU"),u=n("Ji7U"),l=n("LK+K"),c=n("ofXK"),h=n("fXoL"),f=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"getProperty",value:function(e,t){return e[t]}},{key:"log",value:function(e){window.console&&window.console.log&&window.console.log(e)}},{key:"logGroup",value:function(e){window.console&&window.console.group&&window.console.group(e)}},{key:"logGroupEnd",value:function(){window.console&&window.console.groupEnd&&window.console.groupEnd()}},{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){return e.parentNode&&e.parentNode.removeChild(e),e}},{key:"getValue",value:function(e){return e.value}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getHistory",value:function(){return window.history}},{key:"getLocation",value:function(){return window.location}},{key:"getBaseHref",value:function(e){var t,n=d||(d=document.querySelector("base"))?d.getAttribute("href"):null;return null==n?null:(t=n,r||(r=document.createElement("a")),r.setAttribute("href",t),"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname)}},{key:"resetBaseElement",value:function(){d=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"performanceNow",value:function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}},{key:"supportsCookies",value:function(){return!0}},{key:"getCookie",value:function(e){return Object(c.r)(document.cookie,e)}}],[{key:"makeCurrent",value:function(){Object(c.s)(new n)}}]),n}(function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(o.a)(this,n),t.call(this)}return Object(s.a)(n,[{key:"supportsDOMEvents",value:function(){return!0}}]),n}(c.o)),d=null,p=new h.r("TRANSITION_ID"),v=[{provide:h.d,useFactory:function(e,t,n){return function(){n.get(h.e).donePromise.then(function(){var n=Object(c.q)();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(function(t){return t.getAttribute("ng-transition")===e}).forEach(function(e){return n.remove(e)})})}},deps:[p,c.c,h.s],multi:!0}],m=function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"addToWindow",value:function(e){h.mb.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},h.mb.getAllAngularTestabilities=function(){return e.getAllTestabilities()},h.mb.getAllAngularRootElements=function(){return e.getAllRootElements()},h.mb.frameworkStabilizers||(h.mb.frameworkStabilizers=[]),h.mb.frameworkStabilizers.push(function(e){var t=h.mb.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?Object(c.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){Object(h.U)(new e)}}]),e}(),g=new h.r("EventManagerPlugins"),y=function(){var e=function(){function e(t,n){var r=this;Object(o.a)(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach(function(e){return e.manager=r}),this._plugins=t.slice().reverse()}return Object(s.a)(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Qb(g),h.Qb(h.A))},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}(),b=function(){function e(t){Object(o.a)(this,e),this._doc=t}return Object(s.a)(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=Object(c.q)().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),_=function(){var e=function(){function e(){Object(o.a)(this,e),this._stylesSet=new Set}return Object(s.a)(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}(),x=function(){var e=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Map,r._hostNodes.set(e.head,[]),r}return Object(s.a)(n,[{key:"_addStylesToHost",value:function(e,t,n){var r=this;e.forEach(function(e){var i=r._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}},{key:"addHost",value:function(e){var t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}},{key:"removeHost",value:function(e){var t=this._hostNodes.get(e);t&&t.forEach(w),this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach(function(n,r){t._addStylesToHost(e,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(e){return e.forEach(w)})}}]),n}(_);return e.\u0275fac=function(t){return new(t||e)(h.Qb(c.c))},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}();function w(e){Object(c.q)().remove(e)}var T={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},S=/%COMP%/g,M="%COMP%",O="_nghost-".concat(M),E="_ngcontent-".concat(M);function k(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?k(e,i,n):(i=i.replace(S,e),n.push(i))}return n}function A(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var C=function(){var e=function(){function e(t,n,r){Object(o.a)(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new P(t)}return Object(s.a)(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case h.Q.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new j(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case 1:case h.Q.ShadowDom:return new L(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=k(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Qb(y),h.Qb(x),h.Qb(h.c))},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}(),P=function(){function e(t){Object(o.a)(this,e),this.eventManager=t,this.data=Object.create(null)}return Object(s.a)(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(T[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=T[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=T[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&(h.G.DashCase|h.G.Important)?e.style.setProperty(t,n,r&h.G.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&h.G.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,A(n)):this.eventManager.addEventListener(e,t,A(n))}}]),e}(),j=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a){var s;Object(o.a)(this,n),(s=t.call(this,e)).component=i;var u=k(a+"-"+i.id,i.styles,[]);return r.addStyles(u),s.contentAttr=E.replace(S,a+"-"+i.id),s.hostAttr=O.replace(S,a+"-"+i.id),s}return Object(s.a)(n,[{key:"applyToHost",value:function(e){Object(i.a)(Object(a.a)(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=Object(i.a)(Object(a.a)(n.prototype),"createElement",this).call(this,e,t);return Object(i.a)(Object(a.a)(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(P),L=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a){var s;Object(o.a)(this,n),(s=t.call(this,e)).sharedStylesHost=r,s.hostEl=i,s.shadowRoot=i.attachShadow({mode:"open"}),s.sharedStylesHost.addHost(s.shadowRoot);for(var u=k(a.id,a.styles,[]),l=0;l<u.length;l++){var c=document.createElement("style");c.textContent=u[l],s.shadowRoot.appendChild(c)}return s}return Object(s.a)(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return Object(i.a)(Object(a.a)(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return Object(i.a)(Object(a.a)(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return Object(i.a)(Object(a.a)(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(Object(i.a)(Object(a.a)(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(P),R=function(){var e=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(b);return e.\u0275fac=function(t){return new(t||e)(h.Qb(c.c))},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}(),I=["alt","control","meta","shift"],D={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},N={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},H={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},G=function(){var e=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),a=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return Object(c.q)().onAndCancel(e,i.domEventName,a)})}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),a="";if(I.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),a+=e+".")}),a+=i,0!=t.length||0===i.length)return null;var o={};return o.domEventName=r,o.fullKey=a,o}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&N.hasOwnProperty(t)&&(t=N[t]))}return D[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),I.forEach(function(r){r!=n&&(0,H[r])(e)&&(t+=r+".")}),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded(function(){return t(i)})}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(b);return e.\u0275fac=function(t){return new(t||e)(h.Qb(c.c))},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}(),B=[{provide:h.C,useValue:c.p},{provide:h.D,useValue:function(){f.makeCurrent(),m.init()},multi:!0},{provide:c.c,useFactory:function(){return Object(h.sb)(document),document},deps:[]}],U=Object(h.R)(h.T,"browser",B),F=[[],{provide:h.W,useValue:"root"},{provide:h.m,useFactory:function(){return new h.m},deps:[]},{provide:g,useClass:R,multi:!0,deps:[c.c,h.A,h.C]},{provide:g,useClass:G,multi:!0,deps:[c.c]},[],{provide:C,useClass:C,deps:[y,x,h.c]},{provide:h.F,useExisting:C},{provide:_,useExisting:x},{provide:x,useClass:x,deps:[c.c]},{provide:h.M,useClass:h.M,deps:[h.A]},{provide:y,useClass:y,deps:[g,h.A]},[]],z=function(){var e=function(){function e(t){if(Object(o.a)(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return Object(s.a)(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:h.c,useValue:t.appId},{provide:p,useExisting:h.c},v]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Qb(e,12))},e.\u0275mod=h.Db({type:e}),e.\u0275inj=h.Cb({providers:F,imports:[c.b,h.f]}),e}();"undefined"!=typeof window&&window;var V=n("tk/3"),W=n("tyNb"),X=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.zb({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&h.Gb(0,"router-outlet")},directives:[W.g],encapsulation:2}),e}(),q=n("h/w8"),K=n("RMjP"),Y=n("UWY7"),J=n("mrSG"),Z=n("EY2u"),Q=[],$=function(){var e=function(){function e(t){Object(o.a)(this,e),this.router=t,this.trees=Q}return Object(s.a)(e,[{key:"add",value:function(e){this.trees.push(e)}},{key:"shouldPrefetch",value:function(e){var t=this.router.parseUrl(e);return this.trees.some(ee.bind(null,t))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Qb(W.c))},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}();function ee(e,t){return function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return t[n]===e[n]})}(t.queryParams,e.queryParams)&&te(t.root,e.root,e.root.segments)}function te(e,t,n){if(e.segments.length>n.length)return!!ne(e.segments.slice(0,n.length),n)&&!t.hasChildren();if(e.segments.length===n.length){if(!ne(e.segments,n))return!1;if(!t.hasChildren())return!0;for(var r in t.children){if(!e.children[r])break;if(te(e.children[r],t.children[r],t.children[r].segments))return!0}return!1}var i=n.slice(0,e.segments.length),a=n.slice(e.segments.length);return!!ne(e.segments,i)&&!!e.children[W.b]&&te(e.children[W.b],t,a)}function ne(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path||e.path.startsWith(":")||t[n].path.startsWith(":")})}var re="undefined"!=typeof window?window.requestIdleCallback||function(e){var t=Date.now();return setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)}:function(){},ie=function(){return"undefined"!=typeof window&&!!window.IntersectionObserver},ae=new h.r("LinkHandler"),oe=function(){var e=function(){function e(t,n,r){var i=this;Object(o.a)(this,e),this.loader=t,this.registry=n,this.ngZone=r,this.elementLink=new Map,this.observer=ie()?new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var t=e.target,n=i.elementLink.get(t);if(!n||!n.urlTree)return;i.registry.add(n.urlTree),i.observer.unobserve(t),re(function(){i.loader.preload().subscribe(function(){})})}})}):null}return Object(s.a)(e,[{key:"register",value:function(e){var t=this;this.elementLink.set(e.element,e),this.ngZone.runOutsideAngular(function(){t.observer.observe(e.element)})}},{key:"unregister",value:function(e){this.elementLink.has(e.element)&&(this.observer.unobserve(e.element),this.elementLink.delete(e.element))}},{key:"supported",value:function(){return ie()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Qb(W.h),h.Qb($),h.Qb(h.A))},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}(),se=function(){var e=function(){function e(t,n){Object(o.a)(this,e),this.loader=t,this.registry=n}return Object(s.a)(e,[{key:"register",value:function(e){var t=this;this.registry.add(e.urlTree),re(function(){return t.loader.preload().subscribe(function(){})})}},{key:"unregister",value:function(e){}},{key:"supported",value:function(){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Qb(W.h),h.Qb($))},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}(),ue=function(){var e=function(){function e(t,n){Object(o.a)(this,e),this.registry=t,this.router=n,this.loading=new Set}return Object(s.a)(e,[{key:"preload",value:function(e,t){if(this.loading.has(e))return Z.a;var n="undefined"!=typeof navigator?navigator.connection:void 0;if(n&&((n.effectiveType||"").includes("2g")||n.saveData))return Z.a;if(e.data&&!1===e.data.preload)return Z.a;var r=le(this.router.config,e);return this.registry.shouldPrefetch(r)?(this.loading.add(e),t()):Z.a}}]),e}();return e.\u0275fac=function(t){return new(t||e)(h.Qb($),h.Qb(W.c))},e.\u0275prov=h.Bb({token:e,factory:e.\u0275fac}),e}(),le=function(e,t){e=e.slice();for(var n=new Map,r=new Set,i=function(){var i=e.shift();if(r.add(i),i===t)return"break";var a=i.children||[],o=i._loadedConfig;o&&o.routes&&(a=a.concat(o.routes)),a.forEach(function(t){r.has(t)||(n.set(t,i),e.push(t))})};e.length&&"break"!==i(););for(var a="",o=t;o;)a=ce(o)?"/".concat(o.path).concat(a):"/(".concat(o.outlet,":").concat(o.path).concat(a,")"),o=n.get(o);return a.replace(/\/\//,"/")};function ce(e){return e.outlet===W.b||!e.outlet}var he=function(){var e=function e(){Object(o.a)(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Db({type:e}),e.\u0275inj=h.Cb({providers:[{provide:ae,useClass:oe,multi:!0},{provide:ae,useClass:se,multi:!0},$,ue]}),e}(),fe=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Db({type:e}),e.\u0275inj=h.Cb({imports:[[he],he]}),e}(),de=[{path:"externalRedirect",canActivate:[new h.r("externalUrlRedirectResolver")],component:function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.zb({type:e,selectors:[["app-not-found"]],decls:2,vars:0,template:function(e,t){1&e&&(h.Kb(0,"div"),h.kc(1," The page you are looking for was not found! "),h.Jb())},encapsulation:2}),e}()},{path:"watch",loadChildren:function(){return Object(J.a)(void 0,void 0,void 0,function(){return Object(J.b)(this,function(e){switch(e.label){case 0:return[4,Promise.resolve().then(n.bind(null,"RMjP"))];case 1:return[2,e.sent().WatchViewerModule]}})})}},{path:"list",loadChildren:function(){return Object(J.a)(void 0,void 0,void 0,function(){return Object(J.b)(this,function(e){switch(e.label){case 0:return[4,Promise.resolve().then(n.bind(null,"UWY7"))];case 1:return[2,e.sent().WatchListModule]}})})}},{path:"",redirectTo:"/list",pathMatch:"full"},{path:"**",redirectTo:"/list"}],pe=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Db({type:e}),e.\u0275inj=h.Cb({providers:[],imports:[[fe,W.f.forRoot(de,{preloadingStrategy:ue,useHash:!0})],W.f]}),e}();function ve(e){return function(){return e.load()}}var me=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Db({type:e,bootstrap:[X]}),e.\u0275inj=h.Cb({providers:[q.a,{provide:h.d,useFactory:ve,multi:!0,deps:[q.a]}],imports:[[z,V.b,pe,Y.WatchListModule,K.WatchViewerModule]]}),e}();n("AytR").a.production&&Object(h.S)(),U().bootstrapModule(me).catch(function(e){return console.error(e)})},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0]]]);